<!DOCTYPE html><html lang="en"><head><!-- hexo injector head_begin start --><!-- Google tag (gtag.js) begins-->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3DZR3TQYCY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-3DZR3TQYCY');
    </script>
    <!-- Google tag (gtag.js) ends-->
    <!-- hexo injector head_begin end -->
    <meta charset="utf-8">
    <!-- security headers starts -->
    <!-- meta http-equiv="content-security-policy" content="script-src 'sha256-B5nfCL2Dym3Ba4YJFI7wB3f4vtClbrYJZ32A5erBEdg=' 'sha256-lJjk3/dvd+wXqRFjV7T5L/nXJXr5NjUjmsKSPEe+ass=';" -->
    <!-- security headers ends -->
    <!-- favicon starts -->    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <!-- favicon ends -->
    

    
    <title>The Bulkhead Pattern: Isolating Failures in Distributed Systems | Decoding Digital Anomalies</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="keywords" content="Architecture,Design Patterns,Fault Tolerance,Resilience">
    
    
    <meta name="description" content="Discover how the Bulkhead pattern prevents cascading failures by isolating resources and limiting the blast radius when components fail in distributed systems.">
<meta property="og:type" content="article">
<meta property="og:title" content="The Bulkhead Pattern: Isolating Failures in Distributed Systems">
<meta property="og:url" content="https://neo01.com/2020/03/Bulkhead-Pattern/index.html">
<meta property="og:site_name" content="Decoding Digital Anomalies">
<meta property="og:description" content="Discover how the Bulkhead pattern prevents cascading failures by isolating resources and limiting the blast radius when components fail in distributed systems.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://neo01.com/assets/architecture/thumbnail.png">
<meta property="article:published_time" content="2020-03-14T16:00:00.000Z">
<meta property="article:modified_time" content="2025-10-13T16:01:44.515Z">
<meta property="article:author" content="Neo Alienson">
<meta property="article:tag" content="Architecture">
<meta property="article:tag" content="Design Patterns">
<meta property="article:tag" content="Fault Tolerance">
<meta property="article:tag" content="Resilience">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://neo01.com/assets/architecture/thumbnail.png">
    
            <link rel="alternate" href="/atom.xml" title="Decoding Digital Anomalies" type="application/atom+xml">
    

    

    

    

    

    

    

    
    
        


    
    
        


    

<!-- hexo injector head_end start --><link rel="stylesheet" type="text/css" href="/css/bundle.css"><script type="text/javascript" src="/js/bundle_first.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><style id="admonition-styles">.admonition {
  margin: 1em 0;
  padding: 0rem;
  border-left: 0.3rem solid;
  border-radius: 0.4rem;
  background-color: #f9f9f9;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
  overflow: hidden;
  page-break-inside: avoid;
}

.admonition-title {
  display: flex;
  align-items: center;
  font-weight: 600;
  padding: 0rem 1rem 0.1rem 0.75rem;
  font-size: 1.05em;
  background-color: rgba(0, 0, 0, 0.03);
  border-top-left-radius: 0.4rem;
  border-top-right-radius: 0.4rem;
  margin: 0 !important;
}

.admonition-icon {
  font-size: 1.2em;
  margin-right: 0.6rem;
  opacity: 0.85;
  margin-top: 0.1rem;
}

/* ÂÜÖÂÆπÂå∫Âüü margin */
.admonition > *:not(.admonition-title) {
  margin: 0.6rem 1rem 0.6rem 1rem;
}

/* NOTE Á±ªÂûã */
.admonition.anote {
  border-color: #448aff;
}
.admonition.anote > .admonition-title {
  background-color: #448aff1a;
  color: #2962ff;
}

/* INFO / TODO Á±ªÂûã */
.admonition.info,
.admonition.todo {
  border-color: #00b8d4;
}
.admonition.info > .admonition-title,
.admonition.todo > .admonition-title {
  background-color: rgba(0, 184, 212, 0.1);
  color: #007c91;
}

/* Ë≠¶ÂëäÁ±ª */
.admonition.warning,
.admonition.attention,
.admonition.caution {
  border-color: #ff9100;
}
.admonition.warning > .admonition-title,
.admonition.attention > .admonition-title,
.admonition.caution > .admonition-title {
  background-color: rgba(255, 145, 0, 0.1);
  color: #c66900;
}

/* ÈîôËØØÁ±ª */
.admonition.failure,
.admonition.missing,
.admonition.fail,
.admonition.error,
.admonition.danger,
.admonition.bug {
  border-color: #ff5252;
}
.admonition.failure > .admonition-title,
.admonition.missing > .admonition-title,
.admonition.fail > .admonition-title,
.admonition.error > .admonition-title,
.admonition.danger > .admonition-title,
.admonition.bug > .admonition-title {
  background-color: rgba(255, 82, 82, 0.1);
  color: #b71c1c;
}

/* TIP Á±ªÂûã */
.admonition.tip {
  border-color: #00bfa5;
}
.admonition.tip > .admonition-title {
  background-color: #00bfa51a;
  color: #00796b;
}

/* SUCCESS Á±ªÂûã */
.admonition.success {
  border-color: #00c853;
}
.admonition.success > .admonition-title {
  background-color: #00c8531a;
  color: #2e7d32;
}

/* QUESTION Á±ªÂûã */
.admonition.question {
  border-color: #64dd17;
}
.admonition.question > .admonition-title {
  background-color: #64dd171a;
  color: #558b2f;
}

/* EXAMPLE Á±ªÂûã */
.admonition.example {
  border-color: #7c4dff;
}
.admonition.example > .admonition-title {
  background-color: #7c4dff1a;
  color: #512da8;
}

/* QUOTE Á±ªÂûã */
.admonition.quote {
  border-color: #9e9e9e;
}
.admonition.quote > .admonition-title {
  background-color: #9e9e9e1a;
  color: #424242;
}

/*ÈªëÊöóÊ®°Âºè*/
/* Â§úÈó¥Ê®°ÂºèÂü∫Á°ÄÊ†∑Âºè */
[data-theme="dark"] .admonition {
  background-color: #1e1e1e;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
}

[data-theme="dark"] .admonition-title {
  background-color: rgba(255, 255, 255, 0.05);
}

/* anote */
[data-theme="dark"] .admonition.anote {
  border-color: #82b1ff;
}
[data-theme="dark"] .admonition.anote > .admonition-title {
  background-color: #82b1ff1a;
  color: #bbdefb;
}

/* tip */
[data-theme="dark"] .admonition.tip {
  border-color: #64ffda;
}
[data-theme="dark"] .admonition.tip > .admonition-title {
  background-color: #64ffda1a;
  color: #1de9b6;
}

/* success */
[data-theme="dark"] .admonition.success {
  border-color: #69f0ae;
}
[data-theme="dark"] .admonition.success > .admonition-title {
  background-color: #69f0ae1a;
  color: #00e676;
}

/* question */
[data-theme="dark"] .admonition.question {
  border-color: #b2ff59;
}
[data-theme="dark"] .admonition.question > .admonition-title {
  background-color: #b2ff591a;
  color: #aeea00;
}

/* example */
[data-theme="dark"] .admonition.example {
  border-color: #b388ff;
}
[data-theme="dark"] .admonition.example > .admonition-title {
  background-color: #b388ff1a;
  color: #b39ddb;
}

/* quote */
[data-theme="dark"] .admonition.quote {
  border-color: #bdbdbd;
}
[data-theme="dark"] .admonition.quote > .admonition-title {
  background-color: #bdbdbd1a;
  color: #eeeeee;
}

/* warning / attention / caution */
[data-theme="dark"] .admonition.warning,
[data-theme="dark"] .admonition.attention,
[data-theme="dark"] .admonition.caution {
  border-color: #ffb300;
}
[data-theme="dark"] .admonition.warning > .admonition-title,
[data-theme="dark"] .admonition.attention > .admonition-title,
[data-theme="dark"] .admonition.caution > .admonition-title {
  background-color: #ffb3001a;
  color: #ffe082;
}

/* error / fail / failure / bug / danger / missing */
[data-theme="dark"] .admonition.error,
[data-theme="dark"] .admonition.fail,
[data-theme="dark"] .admonition.failure,
[data-theme="dark"] .admonition.bug,
[data-theme="dark"] .admonition.missing,
[data-theme="dark"] .admonition.danger {
  border-color: #ef5350;
}
[data-theme="dark"] .admonition.error > .admonition-title,
[data-theme="dark"] .admonition.fail > .admonition-title,
[data-theme="dark"] .admonition.failure > .admonition-title,
[data-theme="dark"] .admonition.bug > .admonition-title,
[data-theme="dark"] .admonition.missing > .admonition-title,
[data-theme="dark"] .admonition.danger > .admonition-title {
  background-color: #ef53501a;
  color: #ff8a80;
}</style><script id="mermaid-scripts" src="/cache/mermaid.min.local.js"></script>
<script>mermaid.initialize({theme: 'default'});</script></head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" title="Homepage" class="logo"></a>
                    </h1>
                        <h2 class="subtitle-wrap">
                            <p class="title">Decoding Digital Anomalies</p>
                          <p class="subtitle">Sometimes the feature is the bug in the digital rabbit hole, and vice versa</p>
                        </h2>
                    <div id="lang-selector">
                        <span class="lang-icon">üåê</span>
                        
                            <a href="/zh-TW/2020/03/Bulkhead-Pattern/" class="lang-link">ÁπÅÈ´î‰∏≠Êñá</a>
<span class="lang-sep">|</span>                            <a href="/zh-CN/2020/03/Bulkhead-Pattern/" class="lang-link">ÁÆÄ‰Ωì‰∏≠Êñá</a>
                    </div>
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                                                                    <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AI/">AI</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AI/Art-Gallery/">Art Gallery</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Architecture/">Architecture</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Cybersecurity/">Cybersecurity</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Development/">Development</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Misc/">Misc</a></li></ul>
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/about-me">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" id="search-form-input" placeholder="Search">
        <button type="submit" title="Search" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" id="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script integrity="sha256-B5nfCL2Dym3Ba4YJFI7wB3f4vtClbrYJZ32A5erBEdg=">
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
        LANG: 'en',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>




</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Architecture/">Architecture</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-2020/03/Bulkhead-Pattern" class="article article-single article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner responsive-content">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        The Bulkhead Pattern: Isolating Failures in Distributed Systems
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
      <i class="fa fa-calendar"></i>
        
          Created <time datetime="2020-03-14T16:00:00.000Z" itemprop="datePublished">2020-03-15</time>
          &nbsp;<i class="fa fa-calendar"></i>
          Updated <time datetime="2025-10-13T16:01:44.515Z" itemprop="datePublished">2025-10-14</time>
        
    </div>


                

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Architecture/">Architecture</a> <a class="tag-link" href="/tags/Design-Patterns/">Design Patterns</a> <a class="tag-link" href="/tags/Resilience/">Resilience</a> <a class="tag-link" href="/tags/Fault-Tolerance/">Fault Tolerance</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Problem-Cascading-Failures"><span class="toc-text">The Problem: Cascading Failures</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Solution-Isolate-Resources"><span class="toc-text">The Solution: Isolate Resources</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-It-Works-Resource-Isolation"><span class="toc-text">How It Works: Resource Isolation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Implementation-Strategies"><span class="toc-text">Implementation Strategies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#When-to-Use-the-Bulkhead-Pattern"><span class="toc-text">When to Use the Bulkhead Pattern</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Architecture-Quality-Attributes"><span class="toc-text">Architecture Quality Attributes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Trade-offs-and-Considerations"><span class="toc-text">Trade-offs and Considerations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Monitoring-and-Observability"><span class="toc-text">Monitoring and Observability</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Real-World-Implementation-Patterns"><span class="toc-text">Real-World Implementation Patterns</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusion"><span class="toc-text">Conclusion</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Related-Patterns"><span class="toc-text">Related Patterns</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#References"><span class="toc-text">References</span></a></li></ol>
            <p>Imagine a ship divided into watertight compartments by bulkheads. If the hull is breached, only one compartment floods while the others remain dry, keeping the ship afloat. This maritime safety principle inspired a critical pattern for building resilient distributed systems: the Bulkhead pattern.</p>
<h2 id="The-Problem-Cascading-Failures">The Problem: Cascading Failures</h2>
<p>In distributed systems, components share resources like thread pools, database connections, memory, and network bandwidth. When one component fails or becomes slow, it can consume all available resources, causing a domino effect that brings down the entire system.</p>
<p>Consider these scenarios:</p>
<ul>
<li><strong>Thread Pool Exhaustion</strong>: A slow external API consumes all threads, blocking other operations</li>
<li><strong>Connection Pool Depletion</strong>: One database query locks all connections, preventing other services from accessing the database</li>
<li><strong>Memory Saturation</strong>: A memory leak in one component crashes the entire application</li>
<li><strong>Network Bandwidth</strong>: A large file transfer starves other network operations</li>
</ul>
<div class="admonition warning"><p class="admonition-title"><span class="mdi mdi-alert-outline admonition-icon"></span>‚ö†Ô∏è Real-World Impact</p><div class="admonition-content"><p>A single slow microservice consuming all available threads can cascade into a complete system outage, affecting thousands of users and multiple business functions simultaneously.</p>
</div></div>
<h2 id="The-Solution-Isolate-Resources">The Solution: Isolate Resources</h2>
<p>The Bulkhead pattern solves this problem by partitioning resources into isolated pools. Each component or service gets its own dedicated resources, preventing failures from spreading across the system.</p>
<p>Key principles:</p>
<ol>
<li><strong>Partition resources</strong> into isolated pools (thread pools, connection pools, etc.)</li>
<li><strong>Allocate resources</strong> based on criticality and expected load</li>
<li><strong>Contain failures</strong> within their designated partition</li>
<li><strong>Maintain service</strong> for unaffected components</li>
</ol>
<div class="mermaid">graph TB
    subgraph "Without Bulkhead"
        A1[Service A] --&gt; SP[Shared Pool<br>100 threads]
        B1[Service B] --&gt; SP
        C1[Service C] --&gt; SP
        SP -.-&gt;|Failure spreads| X1[Complete Outage]
    end
    
    subgraph "With Bulkhead"
        A2[Service A] --&gt; PA[Pool A<br>40 threads]
        B2[Service B] --&gt; PB[Pool B<br>30 threads]
        C2[Service C] --&gt; PC[Pool C<br>30 threads]
        PB -.-&gt;|Failure contained| X2[Service B Down]
        PA --&gt; OK1[Service A OK]
        PC --&gt; OK2[Service C OK]
    end
    
    style X1 fill:#ff6b6b,stroke:#c92a2a
    style X2 fill:#ffd43b,stroke:#f59f00
    style OK1 fill:#51cf66,stroke:#2f9e44
    style OK2 fill:#51cf66,stroke:#2f9e44</div>
<h2 id="How-It-Works-Resource-Isolation">How It Works: Resource Isolation</h2>
<p>Let‚Äôs explore how to implement bulkheads for different resource types:</p>
<h3 id="Thread-Pool-Isolation">Thread Pool Isolation</h3>
<p>Separate thread pools prevent one slow operation from blocking others:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">// Without Bulkhead - shared thread pool
const sharedExecutor = new ThreadPoolExecutor(100);

app.get('/api/orders', async (req, res) =&gt; {
  await sharedExecutor.execute(() =&gt; fetchOrders());
});

app.get('/api/inventory', async (req, res) =&gt; {
  await sharedExecutor.execute(() =&gt; fetchInventory());
});

// Problem: Slow fetchOrders() blocks fetchInventory()</code></pre>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">// With Bulkhead - isolated thread pools
const orderExecutor = new ThreadPoolExecutor(40);
const inventoryExecutor = new ThreadPoolExecutor(30);
const paymentExecutor = new ThreadPoolExecutor(30);

app.get('/api/orders', async (req, res) =&gt; {
  await orderExecutor.execute(() =&gt; fetchOrders());
});

app.get('/api/inventory', async (req, res) =&gt; {
  await inventoryExecutor.execute(() =&gt; fetchInventory());
});

app.get('/api/payment', async (req, res) =&gt; {
  await paymentExecutor.execute(() =&gt; processPayment());
});

// Benefit: Slow orders don't affect inventory or payment</code></pre>
<h3 id="Connection-Pool-Isolation">Connection Pool Isolation</h3>
<p>Separate database connection pools for different services:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">// Configure isolated connection pools
const orderDbPool = createPool({
  host: 'db.example.com',
  database: 'orders',
  max: 20,  // Maximum 20 connections
  min: 5
});

const analyticsDbPool = createPool({
  host: 'db.example.com',
  database: 'analytics',
  max: 10,  // Separate pool for analytics
  min: 2
});

// Heavy analytics queries won't starve order processing
async function getOrderDetails(orderId) {
  const conn = await orderDbPool.getConnection();
  try {
    return await conn.query('SELECT * FROM orders WHERE id = ?', [orderId]);
  } finally {
    conn.release();
  }
}

async function runAnalytics() {
  const conn = await analyticsDbPool.getConnection();
  try {
    return await conn.query('SELECT /* complex analytics query */');
  } finally {
    conn.release();
  }
}</code></pre>
<h3 id="Circuit-Breaker-Integration">Circuit Breaker Integration</h3>
<p>Combine bulkheads with circuit breakers for enhanced resilience:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const CircuitBreaker = require('opossum');

// Create isolated circuit breakers for each service
const orderServiceBreaker = new CircuitBreaker(callOrderService, {
  timeout: 3000,
  errorThresholdPercentage: 50,
  resetTimeout: 30000
});

const inventoryServiceBreaker = new CircuitBreaker(callInventoryService, {
  timeout: 3000,
  errorThresholdPercentage: 50,
  resetTimeout: 30000
});

// Each service has its own failure handling
async function processOrder(order) {
  try {
    const orderResult = await orderServiceBreaker.fire(order);
    const inventoryResult = await inventoryServiceBreaker.fire(order.items);
    return { orderResult, inventoryResult };
  } catch (error) {
    // Handle failure gracefully
    return { error: error.message };
  }
}</code></pre>
<h2 id="Implementation-Strategies">Implementation Strategies</h2>
<h3 id="1-Service-Based-Partitioning">1. Service-Based Partitioning</h3>
<p>Allocate resources based on service boundaries:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">class BulkheadManager {
  constructor() {
    this.pools = {
      critical: new ThreadPool(50),    // Critical operations
      standard: new ThreadPool(30),    // Standard operations
      background: new ThreadPool(20)   // Background tasks
    };
  }
  
  async execute(priority, task) {
    const pool = this.pools[priority] || this.pools.standard;
    return pool.execute(task);
  }
}

const bulkhead = new BulkheadManager();

// Critical user-facing operations
app.post('/api/checkout', async (req, res) =&gt; {
  const result = await bulkhead.execute('critical', () =&gt; 
    processCheckout(req.body)
  );
  res.json(result);
});

// Background operations
app.post('/api/analytics', async (req, res) =&gt; {
  await bulkhead.execute('background', () =&gt; 
    logAnalytics(req.body)
  );
  res.status(202).send();
});</code></pre>
<h3 id="2-Tenant-Based-Partitioning">2. Tenant-Based Partitioning</h3>
<p>Isolate resources per tenant in multi-tenant systems:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">class TenantBulkhead {
  constructor() {
    this.tenantPools = new Map();
  }
  
  getPool(tenantId) {
    if (!this.tenantPools.has(tenantId)) {
      this.tenantPools.set(tenantId, new ThreadPool(10));
    }
    return this.tenantPools.get(tenantId);
  }
  
  async execute(tenantId, task) {
    const pool = this.getPool(tenantId);
    return pool.execute(task);
  }
}

// Tenant A's heavy load won't affect Tenant B
const tenantBulkhead = new TenantBulkhead();

app.get('/api/data', async (req, res) =&gt; {
  const tenantId = req.headers['x-tenant-id'];
  const result = await tenantBulkhead.execute(tenantId, () =&gt;
    fetchTenantData(tenantId)
  );
  res.json(result);
});</code></pre>
<h3 id="3-Load-Based-Partitioning">3. Load-Based Partitioning</h3>
<p>Separate high-load and low-load operations:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const bulkheadConfig = {
  highThroughput: {
    maxConcurrent: 100,
    queue: 1000
  },
  lowThroughput: {
    maxConcurrent: 20,
    queue: 100
  }
};

// High-throughput endpoint
app.get('/api/search', rateLimiter(bulkheadConfig.highThroughput), 
  async (req, res) =&gt; {
    // Handle search requests
  }
);

// Low-throughput but resource-intensive
app.post('/api/reports', rateLimiter(bulkheadConfig.lowThroughput),
  async (req, res) =&gt; {
    // Generate complex reports
  }
);</code></pre>
<h2 id="When-to-Use-the-Bulkhead-Pattern">When to Use the Bulkhead Pattern</h2>
<h3 id="Primary-Use-Cases">Primary Use Cases</h3>
<div class="admonition success"><p class="admonition-title"><span class="mdi mdi-check-circle-outline admonition-icon"></span>‚úÖ Ideal Scenarios</p><div class="admonition-content"><p><strong>Shared Resource Contention</strong>: When multiple services compete for limited resources like threads, connections, or memory.</p>
<p><strong>Critical Service Protection</strong>: When you need to guarantee availability for high-priority services regardless of other component failures.</p>
<p><strong>Multi-Tenant Systems</strong>: When isolating tenants prevents one tenant's load from affecting others.</p>
</div></div>
<h3 id="Secondary-Use-Cases">Secondary Use Cases</h3>
<div class="admonition info"><p class="admonition-title"><span class="mdi mdi-information-outline admonition-icon"></span>üìã Additional Benefits</p><div class="admonition-content"><p><strong>Performance Isolation</strong>: Separate slow operations from fast ones to maintain overall system responsiveness.</p>
<p><strong>Failure Containment</strong>: Limit the blast radius of failures to specific partitions.</p>
<p><strong>Resource Optimization</strong>: Allocate resources based on actual usage patterns and priorities.</p>
</div></div>
<div class="mermaid">graph TD
    A[Resource Analysis] --&gt; B{Shared Resources?}
    B --&gt;|Yes| C{Critical Services?}
    B --&gt;|No| D[Monitor Usage]
    C --&gt;|Yes| E[Use Bulkhead]
    C --&gt;|No| F{Multi-Tenant?}
    F --&gt;|Yes| E
    F --&gt;|No| G{Performance Issues?}
    G --&gt;|Yes| E
    G --&gt;|No| D
    
    style E fill:#51cf66,stroke:#2f9e44
    style D fill:#4dabf7,stroke:#1971c2</div>
<h2 id="Architecture-Quality-Attributes">Architecture Quality Attributes</h2>
<p>The Bulkhead pattern significantly impacts system quality:</p>
<h3 id="Resilience">Resilience</h3>
<p>Bulkheads enhance resilience by:</p>
<ul>
<li><strong>Failure Isolation</strong>: Containing failures within specific partitions</li>
<li><strong>Graceful Degradation</strong>: Maintaining partial functionality during failures</li>
<li><strong>Blast Radius Limitation</strong>: Preventing cascading failures across the system</li>
</ul>
<h3 id="Availability">Availability</h3>
<p>Availability improvements include:</p>
<ul>
<li><strong>Service Continuity</strong>: Critical services remain available despite other failures</li>
<li><strong>Reduced Downtime</strong>: Isolated failures don‚Äôt cause complete outages</li>
<li><strong>Faster Recovery</strong>: Smaller failure domains recover more quickly</li>
</ul>
<h3 id="Performance">Performance</h3>
<p>Performance benefits arise from:</p>
<ul>
<li><strong>Resource Optimization</strong>: Dedicated resources prevent contention</li>
<li><strong>Predictable Latency</strong>: Isolation prevents slow operations from affecting fast ones</li>
<li><strong>Better Throughput</strong>: Parallel processing without interference</li>
</ul>
<h3 id="Scalability">Scalability</h3>
<p>Scalability advantages include:</p>
<ul>
<li><strong>Independent Scaling</strong>: Scale resources for specific partitions based on demand</li>
<li><strong>Load Distribution</strong>: Distribute load across isolated resource pools</li>
<li><strong>Capacity Planning</strong>: Easier to plan capacity for isolated components</li>
</ul>
<h2 id="Trade-offs-and-Considerations">Trade-offs and Considerations</h2>
<p>Like any pattern, bulkheads introduce trade-offs:</p>
<div class="admonition warning"><p class="admonition-title"><span class="mdi mdi-alert-outline admonition-icon"></span>‚ö†Ô∏è Potential Drawbacks</p><div class="admonition-content"><p><strong>Resource Overhead</strong>: Maintaining multiple pools consumes more total resources</p>
<p><strong>Complexity</strong>: Additional configuration and management overhead</p>
<p><strong>Resource Waste</strong>: Underutilized pools represent wasted capacity</p>
<p><strong>Tuning Challenges</strong>: Determining optimal partition sizes requires careful analysis</p>
</div></div>
<h3 id="Sizing-Bulkheads">Sizing Bulkheads</h3>
<p>Determining the right size for each partition is critical:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">// Consider these factors when sizing
const bulkheadSize = {
  // Expected concurrent requests
  expectedLoad: 100,
  
  // Average response time (ms)
  avgResponseTime: 200,
  
  // Safety margin (20%)
  safetyMargin: 1.2,
  
  // Calculate pool size
  calculate() {
    // Little's Law: L = Œª √ó W
    // L = concurrent requests
    // Œª = arrival rate (requests/sec)
    // W = average time in system (sec)
    const arrivalRate = this.expectedLoad / 1;
    const timeInSystem = this.avgResponseTime / 1000;
    return Math.ceil(arrivalRate * timeInSystem * this.safetyMargin);
  }
};

console.log(`Recommended pool size: ${bulkheadSize.calculate()}`);</code></pre>
<h2 id="Monitoring-and-Observability">Monitoring and Observability</h2>
<p>Effective bulkhead implementation requires monitoring:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">class MonitoredBulkhead {
  constructor(name, maxConcurrent) {
    this.name = name;
    this.maxConcurrent = maxConcurrent;
    this.active = 0;
    this.rejected = 0;
    this.completed = 0;
  }
  
  async execute(task) {
    if (this.active &gt;= this.maxConcurrent) {
      this.rejected++;
      throw new Error(`Bulkhead ${this.name} at capacity`);
    }
    
    this.active++;
    const startTime = Date.now();
    
    try {
      const result = await task();
      this.completed++;
      return result;
    } finally {
      this.active--;
      const duration = Date.now() - startTime;
      
      // Emit metrics
      metrics.gauge(`bulkhead.${this.name}.active`, this.active);
      metrics.counter(`bulkhead.${this.name}.completed`, 1);
      metrics.histogram(`bulkhead.${this.name}.duration`, duration);
    }
  }
  
  getMetrics() {
    return {
      name: this.name,
      active: this.active,
      utilization: (this.active / this.maxConcurrent) * 100,
      rejected: this.rejected,
      completed: this.completed
    };
  }
}</code></pre>
<p>Key metrics to monitor:</p>
<ul>
<li><strong>Utilization</strong>: Percentage of pool capacity in use</li>
<li><strong>Rejection Rate</strong>: How often requests are rejected due to capacity</li>
<li><strong>Queue Depth</strong>: Number of waiting requests</li>
<li><strong>Response Time</strong>: Latency within each partition</li>
<li><strong>Error Rate</strong>: Failures within each bulkhead</li>
</ul>
<h2 id="Real-World-Implementation-Patterns">Real-World Implementation Patterns</h2>
<h3 id="Pattern-1-Microservices-Architecture">Pattern 1: Microservices Architecture</h3>
<p>Each microservice has isolated resources:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">// Service A - Order Service
const orderService = {
  threadPool: new ThreadPool(50),
  dbPool: createPool({ max: 20 }),
  cachePool: createPool({ max: 10 })
};

// Service B - Inventory Service
const inventoryService = {
  threadPool: new ThreadPool(30),
  dbPool: createPool({ max: 15 }),
  cachePool: createPool({ max: 5 })
};

// Complete isolation between services</code></pre>
<h3 id="Pattern-2-API-Gateway-with-Bulkheads">Pattern 2: API Gateway with Bulkheads</h3>
<p>API gateway implements bulkheads for backend services:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const gateway = {
  routes: {
    '/api/orders': {
      bulkhead: new Bulkhead(40),
      backend: 'http://orders-service'
    },
    '/api/inventory': {
      bulkhead: new Bulkhead(30),
      backend: 'http://inventory-service'
    },
    '/api/analytics': {
      bulkhead: new Bulkhead(10),
      backend: 'http://analytics-service'
    }
  }
};

app.use(async (req, res) =&gt; {
  const route = gateway.routes[req.path];
  if (!route) return res.status(404).send();
  
  try {
    await route.bulkhead.execute(async () =&gt; {
      const response = await fetch(route.backend + req.path);
      res.json(await response.json());
    });
  } catch (error) {
    res.status(503).json({ error: 'Service unavailable' });
  }
});</code></pre>
<h2 id="Conclusion">Conclusion</h2>
<p>The Bulkhead pattern is essential for building resilient distributed systems. By isolating resources and containing failures, it enables systems to:</p>
<ul>
<li>Prevent cascading failures</li>
<li>Maintain partial functionality during outages</li>
<li>Protect critical services</li>
<li>Optimize resource utilization</li>
</ul>
<p>While it introduces additional complexity and resource overhead, the benefits of improved resilience and availability make it invaluable for production systems. Implement bulkheads when shared resources create contention or when you need to guarantee availability for critical services.</p>
<h2 id="Related-Patterns">Related Patterns</h2>
<ul>
<li><strong>Circuit Breaker</strong>: Complements bulkheads by preventing calls to failing services</li>
<li><strong>Retry Pattern</strong>: Works with bulkheads to handle transient failures</li>
<li><strong>Throttling</strong>: Controls request rates to prevent resource exhaustion</li>
<li><strong>Queue-Based Load Leveling</strong>: Smooths load spikes that could overwhelm bulkheads</li>
</ul>
<h2 id="References">References</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/azure/architecture/patterns/bulkhead">Microsoft Azure Architecture Patterns: Bulkhead</a></li>
<li><a target="_blank" rel="noopener" href="https://pragprog.com/titles/mnee2/release-it-second-edition/">Release It! Design and Deploy Production-Ready Software</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Netflix/Hystrix/wiki/How-it-Works#bulkheads">Netflix Hystrix: Bulkhead Pattern</a></li>
</ul>

        </div>
        <footer class="article-footer">
            
    <a data-url="https://neo01.com/2020/03/Bulkhead-Pattern/" data-id="11d305bf" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url').replace("http://","https://"),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <!--script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "Neo Alienson"
        },
        "headline": "The Bulkhead Pattern: Isolating Failures in Distributed Systems",
        "image": "https://neo01.com/assets/architecture/thumbnail.png",
        "keywords": "Architecture Design Patterns Fault Tolerance Resilience",
        "genre": "Architecture",
        "datePublished": "2020-03-15",
        "dateCreated": "2020-03-15",
        "dateModified": "2025-10-14",
        "url": "https://neo01.com/2020/03/Bulkhead-Pattern/",
        "description": "Discover how the Bulkhead pattern prevents cascading failures by isolating resources and limiting the blast radius when components fail in distributed systems.",
        "wordCount": 2196
    }
</script-->

</article>

                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
                <li>
                    <a class="social-tooltip" title="stack-exchange" href="https://stackexchange.com/users/2122053/neo?tab=accounts" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-stack-exchange"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="stack-overflow" href="https://stackoverflow.com/users/1885105/neo" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-stack-overflow"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/neoalienson" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-github"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="linkedin" href="https://linkedin.com/in/neo01" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="rss" href="/atom.xml" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>
    <div class="widgets-container">
        
            
                <div class="widget-wrap widget-list">
    <h3 class="widget-title">links</h3>
    <div class="widget">
        <ul><li><a href="/ai">AI Playground</a></li><li><a href="/tools">Tools</a></li><li><a href="/games">Games</a></li><li><a href="/pages/useful-information">Useful Information</a></li><li><a href="/pages/Hexo-Blogging-Cheatsheet">Hexo Blogging Cheatsheet</a></li></ul>
    </div>
</div>

            
                
            
                    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                    <li>
                        <div class="item-thumbnail">
                            <a href="/2025/10/Tools-Games-And-Browser-Built-In-AI/" class="thumbnail">
        <span style="background-image:url(/2025/10/Tools-Games-And-Browser-Built-In-AI/thumbnail.jpeg)" alt="Tools, Games and Browser Built-in AI Playground" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/AI/">AI</a></p>
                            <p class="item-title"><a href="/2025/10/Tools-Games-And-Browser-Built-In-AI/" class="title">Tools, Games and Browser Built-in AI Playground</a></p>
                            <p class="item-date"><time datetime="2025-10-01T16:00:00.000Z" itemprop="datePublished">2025-10-02</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/2025/09/The_Rise_of_Agentic_Coding_AI_Powered_Software_Engineering/" class="thumbnail">
        <span style="background-image:url(/2025/09/The_Rise_of_Agentic_Coding_AI_Powered_Software_Engineering/thumbnail.jpeg)" alt="The Rise of Agentic Coding: AI-Powered Software Engineering" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/AI/">AI</a></p>
                            <p class="item-title"><a href="/2025/09/The_Rise_of_Agentic_Coding_AI_Powered_Software_Engineering/" class="title">The Rise of Agentic Coding: AI-Powered Software Engineering</a></p>
                            <p class="item-date"><time datetime="2025-09-19T16:00:00.000Z" itemprop="datePublished">2025-09-20</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/2025/08/Understanding_Ephemeral_Ports_Part2/" class="thumbnail">
        <span style="background-image:url(/2025/08/Understanding_Ephemeral_Ports_Part1/thumbnail.png)" alt="Understanding Ephemeral Ports Part 2: Why Server Applications Should Avoid Dynamic Ports" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p>
                            <p class="item-title"><a href="/2025/08/Understanding_Ephemeral_Ports_Part2/" class="title">Understanding Ephemeral Ports Part 2: Why Server Applications Should Avoid Dynamic Ports</a></p>
                            <p class="item-date"><time datetime="2025-08-30T16:00:00.000Z" itemprop="datePublished">2025-08-31</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/2025/08/Understanding_Ephemeral_Ports_Part1/" class="thumbnail">
        <span style="background-image:url(/2025/08/Understanding_Ephemeral_Ports_Part1/thumbnail.png)" alt="Understanding Ephemeral Ports: The Invisible Workers of Network Communication" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p>
                            <p class="item-title"><a href="/2025/08/Understanding_Ephemeral_Ports_Part1/" class="title">Understanding Ephemeral Ports: The Invisible Workers of Network Communication</a></p>
                            <p class="item-date"><time datetime="2025-08-29T16:00:00.000Z" itemprop="datePublished">2025-08-30</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/2025/07/Architecture_As_Code_Part_2_Building_the_Foundation/" class="thumbnail">
        <span style="background-image:url(/2025/07/Architecture_As_Code_Part_2_Building_the_Foundation/thumbnail.jpg)" alt="Architecture as Code: Part 2 - Building the Foundation" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Architecture/">Architecture</a></p>
                            <p class="item-title"><a href="/2025/07/Architecture_As_Code_Part_2_Building_the_Foundation/" class="title">Architecture as Code: Part 2 - Building the Foundation</a></p>
                            <p class="item-date"><time datetime="2025-07-19T16:00:00.000Z" itemprop="datePublished">2025-07-20</time></p>
                        </div>
                    </li>
            </ul>
        </div>
    </div>

            
                
    
    
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list">
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2025/">2025</a>
                    <span class="archive-list-count">11</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2024/">2024</a>
                    <span class="archive-list-count">24</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2023/">2023</a>
                    <span class="archive-list-count">15</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2022/">2022</a>
                    <span class="archive-list-count">4</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2020/">2020</a>
                    <span class="archive-list-count">12</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2019/">2019</a>
                    <span class="archive-list-count">12</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2018/">2018</a>
                    <span class="archive-list-count">2</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2017/">2017</a>
                    <span class="archive-list-count">5</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2016/">2016</a>
                    <span class="archive-list-count">4</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2015/">2015</a>
                    <span class="archive-list-count">6</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2014/">2014</a>
                    <span class="archive-list-count">7</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2013/">2013</a>
                    <span class="archive-list-count">2</span>
                </li>
            
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <!-- disable caching cause each page has different footer from qrcode -->
        <!-- common/footer, null, {cache: !config.relative_link})  -->
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="qrcode-share-wrapper">
                <div class="qrcode-text">https://neo01.com/l#0db63ec4</div>
                <img src="/qr/qr-1073730400d00213eefc1bd37e90b8e3.svg" width="200" height="200" alt="QR Code for https://neo01.com/l#0db63ec4">
            </div>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" title="Homepage" class="logo"></a>
                </h1>
                
                <p>¬© 2025 Neo Alienson. All rights reserved.
                  <a href="/terms-and-conditions">Terms and Conditions</a></p>
                
            </div>
            <div class="footer-plugins">
              


            </div>
        </div>
    </div>
</footer>

        
    
        


        


        


        


        


        


        


        


        


    



<!-- Custom Scripts -->




    </div>
<!-- hexo injector body_end start --><script type="text/javascript" src="/js/bundle_last.js"></script><!-- hexo injector body_end end -->

</body></html>