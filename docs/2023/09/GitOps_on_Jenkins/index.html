<!DOCTYPE html><html lang="en"><head><!-- hexo injector head_begin start --><!-- Google tag (gtag.js) begins-->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3DZR3TQYCY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-3DZR3TQYCY');
    </script>
    <!-- Google tag (gtag.js) ends-->
    <!-- hexo injector head_begin end -->
    <meta charset="utf-8">
    <!-- security headers starts -->
    <!-- meta http-equiv="content-security-policy" content="script-src 'sha256-B5nfCL2Dym3Ba4YJFI7wB3f4vtClbrYJZ32A5erBEdg=' 'sha256-lJjk3/dvd+wXqRFjV7T5L/nXJXr5NjUjmsKSPEe+ass=';" -->
    <!-- security headers ends -->
    <!-- favicon starts -->    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <!-- favicon ends -->
    

    
    <title>GitOps on Jenkins Pipelines | Decoding Digital Anomalies</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="keywords" content="GitOps,Groovy,Jenkins">
    
    
    <meta name="description" content="It's 3 AM and deployment failed? Just git revert and redeploy! Learn how to manage Jenkins pipelines as code using seeder scripts, with state management patterns and security best practices.">
<meta property="og:type" content="article">
<meta property="og:title" content="GitOps on Jenkins Pipelines">
<meta property="og:url" content="https://neo01.com/2023/09/GitOps_on_Jenkins/index.html">
<meta property="og:site_name" content="Decoding Digital Anomalies">
<meta property="og:description" content="It's 3 AM and deployment failed? Just git revert and redeploy! Learn how to manage Jenkins pipelines as code using seeder scripts, with state management patterns and security best practices.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://neo01.com/2023/09/GitOps_on_Jenkins/hero.png">
<meta property="article:published_time" content="2023-09-24T16:00:00.000Z">
<meta property="article:modified_time" content="2025-10-11T08:59:25.679Z">
<meta property="article:author" content="Neo Alienson">
<meta property="article:tag" content="GitOps">
<meta property="article:tag" content="Groovy">
<meta property="article:tag" content="Jenkins">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://neo01.com/2023/09/GitOps_on_Jenkins/hero.png">
    
            <link rel="alternate" href="/atom.xml" title="Decoding Digital Anomalies" type="application/atom+xml">
    

    

    

    

    

    

    

    
    
        


    
    
        


    

<!-- hexo injector head_end start --><link rel="stylesheet" type="text/css" href="/css/bundle.css"><script type="text/javascript" src="/js/bundle_first.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><style id="admonition-styles">.admonition {
  margin: 1em 0;
  padding: 0rem;
  border-left: 0.3rem solid;
  border-radius: 0.4rem;
  background-color: #f9f9f9;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
  overflow: hidden;
  page-break-inside: avoid;
}

.admonition-title {
  display: flex;
  align-items: center;
  font-weight: 600;
  padding: 0rem 1rem 0.1rem 0.75rem;
  font-size: 1.05em;
  background-color: rgba(0, 0, 0, 0.03);
  border-top-left-radius: 0.4rem;
  border-top-right-radius: 0.4rem;
  margin: 0 !important;
}

.admonition-icon {
  font-size: 1.2em;
  margin-right: 0.6rem;
  opacity: 0.85;
  margin-top: 0.1rem;
}

/* ÂÜÖÂÆπÂå∫Âüü margin */
.admonition > *:not(.admonition-title) {
  margin: 0.6rem 1rem 0.6rem 1rem;
}

/* NOTE Á±ªÂûã */
.admonition.anote {
  border-color: #448aff;
}
.admonition.anote > .admonition-title {
  background-color: #448aff1a;
  color: #2962ff;
}

/* INFO / TODO Á±ªÂûã */
.admonition.info,
.admonition.todo {
  border-color: #00b8d4;
}
.admonition.info > .admonition-title,
.admonition.todo > .admonition-title {
  background-color: rgba(0, 184, 212, 0.1);
  color: #007c91;
}

/* Ë≠¶ÂëäÁ±ª */
.admonition.warning,
.admonition.attention,
.admonition.caution {
  border-color: #ff9100;
}
.admonition.warning > .admonition-title,
.admonition.attention > .admonition-title,
.admonition.caution > .admonition-title {
  background-color: rgba(255, 145, 0, 0.1);
  color: #c66900;
}

/* ÈîôËØØÁ±ª */
.admonition.failure,
.admonition.missing,
.admonition.fail,
.admonition.error,
.admonition.danger,
.admonition.bug {
  border-color: #ff5252;
}
.admonition.failure > .admonition-title,
.admonition.missing > .admonition-title,
.admonition.fail > .admonition-title,
.admonition.error > .admonition-title,
.admonition.danger > .admonition-title,
.admonition.bug > .admonition-title {
  background-color: rgba(255, 82, 82, 0.1);
  color: #b71c1c;
}

/* TIP Á±ªÂûã */
.admonition.tip {
  border-color: #00bfa5;
}
.admonition.tip > .admonition-title {
  background-color: #00bfa51a;
  color: #00796b;
}

/* SUCCESS Á±ªÂûã */
.admonition.success {
  border-color: #00c853;
}
.admonition.success > .admonition-title {
  background-color: #00c8531a;
  color: #2e7d32;
}

/* QUESTION Á±ªÂûã */
.admonition.question {
  border-color: #64dd17;
}
.admonition.question > .admonition-title {
  background-color: #64dd171a;
  color: #558b2f;
}

/* EXAMPLE Á±ªÂûã */
.admonition.example {
  border-color: #7c4dff;
}
.admonition.example > .admonition-title {
  background-color: #7c4dff1a;
  color: #512da8;
}

/* QUOTE Á±ªÂûã */
.admonition.quote {
  border-color: #9e9e9e;
}
.admonition.quote > .admonition-title {
  background-color: #9e9e9e1a;
  color: #424242;
}

/*ÈªëÊöóÊ®°Âºè*/
/* Â§úÈó¥Ê®°ÂºèÂü∫Á°ÄÊ†∑Âºè */
[data-theme="dark"] .admonition {
  background-color: #1e1e1e;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
}

[data-theme="dark"] .admonition-title {
  background-color: rgba(255, 255, 255, 0.05);
}

/* anote */
[data-theme="dark"] .admonition.anote {
  border-color: #82b1ff;
}
[data-theme="dark"] .admonition.anote > .admonition-title {
  background-color: #82b1ff1a;
  color: #bbdefb;
}

/* tip */
[data-theme="dark"] .admonition.tip {
  border-color: #64ffda;
}
[data-theme="dark"] .admonition.tip > .admonition-title {
  background-color: #64ffda1a;
  color: #1de9b6;
}

/* success */
[data-theme="dark"] .admonition.success {
  border-color: #69f0ae;
}
[data-theme="dark"] .admonition.success > .admonition-title {
  background-color: #69f0ae1a;
  color: #00e676;
}

/* question */
[data-theme="dark"] .admonition.question {
  border-color: #b2ff59;
}
[data-theme="dark"] .admonition.question > .admonition-title {
  background-color: #b2ff591a;
  color: #aeea00;
}

/* example */
[data-theme="dark"] .admonition.example {
  border-color: #b388ff;
}
[data-theme="dark"] .admonition.example > .admonition-title {
  background-color: #b388ff1a;
  color: #b39ddb;
}

/* quote */
[data-theme="dark"] .admonition.quote {
  border-color: #bdbdbd;
}
[data-theme="dark"] .admonition.quote > .admonition-title {
  background-color: #bdbdbd1a;
  color: #eeeeee;
}

/* warning / attention / caution */
[data-theme="dark"] .admonition.warning,
[data-theme="dark"] .admonition.attention,
[data-theme="dark"] .admonition.caution {
  border-color: #ffb300;
}
[data-theme="dark"] .admonition.warning > .admonition-title,
[data-theme="dark"] .admonition.attention > .admonition-title,
[data-theme="dark"] .admonition.caution > .admonition-title {
  background-color: #ffb3001a;
  color: #ffe082;
}

/* error / fail / failure / bug / danger / missing */
[data-theme="dark"] .admonition.error,
[data-theme="dark"] .admonition.fail,
[data-theme="dark"] .admonition.failure,
[data-theme="dark"] .admonition.bug,
[data-theme="dark"] .admonition.missing,
[data-theme="dark"] .admonition.danger {
  border-color: #ef5350;
}
[data-theme="dark"] .admonition.error > .admonition-title,
[data-theme="dark"] .admonition.fail > .admonition-title,
[data-theme="dark"] .admonition.failure > .admonition-title,
[data-theme="dark"] .admonition.bug > .admonition-title,
[data-theme="dark"] .admonition.missing > .admonition-title,
[data-theme="dark"] .admonition.danger > .admonition-title {
  background-color: #ef53501a;
  color: #ff8a80;
}</style><script id="mermaid-scripts" src="/cache/mermaid.min.local.js"></script>
<script>mermaid.initialize({theme: 'default'});</script></head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" title="Homepage" class="logo"></a>
                    </h1>
                        <h2 class="subtitle-wrap">
                            <p class="title">Decoding Digital Anomalies</p>
                          <p class="subtitle">Sometimes the feature is the bug in the digital rabbit hole, and vice versa</p>
                        </h2>
                    <div id="lang-selector">
                        <span class="lang-icon">üåê</span>
                        
                            <a href="/zh-TW/2023/09/GitOps_on_Jenkins/" class="lang-link">ÁπÅÈ´î‰∏≠Êñá</a>
<span class="lang-sep">|</span>                            <a href="/zh-CN/2023/09/GitOps_on_Jenkins/" class="lang-link">ÁÆÄ‰Ωì‰∏≠Êñá</a>
                    </div>
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                                                                    <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AI/">AI</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AI/Art-Gallery/">Art Gallery</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Architecture/">Architecture</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Cybersecurity/">Cybersecurity</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Development/">Development</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Misc/">Misc</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/%E5%BC%80%E5%8F%91/">ÂºÄÂèë</a></li></ul>
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/about-me">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" id="search-form-input" placeholder="Search">
        <button type="submit" title="Search" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" id="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script integrity="sha256-B5nfCL2Dym3Ba4YJFI7wB3f4vtClbrYJZ32A5erBEdg=">
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
        LANG: 'en',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>




</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Development/">Development</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-2023/09/GitOps_on_Jenkins" class="article article-single article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner responsive-content">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        GitOps on Jenkins Pipelines
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
      <i class="fa fa-calendar"></i>
        
          Created <time datetime="2023-09-24T16:00:00.000Z" itemprop="datePublished">2023-09-25</time>
          &nbsp;<i class="fa fa-calendar"></i>
          Updated <time datetime="2025-10-11T08:59:25.679Z" itemprop="datePublished">2025-10-11</time>
        
    </div>


                

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/GitOps/">GitOps</a> <a class="tag-link" href="/tags/Jenkins/">Jenkins</a> <a class="tag-link" href="/tags/Groovy/">Groovy</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-GitOps"><span class="toc-text">What is GitOps?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GitOps-for-Jenkins-Pipelines"><span class="toc-text">GitOps for Jenkins Pipelines</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Beyond-Jenkins-GitOps-Everywhere"><span class="toc-text">Beyond Jenkins: GitOps Everywhere</span></a></li></ol>
            <p><img src="hero.png" alt=""></p>
<h2 id="What-is-GitOps">What is GitOps?</h2>
<p>Picture this: It‚Äôs 3 AM, and a deployment went wrong. Instead of frantically clicking through Jenkins UI trying to remember what you changed, you simply run <code>git revert</code> and redeploy. That‚Äôs the power of GitOps.</p>
<p>GitOps means managing your entire infrastructure like you manage code in Git ‚Äì every change tracked, every deployment reproducible, every rollback just a commit away.</p>
<p>GitOps is a way of managing your infrastructure and applications using Git as the single source of truth. It lets you define your desired state in code, and then use tools to apply that state to your environments. GitOps enables continuous delivery, as any change in your Git repository triggers a pipeline that deploys the new version of your code.</p>
<div class="mermaid">graph LR
    A([Developer]) --&gt;|Commits| B[(Git Repository)]
    B --&gt;|Triggers| C[CI/CD Pipeline]
    E[(Object Store)] --&gt;|Reads State| C
    C --&gt;|Deploys| D[Infrastructure]
    D --&gt;|Writes State| E
    
    style B fill:#87CEEB
    style C fill:#90EE90
    style D fill:#FFD700
    style E fill:#FFA07A</div>
<h2 id="GitOps-for-Jenkins-Pipelines">GitOps for Jenkins Pipelines</h2>
<p>In the context of Jenkins pipelines, GitOps can be used to manage pipelines by treating the pipeline configuration as code, and using Git to manage changes to that code. This allows developers to version control their pipeline configurations, collaborate on changes with other team members, and easily roll back changes if necessary.</p>
<p>Think of it this way: instead of manually clicking through Jenkins UI to create and configure pipelines, you write code that describes what pipelines you want, commit it to Git, and let automation create them for you.</p>
<h3 id="Managing-Jenkins-Pipelines-with-Seeder-Scripts">Managing Jenkins Pipelines with Seeder Scripts</h3>
<p>A seeder script is a script to create and maintain your pipelines on Jenkins. It is usually written in Groovy scripts.</p>
<p>Here is an example of a seeder script that creates pipelines in Jenkins. The script uses the Job DSL plugin to define the pipeline jobs in a declarative way. The script loops through a list of repositories and creates a pipeline job for each one. The details of the steps of each pipeline are referenced from the Jenkinsfile in their own repository.</p>
<pre class="language-groovy" data-language="groovy" data-line="" data-line-offset="0"><code class="language-groovy">// Define the list of repositories
def repositories = ['repo1', 'repo2', 'repo3']

// Loop through the list and create a pipeline job for each one
repositories.each { repo -&gt;
  pipelineJob("${repo}-pipeline") {
    // Use the SCM trigger to run the job when there is a change in the repository
    triggers {
      scm('H/5 * * * *')
    }
    // Define the pipeline script path as Jenkinsfile in the root of the repository
    definition {
      cpsScm {
        scm {
          git {
            remote {
              url("https://github.com/${repo}.git")
            }
            branch('master')
          }
        }
        scriptPath('Jenkinsfile')
      }
    }
  }
}</code></pre>
<p>Three pipelines might not seem impressive. But consider creating pipelines for multiple environments ‚Äì this is where seeder scripts truly shine:</p>
<pre class="language-groovy" data-language="groovy" data-line="" data-line-offset="0"><code class="language-groovy">// Define a list of repositories and environments
def repositories = ['repo1', 'repo2', 'repo3']
def environments = ['dev', 'test', 'prod']

// Loop through the list and create a pipeline for each combination
for (repo in repositories) {
  for (env in environments) {
    // Define the pipeline name and description
    def pipelineName = "${repo}-${env}"
    def pipelineDesc = "Pipeline for ${repo} in ${env} environment"

    // Create a pipeline job using the DSL plugin
    pipelineJob(pipelineName) {
      description(pipelineDesc)
      // Use the Jenkinsfile from the repo as the source of the pipeline definition
      definition {
        cpsScm {
          scm {
            git {
              remote {
                url("https://github.com/${repo}.git")
              }
              branch('master')
            }
          }
          // Specify the path to the Jenkinsfile in the repo
          scriptPath("Jenkinsfile-${env}")
        }
      }
    }
  }
}</code></pre>
<p>While seeder scripts can be used to define detailed steps in your pipeline, it‚Äôs important to keep these scripts simple and focused on managing the pipeline. Keeping seeder scripts simple makes it easier to maintain and collaborate with other team members.</p>
<div class="admonition tip"><p class="admonition-title"><span class="mdi mdi-lightbulb-on-outline admonition-icon"></span>üí° Best Practice</p><div class="admonition-content"><p>Keep your seeder scripts focused on pipeline structure and configuration. Store the actual pipeline logic in Jenkinsfiles within each repository. This separation of concerns makes both easier to maintain.</p>
</div></div>
<h3 id="Benefits-of-Using-GitOps-with-Seeder-Scripts">Benefits of Using GitOps with Seeder Scripts</h3>
<p>Using seeder scripts can bring several benefits, including:</p>
<ul>
<li><strong>Automation</strong>: You can automate the creation and update of Jenkins pipelines based on the changes in your Git repository. This reduces manual errors and saves time and effort.</li>
<li><strong>Immutability</strong>: You can keep your Jenkins pipelines immutable, meaning that they are not modified manually after they are created. This ensures consistency and reliability across different environments and stages.</li>
<li><strong>Versioning</strong>: You can track the history and changes of your Jenkins pipelines using Git commits and branches. This enables you to roll back to previous versions, compare different versions, and audit the changes.</li>
<li><strong>Collaboration</strong>: You can collaborate with other developers and teams on your Jenkins pipelines using Git features such as pull requests, code reviews, and merge conflicts. This improves the quality and security of your pipelines.</li>
<li><strong>Recovery</strong>: If Jenkins is corrupted or deleted by accident, you can use the seeder job to redeploy the pipelines from the Git repository.</li>
<li><strong>Portability</strong>: You can use GitOps to create the same set of pipelines on another Jenkins server. This is especially useful when you would like to test your pipelines with Jenkins/plugin upgrades.</li>
</ul>
<h3 id="Advanced-Patterns-Dynamic-Pipeline-Generation">Advanced Patterns: Dynamic Pipeline Generation</h3>
<p>As your organization grows, you might need more sophisticated patterns. Here‚Äôs an example that reads pipeline configurations from a YAML file:</p>
<pre class="language-groovy" data-language="groovy" data-line="" data-line-offset="0"><code class="language-groovy">// Read pipeline configurations from a YAML file in the repository
import org.yaml.snakeyaml.Yaml

def yaml = new Yaml()
def config = yaml.load(readFileFromWorkspace('pipelines.yaml'))

// Create pipelines based on the configuration
config.pipelines.each { pipeline -&gt;
  pipelineJob(pipeline.name) {
    description(pipeline.description)
    
    // Set up parameters if defined
    if (pipeline.parameters) {
      parameters {
        pipeline.parameters.each { param -&gt;
          stringParam(param.name, param.defaultValue, param.description)
        }
      }
    }
    
    definition {
      cpsScm {
        scm {
          git {
            remote {
              url(pipeline.repository)
              credentials(pipeline.credentials)
            }
            branch(pipeline.branch ?: 'main')
          }
        }
        scriptPath(pipeline.jenkinsfile ?: 'Jenkinsfile')
      }
    }
  }
}</code></pre>
<p>With a corresponding <code>pipelines.yaml</code>:</p>
<pre class="language-yaml" data-language="yaml" data-line="" data-line-offset="0"><code class="language-yaml">pipelines:
  - name: microservice-api-prod
    description: Production deployment for API service
    repository: https://github.com/company/api-service.git
    branch: main
    jenkinsfile: deploy/Jenkinsfile.prod
    credentials: github-token
    parameters:
      - name: VERSION
        defaultValue: latest
        description: Version to deploy
      - name: ENVIRONMENT
        defaultValue: production
        description: Target environment</code></pre>
<h3 id="Challenges-and-Solutions">Challenges and Solutions</h3>
<p>However, there are also some challenges that you need to take care of when using GitOps to generate Jenkins pipelines.</p>
<div class="admonition warning"><p class="admonition-title"><span class="mdi mdi-alert-outline admonition-icon"></span>‚ö†Ô∏è Pipeline Deletion and Audit Logs</p><div class="admonition-content"><p>When you use GitOps to generate Jenkins pipelines, you may also use GitOps to destroy them when they are no longer needed. However, this may cause problems if you need to keep the output from pipeline executions (console logs) for auditing or troubleshooting purposes.</p>
</div></div>
<p><strong>Solutions to consider:</strong></p>
<ol>
<li><strong>External Log Storage</strong>: Use a separate storage system like Elasticsearch, CloudWatch, or S3 to archive logs before pipeline deletion</li>
<li><strong>Soft Deletion</strong>: Mark pipelines as deprecated rather than deleting them immediately</li>
<li><strong>Retention Policies</strong>: Implement automated archival with configurable retention periods</li>
</ol>
<pre class="language-groovy" data-language="groovy" data-line="" data-line-offset="0"><code class="language-groovy">// Example: Archive logs before deletion
def archivePipelineLogs(pipelineName) {
  def builds = Jenkins.instance.getItemByFullName(pipelineName).builds
  builds.each { build -&gt;
    // Archive to S3 or external storage
    archiveToS3(build.logFile, "jenkins-logs/${pipelineName}/${build.number}")
  }
}</code></pre>
<h3 id="Security-Considerations">Security Considerations</h3>
<div class="admonition danger"><p class="admonition-title"><span class="mdi mdi-alert-circle-outline admonition-icon"></span>üîí Security Best Practices</p><div class="admonition-content"><p>GitOps introduces new security considerations since your pipeline configurations are stored in Git.</p>
</div></div>
<p><strong>Key security practices:</strong></p>
<ul>
<li><strong>Credential Management</strong>: Never store credentials in seeder scripts. Use Jenkins Credentials Plugin and reference them by ID</li>
<li><strong>Access Control</strong>: Implement branch protection and require code reviews for seeder script changes</li>
<li><strong>Audit Trail</strong>: Enable Git commit signing to verify the authenticity of changes</li>
<li><strong>Least Privilege</strong>: Grant seeder jobs only the permissions needed to create/update pipelines</li>
</ul>
<pre class="language-groovy" data-language="groovy" data-line="" data-line-offset="0"><code class="language-groovy">// Good: Reference credentials by ID
credentials('github-api-token')

// Bad: Never do this!
// credentials('username', 'hardcoded-password')</code></pre>
<h3 id="Testing-Your-Seeder-Scripts">Testing Your Seeder Scripts</h3>
<p>Before deploying seeder scripts to production Jenkins, test them in a sandbox environment:</p>
<pre class="language-groovy" data-language="groovy" data-line="" data-line-offset="0"><code class="language-groovy">// Add a dry-run mode to your seeder script
def dryRun = System.getenv('DRY_RUN') == 'true'

repositories.each { repo -&gt;
  if (dryRun) {
    println "Would create pipeline: ${repo}-pipeline"
  } else {
    pipelineJob("${repo}-pipeline") {
      // ... actual pipeline creation
    }
  }
}</code></pre>
<h3 id="Monitoring-and-Observability">Monitoring and Observability</h3>
<p>Track the health of your GitOps-managed pipelines:</p>
<ul>
<li><strong>Pipeline Creation Metrics</strong>: Monitor how many pipelines are created/updated/deleted</li>
<li><strong>Sync Status</strong>: Ensure Git state matches Jenkins state</li>
<li><strong>Failure Alerts</strong>: Get notified when seeder jobs fail</li>
</ul>
<div class="mermaid">graph TD
    A[Git Commit] --&gt;|Webhook| B[Seeder Job]
    B --&gt;|Success| C[Update Metrics]
    B --&gt;|Failure| D[Send Alert]
    C --&gt; E[Dashboard]
    D --&gt; F[Ops Team]
    E --&gt; G{Drift Detected?}
    G --&gt;|Yes| H[Reconciliation]
    G --&gt;|No| I[Healthy State]
    
    style B fill:#87CEEB
    style C fill:#90EE90
    style D fill:#FFB6C6</div>
<h3 id="State-Management-Patterns">State Management Patterns</h3>
<p>As your GitOps implementation matures, you‚Äôll need to decide how to handle state ‚Äì the record of what‚Äôs actually deployed versus what‚Äôs defined in Git.</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>üì¶ State Sync: Object Store vs Git Versioning</p><div class="admonition-content"><p>While GitOps traditionally uses Git for state management, some teams store state in object stores (S3, Azure Blob) instead of versioning it in Git.</p>
<p><strong>Why use object stores for state?</strong></p>
<ul>
<li><strong>Size Limitations</strong>: Terraform state files or large configuration outputs can bloat Git repositories, making clones slow and history unwieldy</li>
<li><strong>Binary Data</strong>: State files often contain binary or frequently-changing data that doesn't benefit from Git's diff capabilities</li>
<li><strong>Concurrency</strong>: Object stores with locking mechanisms (like S3 + DynamoDB) prevent concurrent modifications better than Git merge conflicts</li>
<li><strong>Performance</strong>: Reading/writing large state files is faster with object stores than Git operations</li>
<li><strong>Separation of Concerns</strong>: Configuration (Git) vs runtime state (object store) are fundamentally different - one is intent, the other is reality</li>
</ul>
<p>Think of it like building plans vs inspection reports: you version control the blueprints (Git), but store the inspection results in a filing cabinet (object store).</p>
</div></div>
<p>While we‚Äôve focused on Jenkins, the same state management principles apply to other infrastructure tools. Let‚Äôs look at how Terraform handles this:</p>
<h4 id="State-Management-Example-Terraform-with-S3-Backend">State Management Example: Terraform with S3 Backend</h4>
<p>Tools like Terraform natively support storing state in object stores. Here‚Äôs how you configure Terraform to use S3 for state while keeping your infrastructure code in Git:</p>
<pre class="language-hcl" data-language="hcl" data-line="" data-line-offset="0"><code class="language-hcl"># backend.tf - Stored in Git
terraform {
  backend "s3" {
    bucket         = "company-terraform-state"
    key            = "jenkins/terraform.tfstate"
    region         = "us-east-1"
    dynamodb_table = "terraform-locks"
    encrypt        = true
  }
}</code></pre>
<pre class="language-hcl" data-language="hcl" data-line="" data-line-offset="0"><code class="language-hcl"># main.tf - Infrastructure code in Git
resource "aws_instance" "jenkins" {
  ami           = "ami-12345678"
  instance_type = "t3.medium"
  
  tags = {
    Name = "Jenkins-Server"
  }
}</code></pre>
<p>In this setup:</p>
<ul>
<li><strong>Git stores</strong>: Infrastructure code (what you want)</li>
<li><strong>S3 stores</strong>: State file (what you have)</li>
<li><strong>DynamoDB</strong>: Provides state locking to prevent concurrent modifications</li>
</ul>
<h3 id="Real-World-Example-Multi-Team-Pipeline-Management">Real-World Example: Multi-Team Pipeline Management</h3>
<p>In large organizations, different teams may need different pipeline patterns:</p>
<pre class="language-groovy" data-language="groovy" data-line="" data-line-offset="0"><code class="language-groovy">// Team-specific pipeline templates
def teamConfigs = [
  'backend': [
    jenkinsfile: 'ci/Jenkinsfile.backend',
    agents: ['docker'],
    stages: ['build', 'test', 'security-scan', 'deploy']
  ],
  'frontend': [
    jenkinsfile: 'ci/Jenkinsfile.frontend',
    agents: ['nodejs'],
    stages: ['build', 'test', 'e2e', 'deploy']
  ],
  'data': [
    jenkinsfile: 'ci/Jenkinsfile.data',
    agents: ['python'],
    stages: ['validate', 'test', 'deploy']
  ]
]

// Read team repositories from configuration
def repositories = readJSON(file: 'team-repos.json')

repositories.each { repo -&gt;
  def teamConfig = teamConfigs[repo.team]
  
  pipelineJob("${repo.team}-${repo.name}") {
    description("${repo.team} team pipeline for ${repo.name}")
    
    definition {
      cpsScm {
        scm {
          git {
            remote {
              url(repo.url)
              credentials("${repo.team}-github-token")
            }
            branch(repo.branch ?: 'main')
          }
        }
        scriptPath(teamConfig.jenkinsfile)
      }
    }
    
    // Team-specific configurations
    properties {
      pipelineTriggers {
        triggers {
          githubPush()
        }
      }
    }
  }
}</code></pre>
<h2 id="Beyond-Jenkins-GitOps-Everywhere">Beyond Jenkins: GitOps Everywhere</h2>
<p>GitOps is a concept that you can apply to automate everything Ops by using Git as a single source of truth. Jenkins is just one of the applications. The same principles apply to:</p>
<ul>
<li><strong>Infrastructure as Code</strong>: Terraform, CloudFormation, Pulumi</li>
<li><strong>Kubernetes</strong>: ArgoCD, Flux for cluster management</li>
<li><strong>Configuration Management</strong>: Ansible, Chef, Puppet</li>
<li><strong>Monitoring</strong>: Grafana dashboards, Prometheus rules</li>
</ul>
<div class="admonition success"><p class="admonition-title"><span class="mdi mdi-check-circle-outline admonition-icon"></span>‚ú® Key Takeaway</p><div class="admonition-content"><p>GitOps transforms operations from manual, error-prone processes into automated, auditable, and reproducible workflows. By treating everything as code and using Git as the source of truth, you gain version control, collaboration, and reliability for your entire infrastructure.</p>
</div></div>
<div class="admonition tip"><p class="admonition-title"><span class="mdi mdi-lightbulb-on-outline admonition-icon"></span>üöÄ Getting Started</p><div class="admonition-content"><p>Ready to implement GitOps for your Jenkins pipelines?</p>
<ol>
<li><strong>Start small</strong>: Convert one manual pipeline to a seeder script</li>
<li><strong>Test in sandbox</strong>: Use a non-production Jenkins instance first</li>
<li><strong>Expand gradually</strong>: Add more pipelines once you're comfortable</li>
<li><strong>Add observability</strong>: Implement monitoring and alerting once stable</li>
<li><strong>Document patterns</strong>: Create templates for your team to follow</li>
</ol>
</div></div>

        </div>
        <footer class="article-footer">
            
    <a data-url="https://neo01.com/2023/09/GitOps_on_Jenkins/" data-id="19d0a150" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url').replace("http://","https://"),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <!--script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "Neo Alienson"
        },
        "headline": "GitOps on Jenkins Pipelines",
        "image": "https://neo01.comhero.png",
        "keywords": "GitOps Groovy Jenkins",
        "genre": "Development",
        "datePublished": "2023-09-25",
        "dateCreated": "2023-09-25",
        "dateModified": "2025-10-11",
        "url": "https://neo01.com/2023/09/GitOps_on_Jenkins/",
        "description": "It's 3 AM and deployment failed? Just git revert and redeploy! Learn how to manage Jenkins pipelines as code using seeder scripts, with state management patterns and security best practices.",
        "wordCount": 2804
    }
</script-->

</article>

                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
                <li>
                    <a class="social-tooltip" title="stack-exchange" href="https://stackexchange.com/users/2122053/neo?tab=accounts" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-stack-exchange"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="stack-overflow" href="https://stackoverflow.com/users/1885105/neo" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-stack-overflow"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/neoalienson" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-github"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="linkedin" href="https://linkedin.com/in/neo01" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="rss" href="/atom.xml" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>
    <div class="widgets-container">
        
            
                <div class="widget-wrap widget-list">
    <h3 class="widget-title">links</h3>
    <div class="widget">
        <ul><li><a href="/ai">AI Playground</a></li><li><a href="/tools">Tools</a></li><li><a href="/games">Games</a></li><li><a href="/pages/useful-information">Useful Information</a></li><li><a href="/pages/Hexo-Blogging-Cheatsheet">Hexo Blogging Cheatsheet</a></li></ul>
    </div>
</div>

            
                
            
                    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                    <li>
                        <div class="item-thumbnail">
                            <a href="/2025/10/Tools-Games-And-Browser-Built-In-AI/" class="thumbnail">
        <span style="background-image:url(/2025/10/Tools-Games-And-Browser-Built-In-AI/thumbnail.jpeg)" alt="Tools, Games and Browser Built-in AI Playground" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/AI/">AI</a></p>
                            <p class="item-title"><a href="/2025/10/Tools-Games-And-Browser-Built-In-AI/" class="title">Tools, Games and Browser Built-in AI Playground</a></p>
                            <p class="item-date"><time datetime="2025-10-01T16:00:00.000Z" itemprop="datePublished">2025-10-02</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/2025/09/The_Rise_of_Agentic_Coding_AI_Powered_Software_Engineering/" class="thumbnail">
        <span style="background-image:url(/2025/09/The_Rise_of_Agentic_Coding_AI_Powered_Software_Engineering/thumbnail.jpeg)" alt="The Rise of Agentic Coding: AI-Powered Software Engineering" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/AI/">AI</a></p>
                            <p class="item-title"><a href="/2025/09/The_Rise_of_Agentic_Coding_AI_Powered_Software_Engineering/" class="title">The Rise of Agentic Coding: AI-Powered Software Engineering</a></p>
                            <p class="item-date"><time datetime="2025-09-19T16:00:00.000Z" itemprop="datePublished">2025-09-20</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/2025/08/Understanding_Ephemeral_Ports_Part2/" class="thumbnail">
        <span style="background-image:url(/2025/08/Understanding_Ephemeral_Ports_Part1/thumbnail.png)" alt="Understanding Ephemeral Ports Part 2: Why Server Applications Should Avoid Dynamic Ports" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p>
                            <p class="item-title"><a href="/2025/08/Understanding_Ephemeral_Ports_Part2/" class="title">Understanding Ephemeral Ports Part 2: Why Server Applications Should Avoid Dynamic Ports</a></p>
                            <p class="item-date"><time datetime="2025-08-30T16:00:00.000Z" itemprop="datePublished">2025-08-31</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/2025/08/Understanding_Ephemeral_Ports_Part1/" class="thumbnail">
        <span style="background-image:url(/2025/08/Understanding_Ephemeral_Ports_Part1/thumbnail.png)" alt="Understanding Ephemeral Ports: The Invisible Workers of Network Communication" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p>
                            <p class="item-title"><a href="/2025/08/Understanding_Ephemeral_Ports_Part1/" class="title">Understanding Ephemeral Ports: The Invisible Workers of Network Communication</a></p>
                            <p class="item-date"><time datetime="2025-08-29T16:00:00.000Z" itemprop="datePublished">2025-08-30</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/2025/07/Architecture_As_Code_Part_2_Building_the_Foundation/" class="thumbnail">
        <span style="background-image:url(/2025/07/Architecture_As_Code_Part_2_Building_the_Foundation/thumbnail.jpg)" alt="Architecture as Code: Part 2 - Building the Foundation" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Architecture/">Architecture</a></p>
                            <p class="item-title"><a href="/2025/07/Architecture_As_Code_Part_2_Building_the_Foundation/" class="title">Architecture as Code: Part 2 - Building the Foundation</a></p>
                            <p class="item-date"><time datetime="2025-07-19T16:00:00.000Z" itemprop="datePublished">2025-07-20</time></p>
                        </div>
                    </li>
            </ul>
        </div>
    </div>

            
                
    
    
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list">
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2025/">2025</a>
                    <span class="archive-list-count">11</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2024/">2024</a>
                    <span class="archive-list-count">24</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2023/">2023</a>
                    <span class="archive-list-count">15</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2022/">2022</a>
                    <span class="archive-list-count">4</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2020/">2020</a>
                    <span class="archive-list-count">9</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2019/">2019</a>
                    <span class="archive-list-count">12</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2018/">2018</a>
                    <span class="archive-list-count">2</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2017/">2017</a>
                    <span class="archive-list-count">5</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2016/">2016</a>
                    <span class="archive-list-count">4</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2015/">2015</a>
                    <span class="archive-list-count">6</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2014/">2014</a>
                    <span class="archive-list-count">7</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2013/">2013</a>
                    <span class="archive-list-count">2</span>
                </li>
            
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <!-- disable caching cause each page has different footer from qrcode -->
        <!-- common/footer, null, {cache: !config.relative_link})  -->
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="qrcode-share-wrapper">
                <div class="qrcode-text">https://neo01.com/l#684c2a3a</div>
                <img src="/qr/qr-e6e740cda97d41d1819acc060c6550dc.svg" width="200" height="200" alt="QR Code for https://neo01.com/l#684c2a3a">
            </div>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" title="Homepage" class="logo"></a>
                </h1>
                
                <p>¬© 2025 Neo Alienson. All rights reserved.
                  <a href="/terms-and-conditions">Terms and Conditions</a></p>
                
            </div>
            <div class="footer-plugins">
              


            </div>
        </div>
    </div>
</footer>

        
    
        


        


        


        


        


        


        


        


        


    



<!-- Custom Scripts -->




    </div>
<!-- hexo injector body_end start --><script type="text/javascript" src="/js/bundle_last.js"></script><!-- hexo injector body_end end -->

</body></html>