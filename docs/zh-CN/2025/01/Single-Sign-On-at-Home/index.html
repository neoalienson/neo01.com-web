<!DOCTYPE html><html lang="zh-CN"><head><!-- hexo injector head_begin start --><!-- Google tag (gtag.js) begins-->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3DZR3TQYCY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-3DZR3TQYCY');
    </script>
    <!-- Google tag (gtag.js) ends-->
    <!-- hexo injector head_begin end -->
    <meta charset="utf-8">
    <!-- security headers starts -->
    <!-- meta http-equiv="content-security-policy" content="script-src 'sha256-B5nfCL2Dym3Ba4YJFI7wB3f4vtClbrYJZ32A5erBEdg=' 'sha256-lJjk3/dvd+wXqRFjV7T5L/nXJXr5NjUjmsKSPEe+ass=';" -->
    <!-- security headers ends -->
    <!-- favicon starts -->    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <!-- favicon ends -->
    

    
    <title>åœ¨å®¶ä¸­å»ºç«‹å•ç‚¹ç™»å½•ç³»ç»Ÿ | Decoding Digital Anomalies</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="keywords" content="Authentication,Cybersecurity,Homelab">
    
    
    <meta name="description" content="åŒå€¦äº†ç®¡ç†å®¶åº­å®éªŒå®¤æœåŠ¡çš„æ•°åä¸ªå¯†ç ï¼Ÿå­¦ä¹ å¦‚ä½•å»ºç«‹å•ç‚¹ç™»å½•ç³»ç»Ÿï¼Œåªéœ€ä¸€æ¬¡ç™»å½•å³å¯è®¿é—®æ‰€æœ‰æœåŠ¡ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="åœ¨å®¶ä¸­å»ºç«‹å•ç‚¹ç™»å½•ç³»ç»Ÿ">
<meta property="og:url" content="https://neo01.com/zh-CN/2025/01/Single-Sign-On-at-Home/index.html">
<meta property="og:site_name" content="Decoding Digital Anomalies">
<meta property="og:description" content="åŒå€¦äº†ç®¡ç†å®¶åº­å®éªŒå®¤æœåŠ¡çš„æ•°åä¸ªå¯†ç ï¼Ÿå­¦ä¹ å¦‚ä½•å»ºç«‹å•ç‚¹ç™»å½•ç³»ç»Ÿï¼Œåªéœ€ä¸€æ¬¡ç™»å½•å³å¯è®¿é—®æ‰€æœ‰æœåŠ¡ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-01-14T16:00:00.000Z">
<meta property="article:modified_time" content="2025-10-23T14:57:12.779Z">
<meta property="article:author" content="Neo Alienson">
<meta property="article:tag" content="Authentication">
<meta property="article:tag" content="Cybersecurity">
<meta property="article:tag" content="Homelab">
<meta name="twitter:card" content="summary">
    
            <link rel="alternate" href="/atom.xml" title="Decoding Digital Anomalies" type="application/atom+xml">
    

    

    

    

    

    

    

    
    
        


    
    
        


    

<!-- hexo injector head_end start --><link rel="stylesheet" type="text/css" href="/css/bundle.css"><script type="text/javascript" src="/js/bundle_first.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><style id="admonition-styles">.admonition {
  margin: 1em 0;
  padding: 0rem;
  border-left: 0.3rem solid;
  border-radius: 0.4rem;
  background-color: #f9f9f9;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
  overflow: hidden;
  page-break-inside: avoid;
}

.admonition-title {
  display: flex;
  align-items: center;
  font-weight: 600;
  padding: 0rem 1rem 0.1rem 0.75rem;
  font-size: 1.05em;
  background-color: rgba(0, 0, 0, 0.03);
  border-top-left-radius: 0.4rem;
  border-top-right-radius: 0.4rem;
  margin: 0 !important;
}

.admonition-icon {
  font-size: 1.2em;
  margin-right: 0.6rem;
  opacity: 0.85;
  margin-top: 0.1rem;
}

/* å†…å®¹åŒºåŸŸ margin */
.admonition > *:not(.admonition-title) {
  margin: 0.6rem 1rem 0.6rem 1rem;
}

/* NOTE ç±»å‹ */
.admonition.anote {
  border-color: #448aff;
}
.admonition.anote > .admonition-title {
  background-color: #448aff1a;
  color: #2962ff;
}

/* INFO / TODO ç±»å‹ */
.admonition.info,
.admonition.todo {
  border-color: #00b8d4;
}
.admonition.info > .admonition-title,
.admonition.todo > .admonition-title {
  background-color: rgba(0, 184, 212, 0.1);
  color: #007c91;
}

/* è­¦å‘Šç±» */
.admonition.warning,
.admonition.attention,
.admonition.caution {
  border-color: #ff9100;
}
.admonition.warning > .admonition-title,
.admonition.attention > .admonition-title,
.admonition.caution > .admonition-title {
  background-color: rgba(255, 145, 0, 0.1);
  color: #c66900;
}

/* é”™è¯¯ç±» */
.admonition.failure,
.admonition.missing,
.admonition.fail,
.admonition.error,
.admonition.danger,
.admonition.bug {
  border-color: #ff5252;
}
.admonition.failure > .admonition-title,
.admonition.missing > .admonition-title,
.admonition.fail > .admonition-title,
.admonition.error > .admonition-title,
.admonition.danger > .admonition-title,
.admonition.bug > .admonition-title {
  background-color: rgba(255, 82, 82, 0.1);
  color: #b71c1c;
}

/* TIP ç±»å‹ */
.admonition.tip {
  border-color: #00bfa5;
}
.admonition.tip > .admonition-title {
  background-color: #00bfa51a;
  color: #00796b;
}

/* SUCCESS ç±»å‹ */
.admonition.success {
  border-color: #00c853;
}
.admonition.success > .admonition-title {
  background-color: #00c8531a;
  color: #2e7d32;
}

/* QUESTION ç±»å‹ */
.admonition.question {
  border-color: #64dd17;
}
.admonition.question > .admonition-title {
  background-color: #64dd171a;
  color: #558b2f;
}

/* EXAMPLE ç±»å‹ */
.admonition.example {
  border-color: #7c4dff;
}
.admonition.example > .admonition-title {
  background-color: #7c4dff1a;
  color: #512da8;
}

/* QUOTE ç±»å‹ */
.admonition.quote {
  border-color: #9e9e9e;
}
.admonition.quote > .admonition-title {
  background-color: #9e9e9e1a;
  color: #424242;
}

/*é»‘æš—æ¨¡å¼*/
/* å¤œé—´æ¨¡å¼åŸºç¡€æ ·å¼ */
[data-theme="dark"] .admonition {
  background-color: #1e1e1e;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
}

[data-theme="dark"] .admonition-title {
  background-color: rgba(255, 255, 255, 0.05);
}

/* anote */
[data-theme="dark"] .admonition.anote {
  border-color: #82b1ff;
}
[data-theme="dark"] .admonition.anote > .admonition-title {
  background-color: #82b1ff1a;
  color: #bbdefb;
}

/* tip */
[data-theme="dark"] .admonition.tip {
  border-color: #64ffda;
}
[data-theme="dark"] .admonition.tip > .admonition-title {
  background-color: #64ffda1a;
  color: #1de9b6;
}

/* success */
[data-theme="dark"] .admonition.success {
  border-color: #69f0ae;
}
[data-theme="dark"] .admonition.success > .admonition-title {
  background-color: #69f0ae1a;
  color: #00e676;
}

/* question */
[data-theme="dark"] .admonition.question {
  border-color: #b2ff59;
}
[data-theme="dark"] .admonition.question > .admonition-title {
  background-color: #b2ff591a;
  color: #aeea00;
}

/* example */
[data-theme="dark"] .admonition.example {
  border-color: #b388ff;
}
[data-theme="dark"] .admonition.example > .admonition-title {
  background-color: #b388ff1a;
  color: #b39ddb;
}

/* quote */
[data-theme="dark"] .admonition.quote {
  border-color: #bdbdbd;
}
[data-theme="dark"] .admonition.quote > .admonition-title {
  background-color: #bdbdbd1a;
  color: #eeeeee;
}

/* warning / attention / caution */
[data-theme="dark"] .admonition.warning,
[data-theme="dark"] .admonition.attention,
[data-theme="dark"] .admonition.caution {
  border-color: #ffb300;
}
[data-theme="dark"] .admonition.warning > .admonition-title,
[data-theme="dark"] .admonition.attention > .admonition-title,
[data-theme="dark"] .admonition.caution > .admonition-title {
  background-color: #ffb3001a;
  color: #ffe082;
}

/* error / fail / failure / bug / danger / missing */
[data-theme="dark"] .admonition.error,
[data-theme="dark"] .admonition.fail,
[data-theme="dark"] .admonition.failure,
[data-theme="dark"] .admonition.bug,
[data-theme="dark"] .admonition.missing,
[data-theme="dark"] .admonition.danger {
  border-color: #ef5350;
}
[data-theme="dark"] .admonition.error > .admonition-title,
[data-theme="dark"] .admonition.fail > .admonition-title,
[data-theme="dark"] .admonition.failure > .admonition-title,
[data-theme="dark"] .admonition.bug > .admonition-title,
[data-theme="dark"] .admonition.missing > .admonition-title,
[data-theme="dark"] .admonition.danger > .admonition-title {
  background-color: #ef53501a;
  color: #ff8a80;
}</style><script id="mermaid-scripts" src="/cache/mermaid.min.local.js"></script>
<script>mermaid.initialize({theme: 'default'});</script></head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" title="Homepage" class="logo"></a>
                    </h1>
                        <h2 class="subtitle-wrap">
                            <p class="title">è§£ç æ•°å­—å¼‚å¸¸</p>
                          <p class="subtitle">æœ‰æ—¶åŠŸèƒ½å°±æ˜¯æ•°å­—å…”å­æ´ä¸­çš„é”™è¯¯ï¼Œåä¹‹äº¦ç„¶</p>
                        </h2>
                    <div id="lang-selector">
                        <span class="lang-icon">ğŸŒ</span>
                        
                            <a href="/2025/01/Single-Sign-On-at-Home/" class="lang-link">English</a>
<span class="lang-sep">|</span>                            <a href="/zh-TW/2025/01/Single-Sign-On-at-Home/" class="lang-link">ç¹é«”ä¸­æ–‡</a>
<span class="lang-sep">|</span>                            <a href="/ja/2025/01/Single-Sign-On-at-Home/" class="lang-link">æ—¥æœ¬èª</a>
                    </div>
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/zh-CN/">ä¸»é¡µ</a>
                                </li>
                                                                    <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/zh-CN/categories/AI/">äººå·¥æ™ºèƒ½</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/zh-CN/categories/AI/Art-Gallery/">è‰ºæœ¯ç”»å»Š</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/zh-CN/categories/Architecture/">æ¶æ„</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/zh-CN/categories/Cybersecurity/">ç½‘ç»œå®‰å…¨</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/zh-CN/categories/Development/">å¼€å‘</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/zh-CN/categories/Misc/">æ‚é¡¹</a></li></ul>
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/zh-CN/about-me">å…³äº</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" id="search-form-input" placeholder="æœç´¢">
        <button type="submit" title="æœç´¢" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" id="ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script integrity="sha256-B5nfCL2Dym3Ba4YJFI7wB3f4vtClbrYJZ32A5erBEdg=">
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'æ–‡ç« ',
            PAGES: 'é¡µé¢',
            CATEGORIES: 'åˆ†ç±»',
            TAGS: 'æ ‡ç­¾',
            UNTITLED: '(æœªå‘½å)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
        LANG: 'zh-CN',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>




</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Cybersecurity/">Cybersecurity</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-2025/01/Single-Sign-On-at-Home-zh-CN" class="article article-single article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner responsive-content">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        åœ¨å®¶ä¸­å»ºç«‹å•ç‚¹ç™»å½•ç³»ç»Ÿ
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
      <i class="fa fa-calendar"></i>
        
          Created <time datetime="2025-01-14T16:00:00.000Z" itemprop="datePublished">2025-01-15</time>
          &nbsp;<i class="fa fa-calendar"></i>
          Updated <time datetime="2025-10-23T14:57:12.779Z" itemprop="datePublished">2025-10-23</time>
        
    </div>


                

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/zh-CN/tags/Authentication/">Authentication</a> <a class="tag-link" href="/zh-CN/tags/Cybersecurity/">Cybersecurity</a> <a class="tag-link" href="/zh-CN/tags/Homelab/">Homelab</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%9C%A8%E5%AE%B6%E4%B8%AD%E9%9C%80%E8%A6%81-SSO%EF%BC%9F"><span class="toc-text">ä¸ºä»€ä¹ˆåœ¨å®¶ä¸­éœ€è¦ SSOï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%90%86%E8%A7%A3-SSO-%E5%9F%BA%E7%A1%80"><span class="toc-text">ç†è§£ SSO åŸºç¡€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E6%BA%90"><span class="toc-text">èµ„æº</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-text">ç»“è®º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE-Authelia"><span class="toc-text">è®¾ç½® Authelia</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%A4%9A%E5%9B%A0%E7%B4%A0%E9%AA%8C%E8%AF%81"><span class="toc-text">æ·»åŠ å¤šå› ç´ éªŒè¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E7%94%A8-SSO-%E5%90%8E%E6%98%AF%E5%90%A6%E5%BA%94%E4%BF%9D%E7%95%99%E6%9C%AC%E5%9C%B0%E8%B4%A6%E6%88%B7%EF%BC%9F"><span class="toc-text">å¯ç”¨ SSO åæ˜¯å¦åº”ä¿ç•™æœ¬åœ°è´¦æˆ·ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E6%BA%90-2"><span class="toc-text">èµ„æº</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA-2"><span class="toc-text">ç»“è®º</span></a></li></ol>
            <p>ä½ å·²ç»å»ºç«‹äº†ä¸€ä¸ªä»¤äººå°è±¡æ·±åˆ»çš„å®¶åº­å®éªŒå®¤â€”â€”Nextcloudã€Jellyfinã€Home Assistantã€Portainerã€Grafanaï¼Œä»¥åŠåå‡ ä¸ªå…¶ä»–æœåŠ¡ã€‚æ¯ä¸ªéƒ½å¾ˆæ£’ã€‚æ¯ä¸ªä¹Ÿéƒ½æœ‰è‡ªå·±çš„ç™»å½•é¡µé¢ã€‚ä»¥åŠè‡ªå·±çš„å¯†ç ã€‚ä»¥åŠè‡ªå·±çš„ä¼šè¯è¶…æ—¶ã€‚</p>
<p>å¬èµ·æ¥å¾ˆç†Ÿæ‚‰å—ï¼Ÿæ¬¢è¿æ¥åˆ°å¯†ç ç–²åŠ³çš„ä¸–ç•Œã€‚</p>
<p>å¦‚æœä½ å¯ä»¥ç™»å½•ä¸€æ¬¡å°±è®¿é—®æ‰€æœ‰å†…å®¹å‘¢ï¼Ÿè¿™å°±æ˜¯å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰ï¼Œå®ƒä¸å†åªæ˜¯ä¼ä¸šä¸“ç”¨ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆåœ¨å®¶ä¸­éœ€è¦-SSOï¼Ÿ">ä¸ºä»€ä¹ˆåœ¨å®¶ä¸­éœ€è¦ SSOï¼Ÿ</h2>
<p><strong>é—®é¢˜æ‰€åœ¨ï¼š</strong></p>
<ul>
<li>15+ ä¸ªæœåŠ¡ = 15+ ä¸ªè¦è®°ä½çš„å¯†ç ï¼ˆæˆ–é‡å¤ä½¿ç”¨ ğŸ˜±ï¼‰</li>
<li>åˆ†åˆ«ç™»å½•æ¯ä¸ªæœåŠ¡æµªè´¹æ—¶é—´</li>
<li>æ²¡æœ‰é›†ä¸­å¼ç”¨æˆ·ç®¡ç†</li>
<li>éœ€è¦æ—¶éš¾ä»¥æ’¤é”€è®¿é—®æƒé™</li>
<li>å¯†ç é‡ç½®æ˜¯ä¸€åœºå™©æ¢¦</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>SSO æä¾›ï¼š</p>
<ul>
<li><strong>ä¸€æ¬¡ç™»å½•</strong>é€‚ç”¨äºæ‰€æœ‰æœåŠ¡</li>
<li><strong>é›†ä¸­å¼èº«ä»½éªŒè¯</strong> - åœ¨ä¸€ä¸ªåœ°æ–¹ç®¡ç†ç”¨æˆ·</li>
<li><strong>æ›´å¥½çš„å®‰å…¨æ€§</strong> - ä¸€æ¬¡å¼ºåˆ¶æ‰§è¡Œ MFAï¼Œé€‚ç”¨äºæ‰€æœ‰åœ°æ–¹</li>
<li><strong>æ›´å®¹æ˜“çš„å…¥èŒ</strong> - ä¸€æ¬¡å°†å®¶äºº/æœ‹å‹åŠ å…¥æ‰€æœ‰æœåŠ¡</li>
<li><strong>å¿«é€Ÿæ’¤é”€</strong> - åœç”¨ä¸€ä¸ªè´¦æˆ·ï¼Œé”å®šæ‰€æœ‰åœ°æ–¹</li>
</ul>
<h2 id="ç†è§£-SSO-åŸºç¡€">ç†è§£ SSO åŸºç¡€</h2>
<h3 id="ä»€ä¹ˆæ˜¯å•ç‚¹ç™»å½•ï¼Ÿ">ä»€ä¹ˆæ˜¯å•ç‚¹ç™»å½•ï¼Ÿ</h3>
<p>SSO æ˜¯ä¸€ç§èº«ä»½éªŒè¯æ–¹æ¡ˆï¼Œå…è®¸ç”¨æˆ·ç™»å½•ä¸€æ¬¡å¹¶è®¿é—®å¤šä¸ªåº”ç”¨ç¨‹åºï¼Œæ— éœ€é‡æ–°éªŒè¯ã€‚</p>
<p><strong>ç®€å•ç¤ºä¾‹ï¼š</strong></p>
<ul>
<li>æ²¡æœ‰ SSOï¼šç™»å½• Nextcloud â†’ ç™»å½• Grafana â†’ ç™»å½• Jellyfinï¼ˆ3 æ¬¡ç™»å½•ï¼‰</li>
<li>æœ‰ SSOï¼šç™»å½•ä¸€æ¬¡ â†’ è®¿é—®æ‰€æœ‰ä¸‰ä¸ªæœåŠ¡ï¼ˆ1 æ¬¡ç™»å½•ï¼‰</li>
</ul>
<h3 id="å…³é”®ç»„ä»¶è¯´æ˜">å…³é”®ç»„ä»¶è¯´æ˜</h3>
<p>å°† SSO æƒ³è±¡æˆä¸€ä¸ªæœ‰å¤šä¸ª VIP æˆ¿é—´çš„å¤œåº—ã€‚è®©æˆ‘ä»¬åˆ†è§£æ¯ä¸ªç»„ä»¶ï¼š</p>
<h4 id="1-èº«ä»½æä¾›è€…ï¼ˆIdPï¼‰-ä¿å®‰">1. èº«ä»½æä¾›è€…ï¼ˆIdPï¼‰- ä¿å®‰</h4>
<p>**å®ƒçš„ä½œç”¨ï¼š**éªŒè¯ä½ æ˜¯è°çš„ä¸­å¤®èº«ä»½éªŒè¯æœºæ„ã€‚</p>
<p>**ç°å®ä¸–ç•Œç±»æ¯”ï¼š**å°±åƒå¤œåº—å…¥å£çš„ä¿å®‰ï¼Œæ£€æŸ¥ä½ çš„èº«ä»½è¯å¹¶ç»™ä½ ä¸€ä¸ªæ‰‹ç¯ã€‚</p>
<p><strong>åœ¨ä½ çš„å®¶åº­å®éªŒå®¤ä¸­ï¼š</strong></p>
<ul>
<li><strong>Autheliaã€Authentik æˆ– Keycloak</strong> å……å½“ä¿å®‰</li>
<li>å½“ä½ å°è¯•è®¿é—®ä»»ä½•æœåŠ¡æ—¶ï¼Œä½ ä¼šå…ˆè¢«é‡å®šå‘åˆ°è¿™é‡Œ</li>
<li>å®ƒæ£€æŸ¥ä½ çš„ç”¨æˆ·å/å¯†ç å’Œ MFA</li>
<li>ä¸€æ—¦éªŒè¯ï¼Œå®ƒä¼šç»™ä½ ä¸€ä¸ªã€Œä»¤ç‰Œã€ï¼ˆå°±åƒæ‰‹ç¯ï¼‰</li>
</ul>
<p><strong>ç¤ºä¾‹æµç¨‹ï¼š</strong></p>
<pre class="language-none"><code class="language-none">ä½  â†’ å°è¯•è®¿é—® Nextcloud
Nextcloud â†’ "æˆ‘ä¸è®¤è¯†ä½ ï¼Œå»é—®ä¿å®‰"
ä½  â†’ é‡å®šå‘åˆ° Authelia ç™»å½•é¡µé¢
Authelia â†’ "å‡ºç¤ºä½ çš„å‡­è¯"
ä½  â†’ è¾“å…¥å¯†ç  + MFA ä»£ç 
Authelia â†’ "å·²éªŒè¯ï¼è¿™æ˜¯ä½ çš„ä»¤ç‰Œ"</code></pre>
<h4 id="2-æœåŠ¡æä¾›è€…ï¼ˆSPï¼‰-VIP-æˆ¿é—´">2. æœåŠ¡æä¾›è€…ï¼ˆSPï¼‰- VIP æˆ¿é—´</h4>
<p>**å®ƒçš„ä½œç”¨ï¼š**ä¿¡ä»» IdP éªŒè¯ç”¨æˆ·çš„å®é™…åº”ç”¨ç¨‹åºã€‚</p>
<p>**ç°å®ä¸–ç•Œç±»æ¯”ï¼š**å°±åƒå¤œåº—ä¸­çš„ VIP æˆ¿é—´ã€‚ä»–ä»¬ä¸æ£€æŸ¥ä½ çš„èº«ä»½è¯â€”â€”ä»–ä»¬åªçœ‹ä¿å®‰ç»™çš„æ‰‹ç¯ã€‚</p>
<p><strong>åœ¨ä½ çš„å®¶åº­å®éªŒå®¤ä¸­ï¼š</strong></p>
<ul>
<li>**ä½ çš„åº”ç”¨ç¨‹åºï¼š**Nextcloudã€Grafanaã€Jellyfinã€Home Assistant</li>
<li>å®ƒä»¬ä¸è‡ªå·±å¤„ç†å¯†ç </li>
<li>å®ƒä»¬ä¿¡ä»» IdP çš„å†³å®š</li>
<li>å®ƒä»¬åªæ£€æŸ¥ï¼šâ€œä½ æœ‰æ¥è‡ª Authelia çš„æœ‰æ•ˆä»¤ç‰Œå—ï¼Ÿâ€</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre class="language-none"><code class="language-none">ä½  â†’ è®¿é—® Grafanaï¼ˆå¸¦æœ‰æ¥è‡ª Authelia çš„ä»¤ç‰Œï¼‰
Grafana â†’ "æˆ‘çœ‹åˆ°ä½ æœ‰æ¥è‡ª Authelia çš„æœ‰æ•ˆä»¤ç‰Œ"
Grafana â†’ "Authelia è¯´ä½ æ˜¯ 'alice'ï¼Œåœ¨ 'admins' ç»„ä¸­"
Grafana â†’ "æ¬¢è¿ï¼"</code></pre>
<h4 id="3-ç”¨æˆ·ç›®å½•-å®¾å®¢åå•">3. ç”¨æˆ·ç›®å½• - å®¾å®¢åå•</h4>
<p>**å®ƒçš„ä½œç”¨ï¼š**å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼ˆç”¨æˆ·åã€å¯†ç ã€ç»„ï¼‰ã€‚</p>
<p>**ç°å®ä¸–ç•Œç±»æ¯”ï¼š**ä¿å®‰æ£€æŸ¥çš„å®¾å®¢åå•ã€‚</p>
<p><strong>åœ¨ä½ çš„å®¶åº­å®éªŒå®¤ä¸­ï¼š</strong></p>
<ul>
<li>**ç®€å•ï¼š**åŒ…å«ç”¨æˆ·åå’Œå“ˆå¸Œå¯†ç çš„ YAML æ–‡ä»¶</li>
<li>**é«˜çº§ï¼š**LDAP æœåŠ¡å™¨ï¼ˆå°±åƒç”¨æˆ·çš„æ•°æ®åº“ï¼‰</li>
<li>åŒ…å«ï¼šç”¨æˆ·åã€å¯†ç ã€ç”µå­é‚®ä»¶ã€ç»„æˆå‘˜èµ„æ ¼</li>
</ul>
<p><strong>ç¤ºä¾‹ç»“æ„ï¼š</strong></p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">users</span><span class="token punctuation">:</span>
  <span class="token key atrule">alice</span><span class="token punctuation">:</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> (å“ˆå¸Œ)
    <span class="token key atrule">email</span><span class="token punctuation">:</span> alice@home.local
    <span class="token key atrule">groups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>admins<span class="token punctuation">,</span> users<span class="token punctuation">]</span>
  <span class="token key atrule">bob</span><span class="token punctuation">:</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> (å“ˆå¸Œ)
    <span class="token key atrule">email</span><span class="token punctuation">:</span> bob@home.local
    <span class="token key atrule">groups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>users<span class="token punctuation">]</span></code></pre>
<h4 id="4-èº«ä»½éªŒè¯-vs-æˆæƒ">4. èº«ä»½éªŒè¯ vs æˆæƒ</h4>
<p>**èº«ä»½éªŒè¯ï¼š**è¯æ˜ä½ æ˜¯è°ï¼ˆâ€œä½ æ˜¯ Alice å—ï¼Ÿâ€ï¼‰<br>
**æˆæƒï¼š**å†³å®šä½ å¯ä»¥åšä»€ä¹ˆï¼ˆâ€œAlice å¯ä»¥è®¿é—®ç®¡ç†é¢æ¿å—ï¼Ÿâ€ï¼‰</p>
<p><strong>ç°å®ä¸–ç•Œç±»æ¯”ï¼š</strong></p>
<ul>
<li><strong>èº«ä»½éªŒè¯</strong> = å‡ºç¤ºèº«ä»½è¯è¯æ˜ä½ å·²æ»¡ 21 å²</li>
<li><strong>æˆæƒ</strong> = ä¿å®‰å†³å®šä½ æ˜¯å¦å¯ä»¥è¿›å…¥ VIP åŒº</li>
</ul>
<p><strong>åœ¨ SSO ä¸­ï¼š</strong></p>
<ul>
<li><strong>IdP å¤„ç†èº«ä»½éªŒè¯ï¼š</strong>â€œæ˜¯çš„ï¼Œè¿™æ˜¯ Aliceï¼Œå¯†ç æ­£ç¡®â€</li>
<li><strong>åº”ç”¨ç¨‹åºå¤„ç†æˆæƒï¼š</strong>â€œAlice åœ¨ â€˜adminsâ€™ ç»„ä¸­ï¼Œæˆäºˆç®¡ç†å‘˜è®¿é—®æƒé™â€</li>
</ul>
<h4 id="5-èº«ä»½éªŒè¯åè®®-è¯­è¨€">5. èº«ä»½éªŒè¯åè®® - è¯­è¨€</h4>
<p>**å®ƒä»¬çš„ä½œç”¨ï¼š**IdP å’Œåº”ç”¨ç¨‹åºé€šä¿¡çš„æ ‡å‡†åŒ–æ–¹å¼ã€‚</p>
<p>**ç°å®ä¸–ç•Œç±»æ¯”ï¼š**å°±åƒä¿å®‰å’Œ VIP æˆ¿é—´ç”¨æ¥æ²Ÿé€šçš„ä¸åŒè¯­è¨€ã€‚</p>
<p><strong>OIDCï¼ˆOpenID Connectï¼‰- ç°ä»£ä¸”æ¨èï¼š</strong></p>
<ul>
<li><strong>èº«ä»½éªŒè¯ï¼š</strong>â€œä½ æ˜¯è°ï¼Ÿâ€</li>
<li><strong>æˆæƒï¼š</strong>â€œä½ åœ¨å“ªäº›ç»„ä¸­ï¼Ÿâ€</li>
<li>ä½¿ç”¨ JSONï¼ˆæ˜“äºé˜…è¯»ï¼‰</li>
<li>å»ºç«‹åœ¨ OAuth2 ä¹‹ä¸Š</li>
<li>å¤§å¤šæ•°ç°ä»£åº”ç”¨ç¨‹åºæ”¯æŒ</li>
<li><strong>å°½å¯èƒ½ä½¿ç”¨æ­¤åè®®</strong></li>
</ul>
<p><strong>OIDC ä»¤ç‰Œç¤ºä¾‹ï¼š</strong></p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"sub"</span><span class="token operator">:</span> <span class="token string">"alice"</span><span class="token punctuation">,</span>
  <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"alice@homelab.local"</span><span class="token punctuation">,</span>
  <span class="token property">"groups"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"admins"</span><span class="token punctuation">,</span> <span class="token string">"users"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"exp"</span><span class="token operator">:</span> <span class="token number">1705334400</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>SAML - ä¼ä¸šæ ‡å‡†ï¼š</strong></p>
<ul>
<li>å°±åƒè¯´æ­£å¼çš„æ³•å¾‹è¯­è¨€</li>
<li>ä½¿ç”¨ XMLï¼ˆå†—é•¿ï¼‰</li>
<li>è¾ƒæ—§çš„ä¼ä¸šåº”ç”¨ç¨‹åºä½¿ç”¨å®ƒ</li>
<li>æ›´å¤æ‚ä½†å¹¿æ³›æ”¯æŒ</li>
<li>åœ¨ä¼ä¸šç¯å¢ƒä¸­å¸¸è§</li>
</ul>
<p><strong>Windows é›†æˆèº«ä»½éªŒè¯ï¼ˆWIAï¼‰- ä»…é™ Windowsï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ Kerberos/NTLM</li>
<li>Windows åŸŸç”¨æˆ·è‡ªåŠ¨ç™»å½•</li>
<li>åœ¨åŸŸä¸Šæ— éœ€å¯†ç æç¤º</li>
<li>**ä»…é€‚ç”¨äºï¼š**Active Directory + Windows å®¢æˆ·ç«¯</li>
<li><strong>éè”åˆ</strong> - æ— æ³•ä¸å¤–éƒ¨ SaaS åº”ç”¨ç¨‹åºé›†æˆ</li>
<li><strong>ä¸é€‚åˆå®¶åº­å®éªŒå®¤</strong>ï¼Œé™¤éä½ è¿è¡Œ Windows Server åŸŸ</li>
</ul>
<h4 id="6-è”åˆ-vs-éè”åˆèº«ä»½éªŒè¯">6. è”åˆ vs éè”åˆèº«ä»½éªŒè¯</h4>
<p><strong>ä»€ä¹ˆæ˜¯è”åˆï¼Ÿ</strong></p>
<p>è”åˆå…è®¸ä¸åŒç»„ç»‡/ç³»ç»Ÿç›¸äº’ä¿¡ä»»å½¼æ­¤çš„èº«ä»½éªŒè¯ã€‚</p>
<p><strong>ç°å®ä¸–ç•Œç±»æ¯”ï¼š</strong></p>
<ul>
<li>**éè”åˆï¼š**ä½ çš„å¥èº«æˆ¿ä¼šå‘˜èµ„æ ¼åªåœ¨ä½ çš„å¥èº«æˆ¿æœ‰æ•ˆ</li>
<li>**è”åˆï¼š**ä½ çš„æŠ¤ç…§åœ¨å¤šä¸ªå›½å®¶æœ‰æ•ˆï¼ˆå®ƒä»¬ç›¸äº’ä¿¡ä»»ï¼‰</li>
</ul>
<p><strong>éè”åˆèº«ä»½éªŒè¯ï¼ˆWIAã€åŸºæœ¬éªŒè¯ï¼‰ï¼š</strong></p>
<pre class="language-none"><code class="language-none">ä½ çš„å®¶åº­å®éªŒå®¤ IdP â†’ ä»…é€‚ç”¨äºä½ çš„å®¶åº­å®éªŒå®¤æœåŠ¡
âŒ æ— æ³•å‘å¤–éƒ¨ SaaSï¼ˆGitHubã€AWS ç­‰ï¼‰è¿›è¡Œèº«ä»½éªŒè¯</code></pre>
<p><strong>è”åˆèº«ä»½éªŒè¯ï¼ˆOIDCã€SAMLï¼‰ï¼š</strong></p>
<pre class="language-none"><code class="language-none">ä½ çš„å®¶åº­å®éªŒå®¤ IdP â†” å¤–éƒ¨ SaaSï¼ˆå¦‚æœå®ƒä»¬æ”¯æŒï¼‰
âœ… å¯ä»¥å‘ä¿¡ä»»ä½ çš„ IdP çš„æœåŠ¡è¿›è¡Œèº«ä»½éªŒè¯</code></pre>
<p><strong>ç¤ºä¾‹åœºæ™¯ï¼š</strong></p>
<p><strong>éè”åˆï¼ˆWIAï¼‰ï¼š</strong></p>
<pre class="language-none"><code class="language-none">ä½  â†’ Windows åŸŸæ§åˆ¶å™¨ â†’ å®¶åº­å®éªŒå®¤åº”ç”¨ç¨‹åº âœ…
ä½  â†’ Windows åŸŸæ§åˆ¶å™¨ â†’ GitHub âŒï¼ˆGitHub ä¸ä¿¡ä»»ä½ çš„ DCï¼‰</code></pre>
<p><strong>è”åˆï¼ˆOIDC/SAMLï¼‰ï¼š</strong></p>
<pre class="language-none"><code class="language-none">ä½  â†’ Authentik â†’ å®¶åº­å®éªŒå®¤åº”ç”¨ç¨‹åº âœ…
ä½  â†’ Authentik â†’ GitHub Enterprise âœ…ï¼ˆå¦‚æœå·²é…ç½®ï¼‰
ä½  â†’ Authentik â†’ AWS âœ…ï¼ˆå¦‚æœå·²é…ç½®ï¼‰</code></pre>
<p><strong>å®¶åº­å®éªŒå®¤çš„é™·é˜±ï¼š</strong></p>
<p>å¤§å¤šæ•° SaaS æä¾›è€…ä»…æ”¯æŒ<strong>ä¼ä¸šè®¢é˜…</strong>çš„è”åˆï¼š</p>
<table>
<thead>
<tr>
<th>æœåŠ¡</th>
<th>å…è´¹/ä¸ªäºº</th>
<th>ä¼ä¸š</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>GitHub</strong></td>
<td>æ—  SSO</td>
<td>ä½¿ç”¨ SAML çš„ SSO</td>
</tr>
<tr>
<td><strong>AWS</strong></td>
<td>æ—  SSO</td>
<td>ä½¿ç”¨ SAML çš„ SSO</td>
</tr>
<tr>
<td><strong>Google Workspace</strong></td>
<td>æ—  SSO</td>
<td>ä½¿ç”¨ SAML çš„ SSO</td>
</tr>
<tr>
<td><strong>Microsoft 365</strong></td>
<td>æ—  SSO</td>
<td>ä½¿ç”¨ SAML çš„ SSO</td>
</tr>
<tr>
<td><strong>Slack</strong></td>
<td>æ—  SSO</td>
<td>ä½¿ç”¨ SAML çš„ SSO</td>
</tr>
</tbody>
</table>
<p><strong>æˆæœ¬ç°å®ï¼š</strong></p>
<ul>
<li>GitHub Enterpriseï¼š$21/ç”¨æˆ·/æœˆ</li>
<li>AWS SSOï¼šéœ€è¦ AWS Organizations</li>
<li>Google Workspaceï¼š$12-18/ç”¨æˆ·/æœˆï¼ˆSSOï¼‰</li>
<li>Microsoft 365ï¼š$22/ç”¨æˆ·/æœˆï¼ˆSSOï¼‰</li>
</ul>
<div class="admonition warning"><p class="admonition-title"><span class="mdi mdi-alert-outline admonition-icon"></span>âš ï¸ å®¶åº­å®éªŒå®¤ SSO é™åˆ¶</p><div class="admonition-content"><p><strong>ä½ çš„å®¶åº­å®éªŒå®¤ SSO å°†é€‚ç”¨äºï¼š</strong></p>
<ul>
<li>âœ… è‡ªæ‰˜ç®¡æœåŠ¡ï¼ˆNextcloudã€Grafanaã€Jellyfinï¼‰</li>
<li>âœ… ä½ æ§åˆ¶çš„æœåŠ¡</li>
<li>âœ… æ”¯æŒ OIDC/SAML ä¸”æ— é™åˆ¶çš„åº”ç”¨ç¨‹åº</li>
</ul>
<p><strong>ä½ çš„å®¶åº­å®éªŒå®¤ SSO å°†ä¸é€‚ç”¨äºï¼š</strong></p>
<ul>
<li>âŒ å…è´¹å±‚ SaaSï¼ˆGitHubã€Gmailã€Slackï¼‰</li>
<li>âŒ éœ€è¦ä¼ä¸šè®¢é˜…çš„æœåŠ¡</li>
<li>âŒ ä¸æ”¯æŒè‡ªå®šä¹‰ IdP çš„æœåŠ¡</li>
</ul>
<p><strong>è¿™å°†å®¶åº­å®éªŒå®¤ SSO é™åˆ¶ä¸ºä»…å†…éƒ¨æœåŠ¡</strong>ï¼Œä½†å¯¹äºç®¡ç† 10-20 ä¸ªè‡ªæ‰˜ç®¡åº”ç”¨ç¨‹åºä»ç„¶å¾ˆæœ‰ä»·å€¼ï¼</p>
</div></div>
<p><strong>æ¯”è¾ƒï¼š</strong></p>
<table>
<thead>
<tr>
<th>åè®®</th>
<th>æœ€é€‚åˆ</th>
<th>å¤æ‚åº¦</th>
<th>è”åˆ</th>
<th>å®¶åº­å®éªŒå®¤å‹å¥½</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>OIDC</strong></td>
<td>ç°ä»£åº”ç”¨ç¨‹åº</td>
<td>ä½</td>
<td>âœ… æ˜¯</td>
<td>âœ… æ˜¯</td>
</tr>
<tr>
<td><strong>SAML</strong></td>
<td>ä¼ä¸šåº”ç”¨ç¨‹åº</td>
<td>é«˜</td>
<td>âœ… æ˜¯</td>
<td>âš ï¸ å¦‚æœéœ€è¦</td>
</tr>
<tr>
<td><strong>WIA</strong></td>
<td>Windows åŸŸ</td>
<td>ä¸­</td>
<td>âŒ å¦</td>
<td>âŒ è¿‡åº¦</td>
</tr>
</tbody>
</table>
<div class="admonition tip"><p class="admonition-title"><span class="mdi mdi-lightbulb-on-outline admonition-icon"></span>ğŸ’¡ åè®®é€‰æ‹©</p><div class="admonition-content"><p>å¯¹äºå®¶åº­å®éªŒå®¤ï¼š</p>
<ul>
<li><strong>ä½¿ç”¨ OIDC</strong> é€‚ç”¨äºæ”¯æŒå®ƒçš„åº”ç”¨ç¨‹åºï¼ˆGrafanaã€Nextcloudã€Portainerï¼‰</li>
<li><strong>ä½¿ç”¨è½¬å‘éªŒè¯</strong>ï¼ˆAutheliaï¼‰é€‚ç”¨äºä¸æ”¯æŒ OIDC çš„åº”ç”¨ç¨‹åº</li>
<li><strong>è·³è¿‡ WIA</strong>ï¼Œé™¤éä½ å·²ç»è¿è¡Œ Active Directoryï¼ˆè€Œä¸”å®ƒæ— æ³•ä¸ SaaS ä¸€èµ·ä½¿ç”¨ï¼‰</li>
<li><strong>ä»…åœ¨ç‰¹å®šåº”ç”¨ç¨‹åºéœ€è¦æ—¶ä½¿ç”¨ SAML</strong></li>
<li>**æ¥å—é™åˆ¶ï¼š**ä½ çš„ SSO æ— æ³•ä¸å…è´¹å±‚ SaaSï¼ˆGitHubã€Gmail ç­‰ï¼‰ä¸€èµ·ä½¿ç”¨</li>
</ul>
</div></div>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>ğŸ¯ å…³é”®è¦ç‚¹</p><div class="admonition-content"><ul>
<li><strong>IdPï¼ˆAutheliaï¼‰</strong> = ä½ ç™»å½•çš„å”¯ä¸€åœ°æ–¹</li>
<li><strong>æœåŠ¡æä¾›è€…ï¼ˆä½ çš„åº”ç”¨ç¨‹åºï¼‰</strong> = ä¿¡ä»» IdP çš„å†³å®š</li>
<li><strong>ç”¨æˆ·ç›®å½•</strong> = å­˜å‚¨ç”¨æˆ·å/å¯†ç çš„åœ°æ–¹</li>
<li><strong>åè®®ï¼ˆOIDC/SAMLï¼‰</strong> = å®ƒä»¬å¦‚ä½•ç›¸äº’é€šä¿¡</li>
</ul>
<p>ä½ åœ¨ IdP ç™»å½•ä¸€æ¬¡ï¼Œä½ çš„æ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½ä¿¡ä»»è¯¥ç™»å½•ã€‚</p>
</div></div>
<h2 id="èµ„æº">èµ„æº</h2>
<ul>
<li>**<a target="_blank" rel="noopener" href="https://www.authelia.com/">Authelia æ–‡æ¡£</a>ï¼š**å®Œæ•´çš„ Authelia æŒ‡å—</li>
<li>**<a target="_blank" rel="noopener" href="https://goauthentik.io/docs/">Authentik æ–‡æ¡£</a>ï¼š**Authentik è®¾ç½®å’Œé…ç½®</li>
<li>**<a target="_blank" rel="noopener" href="https://www.keycloak.org/documentation">Keycloak æ–‡æ¡£</a>ï¼š**ä¼ä¸š SSO æŒ‡å—</li>
<li>**<a target="_blank" rel="noopener" href="https://openid.net/connect/">OIDC è¯´æ˜</a>ï¼š**ç†è§£ OpenID Connect</li>
</ul>
<h2 id="ç»“è®º">ç»“è®º</h2>
<p>åœ¨å®¶ä¸­è®¾ç½® SSO å°†ä½ çš„å®¶åº­å®éªŒå®¤ä»ä¸€ç³»åˆ—ç‹¬ç«‹æœåŠ¡è½¬å˜ä¸ºç»Ÿä¸€å¹³å°ã€‚åˆå§‹è®¾ç½®æŠ•èµ„ç«‹å³é€šè¿‡ä¾¿åˆ©æ€§å’Œæ”¹è¿›çš„å®‰å…¨æ€§å¾—åˆ°å›æŠ¥ã€‚</p>
<p><strong>å…³é”®è¦ç‚¹ï¼š</strong></p>
<ul>
<li>SSO æ¶ˆé™¤äº†å¤šä¸ªæœåŠ¡çš„å¯†ç ç–²åŠ³</li>
<li><strong>Authelia æœ€é€‚åˆç®€å•è®¾ç½®</strong>ï¼Œé…åˆåå‘ä»£ç†</li>
<li><strong>Authentik æä¾›å®Œæ•´åŠŸèƒ½</strong>ï¼Œé…æœ‰ç¾è§‚çš„ UI</li>
<li>è½¬å‘éªŒè¯ä¿æŠ¤ä»»ä½•æœåŠ¡</li>
<li>MFA æ·»åŠ å…³é”®å®‰å…¨å±‚</li>
<li>LDAP é›†æˆå¯æ‰©å±•ç”¨äºæ›´å¤§çš„éƒ¨ç½²</li>
<li>å®šæœŸå¤‡ä»½è‡³å…³é‡è¦ï¼ˆSSO æ˜¯å•ç‚¹æ•…éšœï¼‰</li>
<li><strong>å®¶åº­å®éªŒå®¤ SSO é™äºè‡ªæ‰˜ç®¡æœåŠ¡</strong> - SaaS é›†æˆéœ€è¦æ˜‚è´µçš„ä¼ä¸šè®¡åˆ’</li>
<li>è”åˆï¼ˆOIDC/SAMLï¼‰å®ç°è·¨ç³»ç»Ÿ SSOï¼Œä½† WIA æ˜¯éè”åˆçš„</li>
</ul>
<p><strong>å¿«é€Ÿå…¥é—¨å»ºè®®ï¼š</strong></p>
<p>å¯¹äºå¤§å¤šæ•°å®¶åº­å®éªŒå®¤ï¼š</p>
<ol>
<li>ä» <strong>Authelia</strong> + Traefik å¼€å§‹ï¼ˆæœ€ç®€å•çš„è·¯å¾„ï¼‰</li>
<li>æœ€åˆä½¿ç”¨åŸºäºæ–‡ä»¶çš„èº«ä»½éªŒè¯</li>
<li>ä¸ºç®¡ç†å‘˜è´¦æˆ·æ·»åŠ  MFA</li>
<li>é€æ­¥å°†æœåŠ¡è¿ç§»åˆ° SSO</li>
<li>å¦‚æœä»¥åéœ€è¦ OIDC/SAMLï¼Œè€ƒè™‘ Authentik</li>
</ol>
<p>ä» 2-3 ä¸ªæœåŠ¡å¼€å§‹ï¼Œç†Ÿæ‚‰æµç¨‹ï¼Œç„¶åæ‰©å±•ã€‚å½“ä½ ä¸å†éœ€è¦å¤„ç†æ•°åä¸ªå¯†ç æ—¶ï¼Œæœªæ¥çš„ä½ ä¼šæ„Ÿè°¢ä½ ï¼ğŸ”</p>
<h2 id="è®¾ç½®-Authelia">è®¾ç½® Authelia</h2>
<h3 id="æ¶æ„">æ¶æ„</h3>
<div class="mermaid">flowchart TD
  User["ğŸ‘¤ ç”¨æˆ·"]
  Proxy["ğŸšª åå‘ä»£ç† (Traefik/nginx)"]
  Authelia["ğŸ” Authelia"]
  LDAP["ğŸ“š ç”¨æˆ·ç›®å½• (YAML/LDAP)"]
  
  subgraph Services[" "]
    App1["ğŸ“¦ Nextcloud"]
    App2["ğŸ¬ Jellyfin"]
    App3["ğŸ“Š Grafana"]
  end
  
  User --&gt; Proxy
  Proxy --&gt; Authelia
  Proxy --&gt; Services
  Authelia -.-&gt; LDAP
  
  style Authelia fill:#e3f2fd
  style Proxy fill:#fff3e0
  style LDAP fill:#f3e5f5
  style Services fill:#e8f5e9</div>
<h3 id="å…ˆå†³æ¡ä»¶">å…ˆå†³æ¡ä»¶</h3>
<ul>
<li>Docker å’Œ Docker Compose</li>
<li>åå‘ä»£ç†ï¼ˆTraefik æˆ– nginxï¼‰</li>
<li>åŸŸåï¼ˆæˆ–æœ¬åœ° DNSï¼‰</li>
</ul>
<h3 id="æ­¥éª¤-1ï¼šåˆ›å»ºç›®å½•ç»“æ„">æ­¥éª¤ 1ï¼šåˆ›å»ºç›®å½•ç»“æ„</h3>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> authelia/<span class="token punctuation">{</span>config,secrets<span class="token punctuation">}</span>
<span class="token builtin class-name">cd</span> authelia</code></pre>
<h3 id="æ­¥éª¤-2ï¼šç”Ÿæˆå¯†é’¥">æ­¥éª¤ 2ï¼šç”Ÿæˆå¯†é’¥</h3>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># JWT å¯†é’¥</span>
<span class="token function">tr</span> <span class="token parameter variable">-cd</span> <span class="token string">'[:alnum:]'</span> <span class="token operator">&lt;</span> /dev/urandom <span class="token operator">|</span> <span class="token function">fold</span> <span class="token parameter variable">-w</span> <span class="token string">"64"</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">1</span> <span class="token operator">&gt;</span> secrets/jwt_secret

<span class="token comment"># ä¼šè¯å¯†é’¥</span>
<span class="token function">tr</span> <span class="token parameter variable">-cd</span> <span class="token string">'[:alnum:]'</span> <span class="token operator">&lt;</span> /dev/urandom <span class="token operator">|</span> <span class="token function">fold</span> <span class="token parameter variable">-w</span> <span class="token string">"64"</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">1</span> <span class="token operator">&gt;</span> secrets/session_secret

<span class="token comment"># å­˜å‚¨åŠ å¯†å¯†é’¥</span>
<span class="token function">tr</span> <span class="token parameter variable">-cd</span> <span class="token string">'[:alnum:]'</span> <span class="token operator">&lt;</span> /dev/urandom <span class="token operator">|</span> <span class="token function">fold</span> <span class="token parameter variable">-w</span> <span class="token string">"64"</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">1</span> <span class="token operator">&gt;</span> secrets/storage_encryption_key</code></pre>
<h3 id="æ­¥éª¤-3ï¼šåˆ›å»ºé…ç½®">æ­¥éª¤ 3ï¼šåˆ›å»ºé…ç½®</h3>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># config/configuration.yml</span>
<span class="token punctuation">---</span>
<span class="token key atrule">theme</span><span class="token punctuation">:</span> dark
<span class="token key atrule">default_2fa_method</span><span class="token punctuation">:</span> <span class="token string">"totp"</span>

<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> 0.0.0.0
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9091</span>

<span class="token key atrule">log</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span> info

<span class="token key atrule">totp</span><span class="token punctuation">:</span>
  <span class="token key atrule">issuer</span><span class="token punctuation">:</span> homelab.local
  <span class="token key atrule">period</span><span class="token punctuation">:</span> <span class="token number">30</span>
  <span class="token key atrule">skew</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token key atrule">authentication_backend</span><span class="token punctuation">:</span>
  <span class="token key atrule">file</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /config/users_database.yml
    <span class="token key atrule">password</span><span class="token punctuation">:</span>
      <span class="token key atrule">algorithm</span><span class="token punctuation">:</span> argon2id
      <span class="token key atrule">iterations</span><span class="token punctuation">:</span> <span class="token number">1</span>
      <span class="token key atrule">salt_length</span><span class="token punctuation">:</span> <span class="token number">16</span>
      <span class="token key atrule">parallelism</span><span class="token punctuation">:</span> <span class="token number">8</span>
      <span class="token key atrule">memory</span><span class="token punctuation">:</span> <span class="token number">64</span>

<span class="token key atrule">access_control</span><span class="token punctuation">:</span>
  <span class="token key atrule">default_policy</span><span class="token punctuation">:</span> deny
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">domain</span><span class="token punctuation">:</span> <span class="token string">"*.homelab.local"</span>
      <span class="token key atrule">policy</span><span class="token punctuation">:</span> two_factor

<span class="token key atrule">session</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> authelia_session
  <span class="token key atrule">domain</span><span class="token punctuation">:</span> homelab.local
  <span class="token key atrule">expiration</span><span class="token punctuation">:</span> 1h
  <span class="token key atrule">inactivity</span><span class="token punctuation">:</span> 5m
  <span class="token key atrule">remember_me_duration</span><span class="token punctuation">:</span> 1M

<span class="token key atrule">regulation</span><span class="token punctuation">:</span>
  <span class="token key atrule">max_retries</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">find_time</span><span class="token punctuation">:</span> 2m
  <span class="token key atrule">ban_time</span><span class="token punctuation">:</span> 5m

<span class="token key atrule">storage</span><span class="token punctuation">:</span>
  <span class="token key atrule">encryption_key_secret_file</span><span class="token punctuation">:</span> /secrets/storage_encryption_key
  <span class="token key atrule">local</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /config/db.sqlite3

<span class="token key atrule">notifier</span><span class="token punctuation">:</span>
  <span class="token key atrule">filesystem</span><span class="token punctuation">:</span>
    <span class="token key atrule">filename</span><span class="token punctuation">:</span> /config/notification.txt</code></pre>
<h3 id="æ­¥éª¤-4ï¼šåˆ›å»ºç”¨æˆ·">æ­¥éª¤ 4ï¼šåˆ›å»ºç”¨æˆ·</h3>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># config/users_database.yml</span>
<span class="token key atrule">users</span><span class="token punctuation">:</span>
  <span class="token key atrule">alice</span><span class="token punctuation">:</span>
    <span class="token key atrule">displayname</span><span class="token punctuation">:</span> <span class="token string">"Alice Smith"</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">"$argon2id$v=19$m=65536,t=3,p=4$..."</span>
    <span class="token key atrule">email</span><span class="token punctuation">:</span> alice@homelab.local
    <span class="token key atrule">groups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> admins
      <span class="token punctuation">-</span> users
  
  <span class="token key atrule">bob</span><span class="token punctuation">:</span>
    <span class="token key atrule">displayname</span><span class="token punctuation">:</span> <span class="token string">"Bob Jones"</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">"$argon2id$v=19$m=65536,t=3,p=4$..."</span>
    <span class="token key atrule">email</span><span class="token punctuation">:</span> bob@homelab.local
    <span class="token key atrule">groups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> users</code></pre>
<p><strong>ç”Ÿæˆå¯†ç å“ˆå¸Œï¼š</strong></p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">--rm</span> authelia/authelia:latest authelia crypto <span class="token builtin class-name">hash</span> generate argon2 <span class="token parameter variable">--password</span> <span class="token string">'yourpassword'</span></code></pre>
<h3 id="æ­¥éª¤-5ï¼šDocker-Compose">æ­¥éª¤ 5ï¼šDocker Compose</h3>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># docker-compose.yml</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">authelia</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> authelia/authelia<span class="token punctuation">:</span>latest
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> authelia
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./config<span class="token punctuation">:</span>/config
      <span class="token punctuation">-</span> ./secrets<span class="token punctuation">:</span>/secrets
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 9091<span class="token punctuation">:</span><span class="token number">9091</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> TZ=America/New_York
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped</code></pre>
<h3 id="æ­¥éª¤-6ï¼šä¸-Traefik-é›†æˆ">æ­¥éª¤ 6ï¼šä¸ Traefik é›†æˆ</h3>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># docker-compose.ymlï¼ˆæ·»åŠ åˆ°ç°æœ‰çš„ Traefik è®¾ç½®ï¼‰</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">authelia</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> authelia/authelia<span class="token punctuation">:</span>latest
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> authelia
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./authelia/config<span class="token punctuation">:</span>/config
      <span class="token punctuation">-</span> ./authelia/secrets<span class="token punctuation">:</span>/secrets
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.enable=true"</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.http.routers.authelia.rule=Host(`auth.homelab.local`)"</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.http.routers.authelia.entrypoints=websecure"</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.http.routers.authelia.tls=true"</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.http.services.authelia.loadbalancer.server.port=9091"</span>
      
      <span class="token comment"># Authelia ä¸­é—´ä»¶</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.http.middlewares.authelia.forwardauth.address=http://authelia:9091/api/verify?rd=https://auth.homelab.local"</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.http.middlewares.authelia.forwardauth.trustForwardHeader=true"</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.http.middlewares.authelia.forwardauth.authResponseHeaders=Remote-User,Remote-Groups,Remote-Name,Remote-Email"</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped

  <span class="token comment"># å—ä¿æŠ¤æœåŠ¡ç¤ºä¾‹</span>
  <span class="token key atrule">nextcloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nextcloud<span class="token punctuation">:</span>latest
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.enable=true"</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.http.routers.nextcloud.rule=Host(`nextcloud.homelab.local`)"</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.http.routers.nextcloud.entrypoints=websecure"</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.http.routers.nextcloud.tls=true"</span>
      <span class="token punctuation">-</span> <span class="token string">"traefik.http.routers.nextcloud.middlewares=authelia@docker"</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped</code></pre>
<h3 id="æ­¥éª¤-7ï¼šå¯åŠ¨æœåŠ¡">æ­¥éª¤ 7ï¼šå¯åŠ¨æœåŠ¡</h3>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span></code></pre>
<p>è®¿é—® <code>https://auth.homelab.local</code> æŸ¥çœ‹ç™»å½•é¡µé¢ã€‚</p>
<h3 id="ç†è§£èº«ä»½éªŒè¯æµç¨‹">ç†è§£èº«ä»½éªŒè¯æµç¨‹</h3>
<p>ç°åœ¨ä½ å·²ç»è®¾ç½®å¥½ Autheliaï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å½“ä½ è®¿é—®å—ä¿æŠ¤çš„æœåŠ¡æ—¶åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼š</p>
<div class="mermaid">sequenceDiagram
    participant User
    participant App as åº”ç”¨ç¨‹åº (Nextcloud)
    participant SSO as SSO æä¾›è€… (Authelia)
    participant LDAP as ç”¨æˆ·ç›®å½• (YAML/LDAP)
    
    User-&gt;&gt;App: 1. è®¿é—®åº”ç”¨ç¨‹åº
    App-&gt;&gt;User: 2. é‡å®šå‘åˆ° SSO ç™»å½•
    User-&gt;&gt;SSO: 3. è¾“å…¥å‡­è¯ + MFA
    SSO-&gt;&gt;LDAP: 4. éªŒè¯å‡­è¯
    LDAP-&gt;&gt;SSO: 5. ç”¨æˆ·å·²éªŒè¯
    SSO-&gt;&gt;App: 6. è¿”å›éªŒè¯ä»¤ç‰Œ
    App-&gt;&gt;User: 7. æˆäºˆè®¿é—®æƒé™
    
    Note over User,App: ç”¨æˆ·ç°åœ¨å·²ç™»å½•ï¼
    
    User-&gt;&gt;App: 8. è®¿é—®å¦ä¸€ä¸ªåº”ç”¨ç¨‹åº (Jellyfin)
    App-&gt;&gt;SSO: 9. æ£€æŸ¥ç°æœ‰ä¼šè¯
    SSO-&gt;&gt;App: 10. æœ‰æ•ˆä¼šè¯å­˜åœ¨
    App-&gt;&gt;User: 11. æˆäºˆè®¿é—®æƒé™ï¼ˆæ— éœ€ç™»å½•ï¼‰</div>
<p><strong>å¹•åå‘ç”Ÿçš„äº‹æƒ…ï¼š</strong></p>
<ol>
<li>**é¦–æ¬¡è®¿é—®ï¼š**ä½ è®¿é—® <code>nextcloud.homelab.local</code></li>
<li>**Traefik æ‹¦æˆªï¼š**å‘ Authelia æ£€æŸ¥ - â€œè¿™ä¸ªç”¨æˆ·å·²éªŒè¯å—ï¼Ÿâ€</li>
<li>**æœªéªŒè¯ï¼š**Authelia å°†ä½ é‡å®šå‘åˆ° <code>auth.homelab.local</code></li>
<li>**ä½ ç™»å½•ï¼š**è¾“å…¥ç”¨æˆ·åã€å¯†ç å’Œ MFA ä»£ç </li>
<li>**Authelia éªŒè¯ï¼š**å¯¹ç…§ç”¨æˆ·æ•°æ®åº“æ£€æŸ¥å‡­è¯</li>
<li>**åˆ›å»ºä¼šè¯ï¼š**Authelia åˆ›å»ºä¼šè¯ cookie</li>
<li>**é‡å®šå‘å›æ¥ï¼š**ä½ è¢«é€å› Nextcloud</li>
<li>**æˆäºˆè®¿é—®æƒé™ï¼š**Traefik çœ‹åˆ°æœ‰æ•ˆä¼šè¯ï¼Œå…è®¸è®¿é—®</li>
</ol>
<p><strong>ç¬¬äºŒä¸ªæœåŠ¡è®¿é—®ï¼š</strong></p>
<ol>
<li>ä½ è®¿é—® <code>grafana.homelab.local</code></li>
<li>Traefik å‘ Authelia æ£€æŸ¥ - â€œè¿™ä¸ªç”¨æˆ·å·²éªŒè¯å—ï¼Ÿâ€</li>
<li>Authelia çœ‹åˆ°ç°æœ‰ä¼šè¯ cookie - â€œæ˜¯çš„ï¼Œæ˜¯ Aliceï¼â€</li>
<li>ç«‹å³æˆäºˆè®¿é—®æƒé™ - <strong>æ— éœ€ç™»å½•</strong></li>
</ol>
<p>è¿™å°±æ˜¯ SSO çš„é­”æ³• - ä¸€æ¬¡ç™»å½•ï¼Œåˆ°å¤„è®¿é—®ï¼</p>
<h2 id="æ·»åŠ å¤šå› ç´ éªŒè¯">æ·»åŠ å¤šå› ç´ éªŒè¯</h2>
<h3 id="MFA-é€‰é¡¹æ¦‚è§ˆ">MFA é€‰é¡¹æ¦‚è§ˆ</h3>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>å®‰å…¨æ€§</th>
<th>ä¾¿åˆ©æ€§</th>
<th>æˆæœ¬</th>
<th>é˜²é’“é±¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Passkey (WebAuthn)</strong></td>
<td>æœ€é«˜</td>
<td>é«˜</td>
<td>å…è´¹</td>
<td>âœ… æ˜¯</td>
</tr>
<tr>
<td><strong>ç¡¬ä»¶å¯†é’¥</strong></td>
<td>æœ€é«˜</td>
<td>ä¸­</td>
<td>$25-50</td>
<td>âœ… æ˜¯</td>
</tr>
<tr>
<td><strong>TOTPï¼ˆéªŒè¯å™¨åº”ç”¨ç¨‹åºï¼‰</strong></td>
<td>é«˜</td>
<td>ä¸­</td>
<td>å…è´¹</td>
<td>âŒ å¦</td>
</tr>
<tr>
<td><strong>SMS</strong></td>
<td>ä½</td>
<td>é«˜</td>
<td>éœ€è¦ SMS ç½‘å…³</td>
<td>âŒ å¦</td>
</tr>
</tbody>
</table>
<h3 id="1-Passkeyï¼ˆWebAuthnï¼‰-æ¨è">1. Passkeyï¼ˆWebAuthnï¼‰- æ¨è</h3>
<p><strong>ä»€ä¹ˆæ˜¯ Passkeyï¼Ÿ</strong></p>
<p>Passkey æ˜¯ä½¿ç”¨ç”Ÿç‰©è¯†åˆ«éªŒè¯ï¼ˆæŒ‡çº¹ã€é¢éƒ¨ã€PINï¼‰çš„å¯†ç ç°ä»£æ›¿ä»£å“ã€‚</p>
<p>**ç°å®ä¸–ç•Œç±»æ¯”ï¼š**å°±åƒä½¿ç”¨æŒ‡çº¹è§£é”æ‰‹æœºï¼Œè€Œä¸æ˜¯è¾“å…¥å¯†ç ã€‚</p>
<p><strong>å·¥ä½œæ–¹å¼ï¼š</strong></p>
<ul>
<li>ä½ çš„è®¾å¤‡å­˜å‚¨åŠ å¯†å¯†é’¥</li>
<li>ä½ ä½¿ç”¨ç”Ÿç‰©è¯†åˆ«ï¼ˆæŒ‡çº¹/é¢éƒ¨ï¼‰æˆ–è®¾å¤‡ PIN è¿›è¡ŒéªŒè¯</li>
<li>æ²¡æœ‰å¯†ç å¯ä»¥è¢«çªƒå–æˆ–é’“é±¼</li>
<li>é€šè¿‡äº‘åŒæ­¥è·¨è®¾å¤‡å·¥ä½œï¼ˆiCloud é’¥åŒ™ä¸²ã€Google å¯†ç ç®¡ç†å™¨ï¼‰</li>
</ul>
<p><strong>Authentik è®¾ç½®ï¼š</strong></p>
<ol>
<li>ç”¨æˆ·èœå• â†’ è®¾ç½®</li>
<li>MFA è®¾å¤‡ â†’ æ³¨å†Œ</li>
<li>é€‰æ‹© <strong>WebAuthn</strong> æˆ– <strong>Passkey</strong></li>
<li>æŒ‰ç…§æµè§ˆå™¨æç¤ºï¼š
<ul>
<li>**ç§»åŠ¨è®¾å¤‡ï¼š**ä½¿ç”¨æŒ‡çº¹/Face ID</li>
<li>**ç¬”è®°æœ¬ç”µè„‘ï¼š**ä½¿ç”¨ Touch ID/Windows Hello</li>
<li>**å°å¼æœºï¼š**ä½¿ç”¨æ‰‹æœºä½œä¸º passkey æˆ–ç¡¬ä»¶å¯†é’¥</li>
</ul>
</li>
</ol>
<p><strong>Authelia è®¾ç½®ï¼š</strong></p>
<ol>
<li>ç™»å½•ä»»ä½•å—ä¿æŠ¤çš„æœåŠ¡</li>
<li>ç‚¹å‡»ã€Œæ³¨å†Œå®‰å…¨å¯†é’¥ã€</li>
<li>é€‰æ‹© passkey é€‰é¡¹</li>
<li>ä½¿ç”¨ç”Ÿç‰©è¯†åˆ«è¿›è¡ŒéªŒè¯</li>
</ol>
<p><strong>æ”¯æŒçš„å¹³å°ï¼š</strong></p>
<ul>
<li>âœ… iPhone/iPadï¼ˆiOS 16+ï¼‰- Face ID/Touch ID</li>
<li>âœ… Androidï¼ˆ9+ï¼‰- æŒ‡çº¹/é¢éƒ¨è§£é”</li>
<li>âœ… macOSï¼ˆVentura+ï¼‰- Touch ID</li>
<li>âœ… Windowsï¼ˆ10+ï¼‰- Windows Hello</li>
<li>âœ… Chrome/Edge/Safari - å†…ç½®æ”¯æŒ</li>
</ul>
<h3 id="2-ç¡¬ä»¶å®‰å…¨å¯†é’¥">2. ç¡¬ä»¶å®‰å…¨å¯†é’¥</h3>
<p><strong>ç”¨äºéªŒè¯çš„ç‰©ç†è®¾å¤‡ï¼š</strong></p>
<p><strong>Authentikï¼š</strong></p>
<ol>
<li>ç”¨æˆ·èœå• â†’ è®¾ç½®</li>
<li>MFA è®¾å¤‡ â†’ æ³¨å†Œ</li>
<li>é€‰æ‹© WebAuthn</li>
<li>æ’å…¥å®‰å…¨å¯†é’¥ï¼ˆYubiKey ç­‰ï¼‰</li>
<li>æç¤ºæ—¶è§¦æ‘¸å¯†é’¥</li>
</ol>
<p><strong>çƒ­é—¨ç¡¬ä»¶å¯†é’¥ï¼š</strong></p>
<ul>
<li><strong>YubiKey 5</strong>ï¼ˆ$45-50ï¼‰- USB-A/Cã€NFC</li>
<li><strong>YubiKey 5C Nano</strong>ï¼ˆ$55ï¼‰- ç•™åœ¨ USB-C ç«¯å£</li>
<li><strong>Google Titan</strong>ï¼ˆ$30ï¼‰- USB-A/Cã€è“ç‰™</li>
<li><strong>Feitian</strong>ï¼ˆ$20-30ï¼‰- é¢„ç®—é€‰é¡¹</li>
</ul>
<h3 id="3-TOTPï¼ˆéªŒè¯å™¨åº”ç”¨ç¨‹åºï¼‰">3. TOTPï¼ˆéªŒè¯å™¨åº”ç”¨ç¨‹åºï¼‰</h3>
<p><strong>æ¥è‡ªåº”ç”¨ç¨‹åºçš„åŸºäºæ—¶é—´çš„ä»£ç ï¼š</strong></p>
<p><strong>Autheliaï¼ˆå†…ç½®ï¼‰ï¼š</strong></p>
<ol>
<li>ç™»å½•ä»»ä½•å—ä¿æŠ¤çš„æœåŠ¡</li>
<li>ç‚¹å‡»ã€Œæ³¨å†Œè®¾å¤‡ã€</li>
<li>ä½¿ç”¨éªŒè¯å™¨åº”ç”¨ç¨‹åºæ‰«æ QR ç </li>
<li>è¾“å…¥ 6 ä½æ•°ä»£ç è¿›è¡ŒéªŒè¯</li>
</ol>
<p><strong>Authentikï¼š</strong></p>
<ol>
<li>ç”¨æˆ·èœå• â†’ è®¾ç½®</li>
<li>MFA è®¾å¤‡ â†’ æ³¨å†Œ</li>
<li>é€‰æ‹© TOTP</li>
<li>æ‰«æ QR ç </li>
</ol>
<p><strong>æ¨èçš„éªŒè¯å™¨åº”ç”¨ç¨‹åºï¼š</strong></p>
<ul>
<li><strong>Aegis</strong>ï¼ˆAndroidï¼‰- å¼€æºã€åŠ å¯†å¤‡ä»½</li>
<li><strong>Raivo OTP</strong>ï¼ˆiOSï¼‰- å¼€æºã€iCloud åŒæ­¥</li>
<li><strong>2FAS</strong>ï¼ˆiOS/Androidï¼‰- å…è´¹ã€äº‘å¤‡ä»½</li>
<li><strong>Authy</strong>ï¼ˆiOS/Androidï¼‰- å¤šè®¾å¤‡åŒæ­¥</li>
<li><strong>Google Authenticator</strong>ï¼ˆiOS/Androidï¼‰- ç®€å•ã€äº‘å¤‡ä»½</li>
</ul>
<div class="admonition tip"><p class="admonition-title"><span class="mdi mdi-lightbulb-on-outline admonition-icon"></span>ğŸ’¡ MFA æœ€ä½³å®è·µ</p><div class="admonition-content"><p><strong>ä¼˜å…ˆé¡ºåºï¼š</strong></p>
<ol>
<li><strong>Passkeys</strong> - æœ€å®‰å…¨ä¸”æ–¹ä¾¿ï¼ˆä½¿ç”¨ç”Ÿç‰©è¯†åˆ«ï¼‰</li>
<li><strong>ç¡¬ä»¶å¯†é’¥</strong> - éå¸¸å®‰å…¨ï¼Œéœ€è¦ç‰©ç†è®¾å¤‡</li>
<li><strong>TOTP åº”ç”¨ç¨‹åº</strong> - å®‰å…¨ï¼Œä½†å¯èƒ½è¢«é’“é±¼</li>
<li><strong>é¿å… SMS</strong> - å®¹æ˜“å—åˆ° SIM å¡äº¤æ¢æ”»å‡»</li>
</ol>
<p><strong>å»ºè®®ï¼š</strong></p>
<ul>
<li><strong>ç®¡ç†å‘˜å§‹ç»ˆéœ€è¦ MFA</strong>ï¼ˆä½¿ç”¨ passkeys æˆ–ç¡¬ä»¶å¯†é’¥ï¼‰</li>
<li><strong>å®¶äººå¯é€‰</strong>ï¼ˆå‡å°‘æ‘©æ“¦ï¼Œpasskeys å¾ˆå®¹æ˜“ï¼‰</li>
<li><strong>å¤‡ä»½ä»£ç </strong> - ç”Ÿæˆå¹¶å®‰å…¨å­˜å‚¨</li>
<li><strong>å¤šç§æ–¹æ³•</strong> - æ³¨å†Œ passkey + TOTP ä½œä¸ºå¤‡ä»½</li>
<li><strong>Passkeys åŒæ­¥</strong> - ä½¿ç”¨ iCloud/Google ä»æ‰€æœ‰è®¾å¤‡è®¿é—®</li>
</ul>
</div></div>
<h2 id="å¯ç”¨-SSO-åæ˜¯å¦åº”ä¿ç•™æœ¬åœ°è´¦æˆ·ï¼Ÿ">å¯ç”¨ SSO åæ˜¯å¦åº”ä¿ç•™æœ¬åœ°è´¦æˆ·ï¼Ÿ</h2>
<p><strong>ç®€çŸ­ç­”æ¡ˆï¼šæ˜¯çš„ï¼Œå§‹ç»ˆä¿ç•™æœ¬åœ°è´¦æˆ·ä½œä¸ºå¤‡ä»½ã€‚</strong></p>
<h3 id="ä¸ºä»€ä¹ˆä¿ç•™æœ¬åœ°è´¦æˆ·ï¼Ÿ">ä¸ºä»€ä¹ˆä¿ç•™æœ¬åœ°è´¦æˆ·ï¼Ÿ</h3>
<p>**SSO æ˜¯å•ç‚¹æ•…éšœã€‚**å¦‚æœä½ çš„ SSO ç³»ç»Ÿæ•…éšœï¼Œä½ å°†è¢«é”å®šåœ¨æ‰€æœ‰å†…å®¹ä¹‹å¤–ã€‚</p>
<p><strong>SSO æ•…éšœçš„ç°å®ä¸–ç•Œåœºæ™¯ï¼š</strong></p>
<ol>
<li><strong>SSO å®¹å™¨å´©æºƒ</strong> - Docker/Kubernetes é—®é¢˜</li>
<li><strong>æ•°æ®åº“æŸå</strong> - Authelia/Authentik æ•°æ®åº“é—®é¢˜</li>
<li><strong>é…ç½®é”™è¯¯</strong> - é…ç½®ä¸­çš„é”™å­—ç ´åéªŒè¯</li>
<li><strong>è¯ä¹¦è¿‡æœŸ</strong> - HTTPS è¯ä¹¦è¿‡æœŸï¼ŒSSO æ— æ³•è®¿é—®</li>
<li><strong>ç½‘ç»œé—®é¢˜</strong> - DNS é—®é¢˜ã€åå‘ä»£ç†æ•…éšœ</li>
<li><strong>æ„å¤–åˆ é™¤</strong> - å“å‘€ï¼Œåˆ é™¤äº†é”™è¯¯çš„å®¹å™¨</li>
</ol>
<p><strong>æ²¡æœ‰æœ¬åœ°è´¦æˆ·ä¼šå‘ç”Ÿä»€ä¹ˆï¼š</strong></p>
<pre class="language-none"><code class="language-none">SSO æ•…éšœ â†’ æ— æ³•ç™»å½•ä»»ä½•å†…å®¹ â†’ ç”šè‡³æ— æ³•è®¿é—® SSO è¿›è¡Œä¿®å¤ â†’ è¢«é”å®š</code></pre>
<p><strong>æœ‰æœ¬åœ°è´¦æˆ·ä½œä¸ºå¤‡ä»½ï¼š</strong></p>
<pre class="language-none"><code class="language-none">SSO æ•…éšœ â†’ ä½¿ç”¨æœ¬åœ°ç®¡ç†å‘˜è´¦æˆ· â†’ ä¿®å¤ SSO â†’ æ¢å¤æ­£å¸¸</code></pre>
<h3 id="æœ¬åœ°è´¦æˆ·çš„æœ€ä½³å®è·µ">æœ¬åœ°è´¦æˆ·çš„æœ€ä½³å®è·µ</h3>
<div class="admonition danger"><p class="admonition-title"><span class="mdi mdi-alert-circle-outline admonition-icon"></span>ğŸ”’ å…³é”®ï¼šä¿æŠ¤ä½ çš„æœ¬åœ°è´¦æˆ·</p><div class="admonition-content"><p>æœ¬åœ°è´¦æˆ·ç»•è¿‡ SSOï¼Œå› æ­¤å¿…é¡»å—åˆ°ä¿æŠ¤ï¼š</p>
<ul>
<li><strong>å¼ºå¯†ç </strong> - ä½¿ç”¨å¯†ç ç®¡ç†å™¨ï¼Œ20+ ä¸ªå­—ç¬¦</li>
<li><strong>åœ¨æœ¬åœ°è´¦æˆ·ä¸Šå¯ç”¨ MFA</strong> - è®¸å¤šæœåŠ¡æ”¯æŒæ­¤åŠŸèƒ½</li>
<li><strong>é™åˆ¶æœ¬åœ°è´¦æˆ·</strong> - ä»…ä¸ºç®¡ç†å‘˜/ç´§æ€¥è®¿é—®åˆ›å»º</li>
<li><strong>ä¸åŒçš„å¯†ç </strong> - ä¸è¦é‡å¤ä½¿ç”¨ SSO å¯†ç </li>
<li><strong>è®°å½•å‡­è¯</strong> - å®‰å…¨å­˜å‚¨ï¼ˆå¯†ç ç®¡ç†å™¨ã€åŠ å¯†æ–‡ä»¶ï¼‰</li>
</ul>
</div></div>
<h3 id="æ”¯æŒæœ¬åœ°è´¦æˆ·-MFA-çš„æœåŠ¡">æ”¯æŒæœ¬åœ°è´¦æˆ· MFA çš„æœåŠ¡</h3>
<p><strong>Proxmoxï¼š</strong></p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä¸ºæœ¬åœ° root è´¦æˆ·å¯ç”¨ TOTP</span>
<span class="token comment"># æ•°æ®ä¸­å¿ƒ â†’ æƒé™ â†’ åŒå› ç´ </span>
<span class="token comment"># ä¸ºç”¨æˆ· root@pam æ·»åŠ  TOTP</span></code></pre>
<p><strong>Nextcloudï¼š</strong></p>
<ul>
<li>è®¾ç½® â†’ å®‰å…¨æ€§ â†’ åŒå› ç´ éªŒè¯</li>
<li>å³ä½¿å¯¹æœ¬åœ°ç®¡ç†å‘˜è´¦æˆ·ä¹Ÿå¯ç”¨ TOTP</li>
</ul>
<p><strong>Grafanaï¼š</strong></p>
<pre class="language-ini" data-language="ini"><code class="language-ini"><span class="token comment"># grafana.ini</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">auth</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">login_maximum_inactive_lifetime_duration</span> <span class="token punctuation">=</span> <span class="token value attr-value">7d</span>
<span class="token key attr-name">login_maximum_lifetime_duration</span> <span class="token punctuation">=</span> <span class="token value attr-value">30d</span>

<span class="token comment"># æœ¬åœ°ç®¡ç†å‘˜ä»å¯é€šè¿‡éªŒè¯å™¨åº”ç”¨ç¨‹åºä½¿ç”¨ MFA</span></code></pre>
<p><strong>Home Assistantï¼š</strong></p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># configuration.yaml</span>
<span class="token key atrule">auth_providers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> homeassistant  <span class="token comment"># æœ¬åœ°è´¦æˆ·</span>
  <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> command_line   <span class="token comment"># SSO é›†æˆ</span>

<span class="token comment"># åœ¨ UI ä¸­ä¸ºæœ¬åœ°è´¦æˆ·å¯ç”¨ MFAï¼š</span>
<span class="token comment"># ä¸ªäººèµ„æ–™ â†’ å®‰å…¨æ€§ â†’ å¤šå› ç´ éªŒè¯</span></code></pre>
<h3 id="é…ç½®ç­–ç•¥">é…ç½®ç­–ç•¥</h3>
<p><strong>é€‰é¡¹ 1ï¼šåŒé‡éªŒè¯ï¼ˆæ¨èï¼‰</strong></p>
<p>å…è®¸ SSO å’Œæœ¬åœ°ç™»å½•ï¼š</p>
<pre class="language-php" data-language="php"><code class="language-php"><span class="token comment">// Nextcloud - ä¸éšè—å¯†ç è¡¨å•</span>
<span class="token string single-quoted-string">'oidc_login_hide_password_form'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// ä¿æŒæœ¬åœ°ç™»å½•å¯è§</span>
<span class="token string single-quoted-string">'oidc_login_auto_redirect'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span>       <span class="token comment">// ä¸å¼ºåˆ¶ SSO</span></code></pre>
<p><strong>é€‰é¡¹ 2ï¼šéšè—æœ¬åœ°ç™»å½•</strong></p>
<p>éšè—æœ¬åœ°ç™»å½•ä½†é€šè¿‡ç›´æ¥ URL ä¿æŒå¯è®¿é—®ï¼š</p>
<pre class="language-php" data-language="php"><code class="language-php"><span class="token comment">// Nextcloud - éšè—ä½†ä¿æŒåŠŸèƒ½</span>
<span class="token string single-quoted-string">'oidc_login_hide_password_form'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>   <span class="token comment">// éšè—æœ¬åœ°ç™»å½•</span>
<span class="token comment">// è®¿é—®æœ¬åœ°ç™»å½•ï¼šhttps://nextcloud.local/login?direct=1</span></code></pre>
<p><strong>é€‰é¡¹ 3ï¼šä»… SSO åŠ ç´§æ€¥è´¦æˆ·</strong></p>
<p>å¯¹æ‰€æœ‰äººå¼ºåˆ¶ SSOï¼Œé™¤äº†ä¸€ä¸ªç´§æ€¥ç®¡ç†å‘˜ï¼š</p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Authelia - ç´§æ€¥è®¿é—®ç»•è¿‡ SSO</span>
<span class="token key atrule">access_control</span><span class="token punctuation">:</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">domain</span><span class="token punctuation">:</span> <span class="token string">"*.homelab.local"</span>
      <span class="token key atrule">policy</span><span class="token punctuation">:</span> bypass
      <span class="token key atrule">subject</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token string">"user:emergency-admin"</span>
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token string">"^/admin/emergency.*$"</span></code></pre>
<h3 id="ç´§æ€¥è®¿é—®æ£€æŸ¥æ¸…å•">ç´§æ€¥è®¿é—®æ£€æŸ¥æ¸…å•</h3>
<ul>
<li>[ ] <strong>æ¯ä¸ªå…³é”®æœåŠ¡ä¸Šéƒ½å­˜åœ¨æœ¬åœ°ç®¡ç†å‘˜è´¦æˆ·</strong></li>
<li>[ ] <strong>æ‰€æœ‰æœ¬åœ°è´¦æˆ·éƒ½æœ‰å¼ºå”¯ä¸€å¯†ç </strong></li>
<li>[ ] <strong>åœ¨æ”¯æŒçš„æœ¬åœ°è´¦æˆ·ä¸Šå¯ç”¨ MFA</strong></li>
<li>[ ] <strong>å‡­è¯è®°å½•åœ¨å®‰å…¨ä½ç½®</strong>ï¼ˆå¯†ç ç®¡ç†å™¨ï¼‰</li>
<li>[ ] <strong>æ¯æœˆæµ‹è¯•æœ¬åœ°ç™»å½•</strong>ä»¥ç¡®ä¿å…¶å·¥ä½œ</li>
<li>[ ] <strong>è®°å½•æ¢å¤ç¨‹åº</strong> - å¦‚ä½•ä¿®å¤ SSO</li>
<li>[ ] <strong>SSO é…ç½®çš„å¤‡ä»½</strong> - å¯ä»¥å¿«é€Ÿæ¢å¤</li>
</ul>
<div class="admonition tip"><p class="admonition-title"><span class="mdi mdi-lightbulb-on-outline admonition-icon"></span>ğŸ’¡ é»„é‡‘æ³•åˆ™</p><div class="admonition-content"><p><strong>å§‹ç»ˆç»´æŠ¤å®‰å…¨çš„åé—¨ï¼š</strong></p>
<ul>
<li>SSO æ˜¯ä½ çš„å‰é—¨ï¼ˆæ–¹ä¾¿ã€å®‰å…¨ï¼‰</li>
<li>æœ¬åœ°è´¦æˆ·æ˜¯ä½ çš„ç´§æ€¥å‡ºå£ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼Œå§‹ç»ˆå¯ç”¨ï¼‰</li>
<li>ä¸¤è€…éƒ½åº”ä½¿ç”¨ MFA ä¿æŠ¤</li>
<li>å®šæœŸæµ‹è¯•ä¸¤è€…</li>
</ul>
<p>æŠŠå®ƒæƒ³è±¡æˆåœ¨æˆ¿å­å¤–é¢è—ä¸€æŠŠå¤‡ç”¨é’¥åŒ™ - ä½ å¾ˆå°‘éœ€è¦å®ƒï¼Œä½†å½“ä½ éœ€è¦æ—¶ï¼Œä½ ä¼šå¾ˆé«˜å…´å®ƒåœ¨é‚£é‡Œï¼</p>
</div></div>
<h2 id="èµ„æº-2">èµ„æº</h2>
<ul>
<li>**<a target="_blank" rel="noopener" href="https://www.authelia.com/">Authelia æ–‡æ¡£</a>ï¼š**å®Œæ•´çš„ Authelia æŒ‡å—</li>
<li>**<a target="_blank" rel="noopener" href="https://goauthentik.io/docs/">Authentik æ–‡æ¡£</a>ï¼š**Authentik è®¾ç½®å’Œé…ç½®</li>
<li>**<a target="_blank" rel="noopener" href="https://www.keycloak.org/documentation">Keycloak æ–‡æ¡£</a>ï¼š**ä¼ä¸š SSO æŒ‡å—</li>
<li>**<a target="_blank" rel="noopener" href="https://openid.net/connect/">OIDC è¯´æ˜</a>ï¼š**ç†è§£ OpenID Connect</li>
</ul>
<h2 id="ç»“è®º-2">ç»“è®º</h2>
<p>åœ¨å®¶ä¸­è®¾ç½® SSO å°†ä½ çš„å®¶åº­å®éªŒå®¤ä»ä¸€ç³»åˆ—ç‹¬ç«‹æœåŠ¡è½¬å˜ä¸ºç»Ÿä¸€å¹³å°ã€‚åˆå§‹è®¾ç½®æŠ•èµ„ç«‹å³é€šè¿‡ä¾¿åˆ©æ€§å’Œæ”¹è¿›çš„å®‰å…¨æ€§å¾—åˆ°å›æŠ¥ã€‚</p>
<p><strong>å…³é”®è¦ç‚¹ï¼š</strong></p>
<ul>
<li>SSO æ¶ˆé™¤äº†å¤šä¸ªæœåŠ¡çš„å¯†ç ç–²åŠ³</li>
<li><strong>Authelia æœ€é€‚åˆç®€å•è®¾ç½®</strong>ï¼Œé…åˆåå‘ä»£ç†</li>
<li><strong>Authentik æä¾›å®Œæ•´åŠŸèƒ½</strong>ï¼Œé…æœ‰ç¾è§‚çš„ UI</li>
<li>è½¬å‘éªŒè¯ä¿æŠ¤ä»»ä½•æœåŠ¡</li>
<li>MFA æ·»åŠ å…³é”®å®‰å…¨å±‚</li>
<li>LDAP é›†æˆå¯æ‰©å±•ç”¨äºæ›´å¤§çš„éƒ¨ç½²</li>
<li>å®šæœŸå¤‡ä»½è‡³å…³é‡è¦ï¼ˆSSO æ˜¯å•ç‚¹æ•…éšœï¼‰</li>
<li><strong>å®¶åº­å®éªŒå®¤ SSO é™äºè‡ªæ‰˜ç®¡æœåŠ¡</strong> - SaaS é›†æˆéœ€è¦æ˜‚è´µçš„ä¼ä¸šè®¡åˆ’</li>
<li>è”åˆï¼ˆOIDC/SAMLï¼‰å®ç°è·¨ç³»ç»Ÿ SSOï¼Œä½† WIA æ˜¯éè”åˆçš„</li>
</ul>
<p><strong>å¿«é€Ÿå…¥é—¨å»ºè®®ï¼š</strong></p>
<p>å¯¹äºå¤§å¤šæ•°å®¶åº­å®éªŒå®¤ï¼š</p>
<ol>
<li>ä» <strong>Authelia</strong> + Traefik å¼€å§‹ï¼ˆæœ€ç®€å•çš„è·¯å¾„ï¼‰</li>
<li>æœ€åˆä½¿ç”¨åŸºäºæ–‡ä»¶çš„èº«ä»½éªŒè¯</li>
<li>ä¸ºç®¡ç†å‘˜è´¦æˆ·æ·»åŠ  MFA</li>
<li>é€æ­¥å°†æœåŠ¡è¿ç§»åˆ° SSO</li>
<li>å¦‚æœä»¥åéœ€è¦ OIDC/SAMLï¼Œè€ƒè™‘ Authentik</li>
</ol>
<p>ä» 2-3 ä¸ªæœåŠ¡å¼€å§‹ï¼Œç†Ÿæ‚‰æµç¨‹ï¼Œç„¶åæ‰©å±•ã€‚å½“ä½ ä¸å†éœ€è¦å¤„ç†æ•°åä¸ªå¯†ç æ—¶ï¼Œæœªæ¥çš„ä½ ä¼šæ„Ÿè°¢ä½ ï¼ğŸ”</p>

        </div>
        <footer class="article-footer">
            
    <a data-url="https://neo01.com/zh-CN/2025/01/Single-Sign-On-at-Home/" data-id="1e977225" class="article-share-link"><i class="fa fa-share"></i>åˆ†äº«åˆ°</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url').replace("http://","https://"),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <!--script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "Neo Alienson"
        },
        "headline": "åœ¨å®¶ä¸­å»ºç«‹å•ç‚¹ç™»å½•ç³»ç»Ÿ",
        "image": "https://neo01.com",
        "keywords": "Authentication Cybersecurity Homelab",
        "genre": "Cybersecurity",
        "datePublished": "2025-01-15",
        "dateCreated": "2025-01-15",
        "dateModified": "2025-10-23",
        "url": "https://neo01.com//zh-CN/2025/01/Single-Sign-On-at-Home/",
        "description": "åŒå€¦äº†ç®¡ç†å®¶åº­å®éªŒå®¤æœåŠ¡çš„æ•°åä¸ªå¯†ç ï¼Ÿå­¦ä¹ å¦‚ä½•å»ºç«‹å•ç‚¹ç™»å½•ç³»ç»Ÿï¼Œåªéœ€ä¸€æ¬¡ç™»å½•å³å¯è®¿é—®æ‰€æœ‰æœåŠ¡ã€‚",
        "wordCount": 2506
    }
</script-->

</article>

                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>å…³æ³¨æˆ‘ :</p>
        <ul class="social-links">
                <li>
                    <a class="social-tooltip" title="stack-exchange" href="https://stackexchange.com/users/2122053/neo?tab=accounts" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-stack-exchange"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="stack-overflow" href="https://stackoverflow.com/users/1885105/neo" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-stack-overflow"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/neoalienson" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-github"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="linkedin" href="https://linkedin.com/in/neo01" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="rss" href="/atom.xml" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>
    <div class="widgets-container">
        
            
                <div class="widget-wrap widget-list">
    <h3 class="widget-title">é“¾æ¥</h3>
    <div class="widget">
        <ul><li><a href="/zh-CN/ai">AI æ¸¸ä¹åœº</a></li><li><a href="/zh-CN/tools">å·¥å…·</a></li><li><a href="/zh-CN/games">æ¸¸æˆ</a></li><li><a href="/zh-CN/pages/useful-information">å®ç”¨ä¿¡æ¯</a></li><li><a href="/zh-CN/pages/Hexo-Blogging-Cheatsheet">Hexo åšå®¢é€ŸæŸ¥è¡¨</a></li></ul>
    </div>
</div>

            
                
            
                    <div class="widget-wrap">
        <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
        <div class="widget">
            <ul id="recent-post" class="">
                    <li>
                        <div class="item-thumbnail">
                            <a href="/zh-CN/2025/10/CISP-Advanced-Security-Topics/" class="thumbnail">
        <span style="background-image:url(/assets/cisp/thumbnail_80.png)" alt="CISPå­¦ä¹ æŒ‡å—ï¼šé«˜çº§å®‰å…¨ä¸»é¢˜" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/zh-CN/categories/Cybersecurity/">ç½‘ç»œå®‰å…¨</a></p>
                            <p class="item-title"><a href="/zh-CN/2025/10/CISP-Advanced-Security-Topics/" class="title">CISPå­¦ä¹ æŒ‡å—ï¼šé«˜çº§å®‰å…¨ä¸»é¢˜</a></p>
                            <p class="item-date"><time datetime="2025-10-22T16:00:00.000Z" itemprop="datePublished">2025-10-23</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/zh-CN/2025/10/CISP-Email-Security/" class="thumbnail">
        <span style="background-image:url(/assets/cisp/thumbnail_80.png)" alt="CISPå­¦ä¹ æŒ‡å—ï¼šç”µå­é‚®ä»¶å®‰å…¨ä¸ç½‘ç»œåè®®" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/zh-CN/categories/Cybersecurity/">ç½‘ç»œå®‰å…¨</a></p>
                            <p class="item-title"><a href="/zh-CN/2025/10/CISP-Email-Security/" class="title">CISPå­¦ä¹ æŒ‡å—ï¼šç”µå­é‚®ä»¶å®‰å…¨ä¸ç½‘ç»œåè®®</a></p>
                            <p class="item-date"><time datetime="2025-10-22T16:00:00.000Z" itemprop="datePublished">2025-10-23</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/zh-CN/2025/10/CISP-Access-Control-Audit-WAPI/" class="thumbnail">
        <span style="background-image:url(/assets/cisp/thumbnail_80.png)" alt="CISPå­¦ä¹ æŒ‡å—ï¼šè®¿é—®æ§åˆ¶æœºåˆ¶ã€èœœç½‘ã€å®¡è®¡ç³»ç»Ÿä¸WAPI" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/zh-CN/categories/Cybersecurity/">ç½‘ç»œå®‰å…¨</a></p>
                            <p class="item-title"><a href="/zh-CN/2025/10/CISP-Access-Control-Audit-WAPI/" class="title">CISPå­¦ä¹ æŒ‡å—ï¼šè®¿é—®æ§åˆ¶æœºåˆ¶ã€èœœç½‘ã€å®¡è®¡ç³»ç»Ÿä¸WAPI</a></p>
                            <p class="item-date"><time datetime="2025-10-21T16:00:00.000Z" itemprop="datePublished">2025-10-22</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/zh-CN/2025/10/CISP-China-Information-Security-Laws/" class="thumbnail">
        <span style="background-image:url(/assets/cisp/thumbnail_80.png)" alt="CISPå­¦ä¹ æŒ‡å—ï¼šä¸­å›½ä¿¡æ¯å®‰å…¨æ³•å¾‹æ³•è§„ä½“ç³»" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/zh-CN/categories/Cybersecurity/">ç½‘ç»œå®‰å…¨</a></p>
                            <p class="item-title"><a href="/zh-CN/2025/10/CISP-China-Information-Security-Laws/" class="title">CISPå­¦ä¹ æŒ‡å—ï¼šä¸­å›½ä¿¡æ¯å®‰å…¨æ³•å¾‹æ³•è§„ä½“ç³»</a></p>
                            <p class="item-date"><time datetime="2025-10-21T16:00:00.000Z" itemprop="datePublished">2025-10-22</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/zh-CN/2025/10/CISP-Firewall-IDS-Technologies/" class="thumbnail">
        <span style="background-image:url(/assets/cisp/thumbnail_80.png)" alt="CISPå­¦ä¹ æŒ‡å—ï¼šé˜²ç«å¢™ä¸å…¥ä¾µæ£€æµ‹æŠ€æœ¯" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/zh-CN/categories/Cybersecurity/">ç½‘ç»œå®‰å…¨</a></p>
                            <p class="item-title"><a href="/zh-CN/2025/10/CISP-Firewall-IDS-Technologies/" class="title">CISPå­¦ä¹ æŒ‡å—ï¼šé˜²ç«å¢™ä¸å…¥ä¾µæ£€æµ‹æŠ€æœ¯</a></p>
                            <p class="item-date"><time datetime="2025-10-21T16:00:00.000Z" itemprop="datePublished">2025-10-22</time></p>
                        </div>
                    </li>
            </ul>
        </div>
    </div>

            
                
    
    
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">å½’æ¡£</h3>
        <div class="widget">
            <ul class="archive-list">
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2025/">2025</a>
                    <span class="archive-list-count">72</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2024/">2024</a>
                    <span class="archive-list-count">25</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2023/">2023</a>
                    <span class="archive-list-count">15</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2022/">2022</a>
                    <span class="archive-list-count">7</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2021/">2021</a>
                    <span class="archive-list-count">12</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2020/">2020</a>
                    <span class="archive-list-count">13</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2019/">2019</a>
                    <span class="archive-list-count">12</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2018/">2018</a>
                    <span class="archive-list-count">2</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2017/">2017</a>
                    <span class="archive-list-count">5</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2016/">2016</a>
                    <span class="archive-list-count">4</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2015/">2015</a>
                    <span class="archive-list-count">6</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2014/">2014</a>
                    <span class="archive-list-count">7</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2013/">2013</a>
                    <span class="archive-list-count">2</span>
                </li>
            
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <!-- disable caching cause each page has different footer from qrcode -->
        <!-- common/footer, null, {cache: !config.relative_link})  -->
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="qrcode-share-wrapper">
                <div class="qrcode-text">https://neo01.com/l#4cfae21d</div>
                <img src="/qr/qr-ed9832fdc81f5c668dfcc12c1bab0b26.svg" width="200" height="200" alt="QR Code for https://neo01.com/l#4cfae21d">
            </div>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" title="Homepage" class="logo"></a>
                </h1>
                
                <p>Â© 2025 Neo Alienson. ç‰ˆæƒæ‰€æœ‰.
                  <a href="/zh-CN/terms-and-conditions">ä½¿ç”¨æ¡æ¬¾</a></p>
                
            </div>
            <div class="footer-plugins">
              


            </div>
        </div>
    </div>
</footer>

        
    
        


        


        


        


        


        


        


        


        


    



<!-- Custom Scripts -->




    </div>
<!-- hexo injector body_end start --><script type="text/javascript" src="/js/bundle_last.js"></script><!-- hexo injector body_end end -->

</body></html>