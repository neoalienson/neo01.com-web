<!DOCTYPE html><html lang="zh-CN"><head><!-- hexo injector head_begin start --><!-- Google tag (gtag.js) begins-->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3DZR3TQYCY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-3DZR3TQYCY');
    </script>
    <!-- Google tag (gtag.js) ends-->
    <!-- hexo injector head_begin end -->
    <meta charset="utf-8">
    <!-- security headers starts -->
    <!-- meta http-equiv="content-security-policy" content="script-src 'sha256-B5nfCL2Dym3Ba4YJFI7wB3f4vtClbrYJZ32A5erBEdg=' 'sha256-lJjk3/dvd+wXqRFjV7T5L/nXJXr5NjUjmsKSPEe+ass=';" -->
    <!-- security headers ends -->
    <!-- favicon starts -->    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <!-- favicon ends -->
    

    <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="alternate" href="/atom.xml" title="Decoding Digital Anomalies" type="application/atom+xml">
    

    

    

    

    

    

    

    
    
        


    
    
        


    



    
    <title>领域驱动设计：连接业务与代码 | Decoding Digital Anomalies</title>
    
    <meta name="keywords" content="DDD,Design Patterns,Software Architecture">
    
    
    <meta name="description" content="领域驱动设计承诺软件能说业务语言，但从数据库中心到领域中心架构的旅程，揭示了建模复杂性如何超越 CRUD 操作而演进。">
<meta property="og:type" content="article">
<meta property="og:title" content="领域驱动设计：连接业务与代码">
<meta property="og:url" content="https://neo01.com/zh-CN/2003/12/Domain-Driven-Design-Bridging-Business-and-Code/index.html">
<meta property="og:site_name" content="Decoding Digital Anomalies">
<meta property="og:description" content="领域驱动设计承诺软件能说业务语言，但从数据库中心到领域中心架构的旅程，揭示了建模复杂性如何超越 CRUD 操作而演进。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2003-12-01T16:00:00.000Z">
<meta property="article:modified_time" content="2025-11-26T15:16:54.546Z">
<meta property="article:author" content="Neo Alienson">
<meta property="article:tag" content="DDD">
<meta property="article:tag" content="Design Patterns">
<meta property="article:tag" content="Software Architecture">
<meta name="twitter:card" content="summary">
    
    <!-- hexo injector head_end start --><link rel="stylesheet" type="text/css" href="/css/bundle.css"><script type="text/javascript" src="/js/bundle_first.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 8.1.0">  <link rel="canonical" href="https://neo01.com/2003/12/Domain-Driven-Design-Bridging-Business-and-Code/">
  <link rel="alternate" hreflang="en" data-canonical="true" href="https://neo01.com/2003/12/Domain-Driven-Design-Bridging-Business-and-Code/">
  <link rel="alternate" hreflang="zh-TW" href="https://neo01.com/zh-TW/2003/12/Domain-Driven-Design-Bridging-Business-and-Code/">
  <link rel="alternate" hreflang="zh-CN" href="https://neo01.com/zh-CN/2003/12/Domain-Driven-Design-Bridging-Business-and-Code/">
<style id="admonition-styles">.admonition {
  margin: 1em 0;
  padding: 0rem;
  border-left: 0.3rem solid;
  border-radius: 0.4rem;
  background-color: #f9f9f9;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
  overflow: hidden;
  page-break-inside: avoid;
}

.admonition-title {
  display: flex;
  align-items: center;
  font-weight: 600;
  padding: 0rem 1rem 0.1rem 0.75rem;
  font-size: 1.05em;
  background-color: rgba(0, 0, 0, 0.03);
  border-top-left-radius: 0.4rem;
  border-top-right-radius: 0.4rem;
  margin: 0 !important;
}

.admonition-icon {
  font-size: 1.2em;
  margin-right: 0.6rem;
  opacity: 0.85;
  margin-top: 0.1rem;
}

/* 内容区域 margin */
.admonition > *:not(.admonition-title) {
  margin: 0.6rem 1rem 0.6rem 1rem;
}

/* NOTE 类型 */
.admonition.anote {
  border-color: #448aff;
}
.admonition.anote > .admonition-title {
  background-color: #448aff1a;
  color: #2962ff;
}

/* INFO / TODO 类型 */
.admonition.info,
.admonition.todo {
  border-color: #00b8d4;
}
.admonition.info > .admonition-title,
.admonition.todo > .admonition-title {
  background-color: rgba(0, 184, 212, 0.1);
  color: #007c91;
}

/* 警告类 */
.admonition.warning,
.admonition.attention,
.admonition.caution {
  border-color: #ff9100;
}
.admonition.warning > .admonition-title,
.admonition.attention > .admonition-title,
.admonition.caution > .admonition-title {
  background-color: rgba(255, 145, 0, 0.1);
  color: #c66900;
}

/* 错误类 */
.admonition.failure,
.admonition.missing,
.admonition.fail,
.admonition.error,
.admonition.danger,
.admonition.bug {
  border-color: #ff5252;
}
.admonition.failure > .admonition-title,
.admonition.missing > .admonition-title,
.admonition.fail > .admonition-title,
.admonition.error > .admonition-title,
.admonition.danger > .admonition-title,
.admonition.bug > .admonition-title {
  background-color: rgba(255, 82, 82, 0.1);
  color: #b71c1c;
}

/* TIP 类型 */
.admonition.tip {
  border-color: #00bfa5;
}
.admonition.tip > .admonition-title {
  background-color: #00bfa51a;
  color: #00796b;
}

/* SUCCESS 类型 */
.admonition.success {
  border-color: #00c853;
}
.admonition.success > .admonition-title {
  background-color: #00c8531a;
  color: #2e7d32;
}

/* QUESTION 类型 */
.admonition.question {
  border-color: #64dd17;
}
.admonition.question > .admonition-title {
  background-color: #64dd171a;
  color: #558b2f;
}

/* EXAMPLE 类型 */
.admonition.example {
  border-color: #7c4dff;
}
.admonition.example > .admonition-title {
  background-color: #7c4dff1a;
  color: #512da8;
}

/* QUOTE 类型 */
.admonition.quote {
  border-color: #9e9e9e;
}
.admonition.quote > .admonition-title {
  background-color: #9e9e9e1a;
  color: #424242;
}

/*黑暗模式*/
/* 夜间模式基础样式 */
[data-theme="dark"] .admonition {
  background-color: #1e1e1e;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
}

[data-theme="dark"] .admonition-title {
  background-color: rgba(255, 255, 255, 0.05);
}

/* anote */
[data-theme="dark"] .admonition.anote {
  border-color: #82b1ff;
}
[data-theme="dark"] .admonition.anote > .admonition-title {
  background-color: #82b1ff1a;
  color: #bbdefb;
}

/* tip */
[data-theme="dark"] .admonition.tip {
  border-color: #64ffda;
}
[data-theme="dark"] .admonition.tip > .admonition-title {
  background-color: #64ffda1a;
  color: #1de9b6;
}

/* success */
[data-theme="dark"] .admonition.success {
  border-color: #69f0ae;
}
[data-theme="dark"] .admonition.success > .admonition-title {
  background-color: #69f0ae1a;
  color: #00e676;
}

/* question */
[data-theme="dark"] .admonition.question {
  border-color: #b2ff59;
}
[data-theme="dark"] .admonition.question > .admonition-title {
  background-color: #b2ff591a;
  color: #aeea00;
}

/* example */
[data-theme="dark"] .admonition.example {
  border-color: #b388ff;
}
[data-theme="dark"] .admonition.example > .admonition-title {
  background-color: #b388ff1a;
  color: #b39ddb;
}

/* quote */
[data-theme="dark"] .admonition.quote {
  border-color: #bdbdbd;
}
[data-theme="dark"] .admonition.quote > .admonition-title {
  background-color: #bdbdbd1a;
  color: #eeeeee;
}

/* warning / attention / caution */
[data-theme="dark"] .admonition.warning,
[data-theme="dark"] .admonition.attention,
[data-theme="dark"] .admonition.caution {
  border-color: #ffb300;
}
[data-theme="dark"] .admonition.warning > .admonition-title,
[data-theme="dark"] .admonition.attention > .admonition-title,
[data-theme="dark"] .admonition.caution > .admonition-title {
  background-color: #ffb3001a;
  color: #ffe082;
}

/* error / fail / failure / bug / danger / missing */
[data-theme="dark"] .admonition.error,
[data-theme="dark"] .admonition.fail,
[data-theme="dark"] .admonition.failure,
[data-theme="dark"] .admonition.bug,
[data-theme="dark"] .admonition.missing,
[data-theme="dark"] .admonition.danger {
  border-color: #ef5350;
}
[data-theme="dark"] .admonition.error > .admonition-title,
[data-theme="dark"] .admonition.fail > .admonition-title,
[data-theme="dark"] .admonition.failure > .admonition-title,
[data-theme="dark"] .admonition.bug > .admonition-title,
[data-theme="dark"] .admonition.missing > .admonition-title,
[data-theme="dark"] .admonition.danger > .admonition-title {
  background-color: #ef53501a;
  color: #ff8a80;
}</style><style>
        .mermaid-wrapper{position:relative;width:100%;overflow:hidden;user-select:none}
        .mermaid-wrapper.fullscreen{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9999;background:#fff}
        .mermaid-wrapper.fullscreen .mermaid-controls{margin-right:20px}
        .mermaid-controls{position:absolute;bottom:8px;right:8px;display:flex;gap:4px;z-index:10;cursor:move}
        .mermaid-controls button{width:32px;height:32px;border:none;background:rgba(255,255,255,0.9);border-radius:4px;cursor:pointer;font-size:16px;box-shadow:0 2px 4px rgba(0,0,0,0.2)}
        .mermaid-controls button:hover{background:#fff}
    </style><script id="mermaid-scripts" src="/cache/mermaid.min.local.js"></script>
<script>mermaid.initialize({theme: 'default'});</script>
<script>(function(){
        document.addEventListener('DOMContentLoaded',function(){
            setTimeout(function(){
                document.querySelectorAll('.mermaid').forEach(function(el){
                    const w=document.createElement('div');
                    w.className='mermaid-wrapper';
                    el.parentNode.insertBefore(w,el);
                    w.appendChild(el);
                    const c=document.createElement('div');
                    c.className='mermaid-controls';
                    const zi=document.createElement('button');zi.innerHTML='🔍';zi.title='Zoom In';zi.dataset.action='zoom-in';c.appendChild(zi);const zo=document.createElement('button');zo.innerHTML='🔎';zo.title='Zoom Out';zo.dataset.action='zoom-out';c.appendChild(zo);const r=document.createElement('button');r.innerHTML='↺';r.title='Reset';r.dataset.action='reset';c.appendChild(r);const d=document.createElement('button');d.innerHTML='💾';d.title='Download SVG';d.dataset.action='download';c.appendChild(d);const f=document.createElement('button');f.innerHTML='⛶';f.title='Fullscreen';f.dataset.action='fullscreen';c.appendChild(f);let sc=1,tx=0,ty=0;c.addEventListener('click',function(e){
        const btn=e.target.closest('button');if(!btn)return;
        const s=el.querySelector('svg');if(!s)return;
        const action=btn.dataset.action;
        if(action==='zoom-in'){
            sc=sc*1.2;
            s.style.transform='scale('+sc+')';s.style.transformOrigin='top left'
        }else if(action==='zoom-out'){
            sc=sc/1.2;
            s.style.transform='scale('+sc+')';s.style.transformOrigin='top left'
        }else if(action==='reset'){
            sc=1;tx=0;ty=0;s.style.transform='';s.style.transformOrigin='top left'
        }else if(action==='download'){
            const clone=s.cloneNode(true);clone.removeAttribute('style');
            const svg=clone.outerHTML.replace(/<br\s*\/?>/gi,'').replace(/<\/p>/gi,'').replace(/&nbsp;/gi,'&#160;');
            const b=new Blob([svg],{type:'image/svg+xml'});const u=URL.createObjectURL(b);
            const a=document.createElement('a');a.href=u;a.download='mermaid-diagram.svg';a.click();URL.revokeObjectURL(u)
        }else if(action==='fullscreen'){
            if(w.classList.contains('fullscreen')){
                w.classList.remove('fullscreen');btn.innerHTML='⛶';btn.title='Fullscreen';
                c.style.top='';c.style.left='';c.style.right='';c.style.bottom='';c.style.marginRight=''
            }else{
                w.classList.add('fullscreen');btn.innerHTML='✕';btn.title='Close';
                c.style.top='';c.style.left='';c.style.right='';c.style.bottom='';c.style.marginRight=''
            }
        }
    });let dx=0,dy=0,px=0,py=0;
            c.onmousedown=(e)=>{e.preventDefault();px=e.clientX;py=e.clientY;
            document.onmousemove=(e)=>{e.preventDefault();dx=px-e.clientX;dy=py-e.clientY;px=e.clientX;py=e.clientY;
            c.style.top=(c.offsetTop-dy)+'px';c.style.left=(c.offsetLeft-dx)+'px';c.style.right='auto';c.style.bottom='auto'};
            document.onmouseup=()=>{document.onmousemove=null;document.onmouseup=null}};w.appendChild(c);const s=el.querySelector('svg');if(s){
            w.style.cursor='grab';s.style.userSelect='none';s.style.position='relative';
            let px=0,py=0,dragging=false;
            w.addEventListener('mousedown',function(e){
                if(e.target.closest('.mermaid-controls')||e.target.closest('button'))return;
                dragging=true;w.style.cursor='grabbing';e.preventDefault();px=e.clientX;py=e.clientY;
                const t=s.style.transform.match(/translate\(([\d.-]+)px,\s*([\d.-]+)px\)/);
                if(t){tx=parseFloat(t[1]);ty=parseFloat(t[2])}else{tx=0;ty=0}});
            document.addEventListener('mousemove',function(e){
                if(!dragging)return;e.preventDefault();
                const dx=e.clientX-px;const dy=e.clientY-py;const nt=tx+dx;const nty=ty+dy;
                const scaleStr=sc!==1?' scale('+sc+')':'';
                s.style.transform='translate('+nt+'px, '+nty+'px)'+scaleStr;s.style.transformOrigin='top left'})
            document.addEventListener('mouseup',function(){
                if(dragging){
                    const t=s.style.transform.match(/translate\(([\d.-]+)px,\s*([\d.-]+)px\)/);
                    if(t){tx=parseFloat(t[1]);ty=parseFloat(t[2])}else{tx=0;ty=0}
                    dragging=false;w.style.cursor='grab'}})}
                })
            },100)
        })
    })();</script></head>

<body>
    <div id="wrap">
        
        
<header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <div class="logo"></div>
                    </h1>

                        <h2 class="subtitle-wrap">
                            <p class="title">解码数字异常</p>
                          <p class="subtitle">有时功能就是数字兔子洞中的错误，反之亦然</p>
                        </h2>




                    <div id="lang-selector">
                        <span class="lang-icon">🌐</span>
                        
                            <a href="#" class="lang-link" data-lang="en">English</a>
<span class="lang-sep">|</span>                            <a href="#" class="lang-link" data-lang="zh-TW">繁體中文</a>
                        <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            var currentLang = 'zh-CN';
                            var currentPath = window.location.pathname;
                            var basePath;
                            
                            if (currentLang === 'en') {
                                basePath = currentPath;
                            } else {
                                basePath = currentPath.replace(new RegExp('^/' + currentLang + '/'), '/');
                            }
                            
                            document.querySelectorAll('.lang-link').forEach(function(link) {
                                var targetLang = link.getAttribute('data-lang');
                                var targetPath;
                                if (targetLang === 'en') {
                                    targetPath = basePath;
                                } else {
                                    targetPath = '/' + targetLang + basePath;
                                }
                                link.href = targetPath;
                            });
                        });
                        </script>
                    </div>


                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/zh-CN/">主页</a>
                                </li>
                                                                    <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/zh-CN/categories/AI/">人工智能</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/zh-CN/categories/AI/Art-Gallery/">艺术画廊</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/zh-CN/categories/Architecture/">架构</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/zh-CN/categories/Cybersecurity/">网络安全</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/zh-CN/categories/Development/">开发</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/zh-CN/categories/Misc/">杂项</a></li></ul>
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/zh-CN/about-me/">关于</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" id="search-form-input" placeholder="搜索">
        <button type="submit" title="搜索" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" id="ins-search-input" placeholder="想要查找什么...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script integrity="sha256-B5nfCL2Dym3Ba4YJFI7wB3f4vtClbrYJZ32A5erBEdg=">
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
        LANG: 'zh-CN',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>




</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

        
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Architecture/">Architecture</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-2003/12/Domain-Driven-Design-Bridging-Business-and-Code-zh-CN" class="article article-single article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner responsive-content">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        领域驱动设计：连接业务与代码
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
      <i class="fa fa-calendar"></i>
        
          Created <time datetime="2003-12-01T16:00:00.000Z" itemprop="datePublished">2003-12-02</time>
          &nbsp;<i class="fa fa-calendar"></i>
          Updated <time datetime="2025-11-26T15:16:54.546Z" itemprop="datePublished">2025-11-26</time>
        
    </div>


                

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/zh-CN/tags/DDD/">DDD</a> <a class="tag-link" href="/zh-CN/tags/Software-Architecture/">Software Architecture</a> <a class="tag-link" href="/zh-CN/tags/Design-Patterns/">Design Patterns</a>
    </div>

            </div>
        
        
        
        <div class="article-entry" itemprop="articleBody">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E5%BF%83%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">数据库中心的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80"><span class="toc-text">领域驱动设计基础</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%98%E7%95%A5%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-text">战略设计模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%98%E6%9C%AF%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-text">战术设计模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9C%9F%E5%AE%9E%E4%B8%96%E7%95%8C%E5%BA%94%E7%94%A8"><span class="toc-text">真实世界应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%AD%96%E7%95%A5"><span class="toc-text">实现策略</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DDD-%E4%B8%8E%E7%8E%B0%E4%BB%A3%E6%9E%B6%E6%9E%84"><span class="toc-text">DDD 与现代架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A1%E9%87%8F%E6%88%90%E5%8A%9F"><span class="toc-text">衡量成功</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-text">结论</span></a></li></ol>
            <p>软件项目失败不是因为糟糕的代码，而是因为误解的需求。开发者构建他们认为业务需要的东西。业务利益相关者描述他们认为技术上可行的东西。业务语言与技术实现之间的鸿沟造成摩擦、延迟，以及解决错误问题的系统。</p>
<p>传统软件开发将数据库视为宇宙的中心。设计从数据表和关联开始。业务逻辑散落在存储过程、服务层和 UI 代码中。领域——核心业务问题——成为事后想法，埋藏在技术关注点之下。</p>
<p>领域驱动设计（DDD）颠覆了这种方法。它将领域模型置于中心，将业务逻辑视为系统最重要的部分。技术关注点——数据库、框架、UI——成为服务领域的实现细节。业务和开发团队使用直接出现在代码中的共享语言进行协作。</p>
<p>这种转变听起来简单，但需要团队对软件思考方式的根本改变。DDD 引入了建模复杂业务逻辑的模式、管理大型系统的策略，以及保持代码与业务需求一致的实践。理解 DDD 何时增加价值——以及何时更简单的方法就足够——决定了它是成为强大的工具还是过度工程的负担。</p>
<p>本文追溯从数据库中心到领域中心设计的演进，探索 DDD 的核心模式和实践，检视真实世界的应用，并提供何时采用这种方法的指导。</p>
<h3 id="领域驱动设计时间轴">领域驱动设计时间轴</h3>
<div class="mermaid">timeline
    title 领域中心设计的演进
    section 1990s
        1994 : 设计模式
             : 四人帮模式
             : 面向对象设计原则
        1997 : 分析模式
             : Martin Fowler
             : 领域建模概念
    section 2000s
        2003 : 领域驱动设计
             : Eric Evans 蓝皮书
             : 战略与战术模式
        2004 : DDD 社区
             : 早期采用者
             : 模式精炼
        2006 : CQRS 模式
             : Greg Young
             : 命令查询分离
    section 2010s
        2013 : 实现 DDD
             : Vaughn Vernon 红皮书
             : 实用指导
        2014 : Event Storming
             : Alberto Brandolini
             : 协作建模
        2016 : 微服务 + DDD
             : 限界上下文即服务
             : 分布式领域模型</div>
<h2 id="数据库中心的问题">数据库中心的问题</h2>
<p>在 DDD 之前，大多数企业应用程序遵循数据库中心的方法，造成了根本性的问题。</p>
<h3 id="传统数据库优先设计">传统数据库优先设计</h3>
<p>典型的开发流程从数据库开始：</p>
<div class="admonition error"><p class="admonition-title"><span class="mdi mdi-alert-circle-outline admonition-icon"></span>🚫 数据库中心的问题</p><div class="admonition-content"><p><strong>设计流程</strong></p>
<ul>
<li>从数据库架构开始</li>
<li>创建数据表和关联</li>
<li>生成数据访问代码</li>
<li>在上面添加业务逻辑</li>
</ul>
<p><strong>问题</strong></p>
<ul>
<li>数据库结构驱动设计</li>
<li>业务逻辑散落各处</li>
<li>贫血领域模型（只有 getter/setter）</li>
<li>技术关注点主导</li>
</ul>
<p><strong>后果</strong></p>
<ul>
<li>代码不反映业务概念</li>
<li>变更需要数据库迁移</li>
<li>业务规则隐藏在多个层次中</li>
<li>难以理解和维护</li>
</ul>
</div></div>
<p>在这种方法中，开发者首先设计规范化的数据库数据表。对象关系映射（ORM）工具从数据表生成类。业务逻辑被添加到任何方便的地方——存储过程、服务层、控制器或 UI 代码。结果系统没有清晰的业务概念表示。</p>
<p>典型的电子商务系统可能有 Order、OrderItem 和 Customer 数据表。Order 类成为具有 getter 和 setter 的数据容器。像"订单超过 $100 免运费"这样的业务规则散落在代码库中。找到业务规则的实现位置需要搜索多个文件。</p>
<h3 id="贫血领域模型反模式">贫血领域模型反模式</h3>
<p>数据库中心设计产生贫血领域模型：</p>
<div class="admonition error"><p class="admonition-title"><span class="mdi mdi-alert-circle-outline admonition-icon"></span>🚫 贫血领域模型</p><div class="admonition-content"><p><strong>特征</strong></p>
<ul>
<li>只有属性的类</li>
<li>领域对象中没有业务逻辑</li>
<li>服务包含所有行为</li>
<li>对象只是数据容器</li>
</ul>
<p><strong>为什么有问题</strong></p>
<ul>
<li>违反面向对象原则</li>
<li>业务逻辑与数据分离</li>
<li>难以维护不变性</li>
<li>没有封装</li>
</ul>
</div></div>
<p><strong>贫血模型示例：</strong></p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OrderItem</span><span class="token punctuation">&gt;</span></span> items<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">BigDecimal</span> total<span class="token punctuation">;</span>
    
    <span class="token comment">// 只有 getter 和 setter</span>
    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> id<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">// ... 更多 getter/setter</span>
<span class="token punctuation">}</span></code></pre>
<p>贫血模型将对象视为数据结构而非行为实体。所有业务逻辑都存在于操作这些数据容器的服务类中。这种伪装成面向对象代码的过程式方法使系统更难理解和维护。</p>
<h4 id="为什么贫血模型在规模扩大时失败">为什么贫血模型在规模扩大时失败</h4>
<p>对大多数开发者来说看起来正常的东西，随着应用程序成长会变得有问题：</p>
<div class="admonition error"><p class="admonition-title"><span class="mdi mdi-alert-circle-outline admonition-icon"></span>🚫 违反面向对象原则</p><div class="admonition-content"><p><strong>问题</strong></p>
<p>面向对象程序设计承诺封装——数据和行为在一起。贫血模型通过分离它们来打破这个基本原则。</p>
<p><strong>贫血方法：</strong></p>
<p>Order 有数据，OrderService 有行为。这是将对象作为结构的过程式程序设计。</p>
<p><strong>随着系统成长：</strong></p>
<ul>
<li>多个服务操作相同数据</li>
<li>OrderService、ShippingService、BillingService 都修改 Order</li>
<li>Order 行为没有单一真相来源</li>
<li>服务间的重复逻辑</li>
<li>不一致的状态变更</li>
</ul>
<p><strong>实际影响：</strong></p>
<p>开发者 A 在 OrderService 中添加折扣逻辑。开发者 B 在 BillingService 中添加类似逻辑。六个月后，它们分歧了。错误报告进来：“结账和发票中的折扣计算不同。”找到所有操作 Order 的地方需要搜索整个代码库。</p>
</div></div>
<div class="admonition error"><p class="admonition-title"><span class="mdi mdi-alert-circle-outline admonition-icon"></span>🚫 业务逻辑与数据分离</p><div class="admonition-content"><p><strong>问题</strong></p>
<p>业务规则散落在多个服务类中，使它们难以找到和维护。</p>
<p><strong>示例场景：</strong></p>
<p>业务规则：“订单超过 $100 免运费，但仅适用于标准配送且仅限美国本土。”</p>
<p><strong>贫血实现：</strong></p>
<ul>
<li>ShippingService 中的运费计算</li>
<li>OrderService 中的订单总额计算</li>
<li>AddressService 中的地址验证</li>
<li>PromotionService 中的资格检查</li>
</ul>
<p><strong>随着系统成长：</strong></p>
<ul>
<li>规则变更需要更新 4 个不同文件</li>
<li>容易遗漏一个位置</li>
<li>测试散落在多个测试文件中</li>
<li>新开发者问：“免运费逻辑在哪里？”答案：“这很复杂...”</li>
</ul>
<p><strong>实际影响：</strong></p>
<p>业务将规则改为“订单超过 $100 或优质会员免运费。”开发者更新 ShippingService 但忘记 PromotionService。优质会员没有获得免运费。客户投诉。紧急修补。事后检讨揭示没人知道的逻辑重复。</p>
</div></div>
<div class="admonition error"><p class="admonition-title"><span class="mdi mdi-alert-circle-outline admonition-icon"></span>🚫 难以维护不变性</p><div class="admonition-content"><p><strong>问题</strong></p>
<p>不变性是必须始终为真的规则。贫血模型无法强制执行它们，因为任何代码都可以修改对象。</p>
<p><strong>示例不变性：</strong></p>
<p>“订单的总额必须等于其项目的总和。”</p>
<p><strong>贫血模型：</strong></p>
<p>Order 有 setTotal() 和 setItems()。没有什么能阻止：</p>
<p>order.setTotal(100.00);
order.setItems(itemsWorthFiftyDollars);</p>
<p>现在订单处于无效状态。总额与项目不符。</p>
<p><strong>随着系统成长：</strong></p>
<ul>
<li>更多代码路径修改订单</li>
<li>每个都必须记得重新计算总额</li>
<li>一个被遗忘的更新破坏不变性</li>
<li>无效状态在系统中传播</li>
<li>数据库包含不一致的数据</li>
</ul>
<p><strong>实际影响：</strong></p>
<p>批次作业更新订单项目但忘记重新计算总额。数千个订单现在有错误的总额。财务报告不符。会计在月底结算时发现差异。工程团队花费数天编写数据迁移脚本来修复损坏的数据。根本原因：没有强制执行不变性。</p>
</div></div>
<div class="admonition error"><p class="admonition-title"><span class="mdi mdi-alert-circle-outline admonition-icon"></span>🚫 没有封装</p><div class="admonition-content"><p><strong>问题</strong></p>
<p>公开的 getter 和 setter 暴露内部状态，允许任何代码以任意方式修改对象。</p>
<p><strong>贫血模型：</strong></p>
<p>每个字段都有 getter 和 setter。内部状态是公开的。</p>
<p><strong>随着系统成长：</strong></p>
<ul>
<li>50 个不同的地方调用 order.setStatus()</li>
<li>没有状态转换验证</li>
<li>Order 从 SHIPPED 回到 PENDING</li>
<li>无法追踪谁改变了什么</li>
<li>无法在不破坏现有代码的情况下添加验证</li>
</ul>
<p><strong>实际影响：</strong></p>
<p>业务规则：“已发货的订单无法取消。”在到处都是 setter 的情况下，强制执行这个需要：</p>
<ol>
<li>找到所有 50 个调用 setStatus() 的地方</li>
<li>为每个添加验证</li>
<li>希望没有人在没有验证的情况下添加第 51 个地方</li>
</ol>
<p>替代方案：在 setter 中添加验证。但现在在发货后执行 order.setStatus(CANCELLED) 的现有代码会中断。出现回归错误。测试失败。需要回滚。</p>
<p>使用适当的封装，会有一个方法：order.cancel()。它强制执行规则。所有代码都使用它。无法绕过。</p>
</div></div>
<h3 id="沟通鸿沟">沟通鸿沟</h3>
<p>数据库中心设计扩大了业务与开发之间的鸿沟：</p>
<div class="admonition error"><p class="admonition-title"><span class="mdi mdi-alert-circle-outline admonition-icon"></span>🚫 语言断层</p><div class="admonition-content"><p><strong>业务视角</strong></p>
<ul>
<li>"客户下订单"</li>
<li>"订单可以在发货前取消"</li>
<li>"优质客户获得优先处理"</li>
</ul>
<p><strong>代码现实</strong></p>
<ul>
<li>OrderService.createOrder()</li>
<li>OrderRepository.updateStatus()</li>
<li>CustomerTable.premiumFlag</li>
</ul>
<p><strong>结果</strong></p>
<ul>
<li>业务概念在代码中不可见</li>
<li>开发者在语言之间翻译</li>
<li>误解累积</li>
<li>知识随时间流失</li>
</ul>
</div></div>
<p>业务利益相关者使用业务术语描述领域。开发者使用技术术语实现。这些语言之间的翻译引入错误，并使代码库对非开发者来说难以理解。</p>
<h4 id="真实世界的沟通失败">真实世界的沟通失败</h4>
<p>语言鸿沟造成具体问题：</p>
<div class="admonition error"><p class="admonition-title"><span class="mdi mdi-alert-circle-outline admonition-icon"></span>🚫 翻译中的遗失</p><div class="admonition-content"><p><strong>场景：保险保单续约</strong></p>
<p><strong>业务说：</strong>
"当保单到期时，我们需要检查客户是否有资格自动续约。符合资格的客户在到期前 30 天收到续约优惠。如果他们没有回应，保单失效，但他们有 60 天的宽限期可以在不重新核保的情况下恢复。"</p>
<p><strong>开发者听到：</strong>
"在到期日将保单状态更新为已到期。在 30 天前发送电子邮件。如果没有回应，将状态设为失效。允许在 60 天内将状态更改为有效。"</p>
<p><strong>代码现实：</strong></p>
<p>PolicyService.updateStatus(policyId, "EXPIRED");
EmailService.sendRenewalEmail(customerId, 30);
if (noResponse) {
PolicyService.updateStatus(policyId, "LAPSED");
}</p>
<p><strong>遗失的内容：</strong></p>
<ul>
<li>"有资格续约"有特定的业务规则（去年没有索赔、良好的付款记录）</li>
<li>"续约优惠"是一个独特的业务概念，不仅仅是电子邮件</li>
<li>"宽限期"有法律含义，不仅仅是状态变更</li>
<li>"在不重新核保的情况下恢复"意味着跳过复杂的流程</li>
</ul>
<p><strong>六个月后：</strong></p>
<p>业务："为什么我们向最近有索赔的客户发送续约优惠？"
开发者："代码在到期前 30 天向所有人发送电子邮件。"
业务："但他们不符合资格！"
开发者："什么是'符合资格'？这不在需求中。"
业务："我们在启动会议上讨论过这个！"
开发者："那是六个月前，而且不在代码中。"</p>
</div></div>
<div class="admonition error"><p class="admonition-title"><span class="mdi mdi-alert-circle-outline admonition-icon"></span>🚫 隐藏的业务概念</p><div class="admonition-content"><p><strong>场景：电子商务促销</strong></p>
<p><strong>业务说：</strong>
"我们正在进行限时抢购。优质会员获得提前访问权。普通会员可以在 2 小时后购物。销售在库存耗尽或 24 小时过去时结束，以先到者为准。"</p>
<p><strong>代码现实：</strong></p>
<p>if (user.isPremium() || currentTime &gt; saleStart + 2.hours) {
if (currentTime &lt; saleStart + 24.hours &amp;&amp; inventory &gt; 0) {
// 允许购买
}
}</p>
<p><strong>缺少的概念：</strong></p>
<ul>
<li>"限时抢购"是一个一流的业务概念，不仅仅是时间窗口</li>
<li>"提前访问"是一种福利，不仅仅是时间检查</li>
<li>"销售结束"有多个应该明确的条件</li>
</ul>
<p><strong>三个月后：</strong></p>
<p>业务："我们可以将限时抢购延长到 48 小时吗？"
开发者："让我搜索 '24'... 在 15 个不同文件中找到。"
业务："为什么是 15 个文件？"
开发者："限时抢购用于结账、库存、定价、报告、分析..."
业务："你不能只改一个地方吗？"
开发者："不能，因为'限时抢购'在代码中不存在。它只是散落的时间检查。"</p>
</div></div>
<div class="admonition error"><p class="admonition-title"><span class="mdi mdi-alert-circle-outline admonition-icon"></span>🚫 模糊的技术术语</p><div class="admonition-content"><p><strong>场景：订单处理</strong></p>
<p><strong>业务问：</strong>
"提交订单时会发生什么？"</p>
<p><strong>开发者回答：</strong>
"OrderController 调用 OrderService.createOrder()，它验证请求，调用 OrderRepository.save()，向消息队列发布 OrderCreatedEvent，并向客户端返回 OrderDTO。"</p>
<p><strong>业务回应：</strong>
"我不理解任何这些。它会向客户的卡收费吗？它会保留库存吗？它会创建运输标签吗？"</p>
<p><strong>问题：</strong></p>
<p>开发者描述了技术实现。业务想知道业务结果。双方都不理解对方。</p>
<p><strong>使用通用语言：</strong></p>
<p>业务："提交订单时会发生什么？"
开发者："系统下订单，授权付款，保留库存，并安排履行。"
业务："完美。如果付款失败呢？"
开发者："订单下单失败，库存被释放，客户看到付款错误。"</p>
<p>相同的概念，相同的词语。不需要翻译。</p>
</div></div>
<h2 id="领域驱动设计基础">领域驱动设计基础</h2>
<p>Eric Evans 2003 年的书《领域驱动设计》引入了一种处理复杂性的综合方法。</p>
<h3 id="核心哲学">核心哲学</h3>
<p>DDD 的基础建立在几个关键原则上：</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>🎯 DDD 核心原则</p><div class="admonition-content"><p><strong>领域优先</strong></p>
<ul>
<li>业务逻辑是最重要的部分</li>
<li>技术关注点服务领域</li>
<li>模型反映业务现实</li>
<li>代码说业务语言</li>
</ul>
<p><strong>通用语言</strong></p>
<ul>
<li>业务与开发者之间的共享词汇</li>
<li>对话和代码中使用相同术语</li>
<li>减少翻译错误</li>
<li>随理解演进</li>
</ul>
<p><strong>迭代建模</strong></p>
<ul>
<li>模型通过协作改进</li>
<li>重构以获得更深入的洞察</li>
<li>持续学习</li>
<li>代码和模型保持一致</li>
</ul>
</div></div>
<p>DDD 将领域模型视为系统的核心。其他一切——数据库、UI、外部服务——都是为了支持领域而存在。这种优先级的颠倒改变了团队处理设计的方式。</p>
<h3 id="通用语言">通用语言</h3>
<p>最基本的 DDD 实践是创建共享语言：</p>
<div class="admonition success"><p class="admonition-title"><span class="mdi mdi-check-circle-outline admonition-icon"></span>✅ 通用语言的好处</p><div class="admonition-content"><p><strong>它是什么</strong></p>
<ul>
<li>领域的共同词汇</li>
<li>团队中每个人都使用</li>
<li>直接出现在代码中</li>
<li>在模型中记录</li>
</ul>
<p><strong>如何运作</strong></p>
<ul>
<li>业务："客户下订单"</li>
<li>代码：<code>customer.placeOrder()</code></li>
<li>不需要翻译</li>
<li>立即理解</li>
</ul>
<p><strong>影响</strong></p>
<ul>
<li>减少误解</li>
<li>使代码自我记录</li>
<li>使业务能够阅读代码结构</li>
<li>揭示建模问题</li>
</ul>
</div></div>
<p>当业务利益相关者说"下订单"时，代码有一个 placeOrder() 方法。当他们讨论"运输政策"时，代码有一个 ShippingPolicy 类。会议中的语言与代码中的语言相符。</p>
<p>这种一致性具有深远的影响。开发者停止在业务和技术术语之间翻译。业务利益相关者可以审查类图并理解系统结构。业务理解与代码实现之间的不匹配立即变得可见。</p>
<h3 id="丰富领域模型">丰富领域模型</h3>
<p>DDD 提倡具有行为的丰富领域模型：</p>
<div class="admonition success"><p class="admonition-title"><span class="mdi mdi-check-circle-outline admonition-icon"></span>✅ 丰富领域模型</p><div class="admonition-content"><p><strong>特征</strong></p>
<ul>
<li>对象包含数据和行为</li>
<li>业务规则存在于领域对象中</li>
<li>封装保护不变性</li>
<li>表达性、揭示意图的方法</li>
</ul>
<p><strong>好处</strong></p>
<ul>
<li>业务逻辑集中</li>
<li>不变性得到强制执行</li>
<li>自我记录的代码</li>
<li>更容易测试和维护</li>
</ul>
</div></div>
<p><strong>丰富模型示例：</strong></p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">OrderId</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OrderLine</span><span class="token punctuation">&gt;</span></span> lines<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">OrderStatus</span> status<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLine</span><span class="token punctuation">(</span><span class="token class-name">Product</span> product<span class="token punctuation">,</span> <span class="token keyword">int</span> quantity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">!=</span> <span class="token class-name">OrderStatus</span><span class="token punctuation">.</span><span class="token constant">DRAFT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span>
                <span class="token string">"无法修改已提交的订单"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        lines<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderLine</span><span class="token punctuation">(</span>product<span class="token punctuation">,</span> quantity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">calculateTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> lines<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">OrderLine</span><span class="token operator">::</span><span class="token function">getSubtotal</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span> <span class="token class-name">Money</span><span class="token operator">::</span><span class="token function">add</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>丰富模型将业务规则封装在领域对象中。Order 类知道如何添加项目、计算总额和强制执行业务约束。业务逻辑不会散落在服务层中——它存在于应该存在的地方。</p>
<h4 id="丰富模型如何解决实际问题">丰富模型如何解决实际问题</h4>
<div class="admonition success"><p class="admonition-title"><span class="mdi mdi-check-circle-outline admonition-icon"></span>✅ 业务逻辑集中</p><div class="admonition-content"><p><strong>好处</strong></p>
<p>与实体相关的所有行为都存在于该实体中。无需在服务类中搜索。</p>
<p><strong>示例：订单折扣</strong></p>
<p><strong>丰富模型：</strong></p>
<p>Order 知道如何根据其状态计算自己的折扣。</p>
<p><strong>影响：</strong></p>
<ul>
<li>需要更改折扣逻辑？编辑 Order 类。</li>
<li>需要测试折扣？测试 Order 类。</li>
<li>需要理解折扣？阅读 Order 类。</li>
<li>一个地方，一个真相来源。</li>
</ul>
<p><strong>实际场景：</strong></p>
<p>业务："我们需要添加'买 3 送 1'促销。"</p>
<p>开发者查看 Order.applyPromotions() 方法。看到百分比折扣和固定金额折扣的现有逻辑。添加新的促销类型。更新测试。完成。</p>
<p>时间：2 小时。</p>
<p><strong>贫血替代方案：</strong></p>
<p>开发者搜索代码库中的"折扣"。找到：</p>
<ul>
<li>DiscountService.calculateDiscount()</li>
<li>PricingService.applyPromotions()</li>
<li>OrderService.computeTotal()</li>
<li>CheckoutController.validateDiscounts()</li>
</ul>
<p>哪一个处理促销？全部？部分？开发者阅读每个文件。发现逻辑被分割。更新三个文件。遗漏一个。生产中的错误。</p>
<p>时间：2 天 + 1 个紧急修补。</p>
</div></div>
<div class="admonition success"><p class="admonition-title"><span class="mdi mdi-check-circle-outline admonition-icon"></span>✅ 不变性得到强制执行</p><div class="admonition-content"><p><strong>好处</strong></p>
<p>必须始终为真的业务规则由对象本身强制执行。</p>
<p><strong>示例：订单状态转换</strong></p>
<p><strong>丰富模型：</strong></p>
<p>Order 控制自己的状态转换。无效的转换是不可能的。</p>
<p><strong>影响：</strong></p>
<ul>
<li>无法取消已发货的订单</li>
<li>无法发货已取消的订单</li>
<li>无法修改已完成的订单</li>
<li>保证有效状态</li>
</ul>
<p><strong>实际场景：</strong></p>
<p>客服代表尝试取消已发货的订单。系统回应："无法取消已发货的订单。"代表立即看到错误。致电客户解释。客户理解。</p>
<p><strong>贫血替代方案：</strong></p>
<p>代表调用 order.setStatus("CANCELLED")。没有验证。订单现在在数据库中被取消，但包裹已在运输中。客户收到包裹。计费系统看到已取消的订单，不收费。公司免费运送产品。损失：$500。</p>
<p>每月乘以 100 个类似事件。年度损失：$600,000。</p>
</div></div>
<div class="admonition success"><p class="admonition-title"><span class="mdi mdi-check-circle-outline admonition-icon"></span>✅ 自我记录的代码</p><div class="admonition-content"><p><strong>好处</strong></p>
<p>方法名称和结构揭示业务逻辑。代码读起来像业务需求。</p>
<p><strong>示例：运输资格</strong></p>
<p><strong>丰富模型：</strong></p>
<p>if (order.isEligibleForFreeShipping()) {
shipping = ShippingCost.FREE;
}</p>
<p><strong>贫血替代方案：</strong></p>
<p>if (order.getTotal().compareTo(new BigDecimal("100")) &gt;= 0
&amp;&amp; order.getShippingAddress().getCountry().equals("US")
&amp;&amp; !order.getShippingAddress().getState().equals("AK")
&amp;&amp; !order.getShippingAddress().getState().equals("HI")
&amp;&amp; order.getShippingMethod().equals("STANDARD")) {
shipping = new BigDecimal("0.00");
}</p>
<p><strong>影响：</strong></p>
<p>丰富模型：业务利益相关者阅读代码，立即理解。
贫血模型：业务利益相关者看到技术细节，放弃。</p>
<p><strong>实际场景：</strong></p>
<p>业务想审查免运费逻辑。使用丰富模型，开发者展示：</p>
<p>public boolean isEligibleForFreeShipping() {
return meetsMinimumAmount()
&amp;&amp; isInContinentalUS()
&amp;&amp; usesStandardShipping();
}</p>
<p>业务："完美，这正是我们的规则。"</p>
<p>使用贫血模型，开发者展示 20 行条件逻辑。业务："我相信你做对了。"</p>
</div></div>
<div class="admonition success"><p class="admonition-title"><span class="mdi mdi-check-circle-outline admonition-icon"></span>✅ 更容易测试和维护</p><div class="admonition-content"><p><strong>好处</strong></p>
<p>测试业务逻辑意味着测试领域对象。无需模拟复杂的服务依赖。</p>
<p><strong>示例：订单验证</strong></p>
<p><strong>丰富模型测试：</strong></p>
<p>@Test
void cannotAddItemsToSubmittedOrder() {
Order order = new Order();
order.addItem(product, 1);
order.submit();</p>
<pre><code>assertThrows(IllegalStateException.class, 
    () -&gt; order.addItem(anotherProduct, 1));
</code></pre>
<p>}</p>
<p>简单。直接。没有模拟。测试业务规则。</p>
<p><strong>贫血模型测试：</strong></p>
<p>@Test
void cannotAddItemsToSubmittedOrder() {
Order order = new Order();
order.setStatus(OrderStatus.SUBMITTED);</p>
<pre><code>OrderService service = new OrderService(
    mockRepository, 
    mockValidator, 
    mockEventPublisher,
    mockInventoryService,
    mockPricingService);
<p>when(mockRepository.findById(orderId))<br>
.thenReturn(order);<br>
when(mockValidator.validate(any()))<br>
.thenReturn(validationResult);<br>
// … 20 行更多的模拟设置</p>
</code><p><code>assertThrows(BusinessException.class,<br>
() -&gt; service.addItemToOrder(orderId, productId, 1));<br>
</code></p></pre><p></p>
<p>}</p>
<p>复杂。脆弱。测试基础设施多于业务逻辑。</p>
<p><strong>影响：</strong></p>
<p>丰富模型：100 个测试，5 分钟执行，易于维护。
贫血模型：100 个测试，30 分钟执行，基础设施变更时中断。</p>
<p><strong>实际场景：</strong></p>
<p>团队从 MySQL 切换到 PostgreSQL。丰富模型测试：全部通过。贫血模型测试：30 个失败，因为它们模拟了已变更的仓储内部。</p>
</div></div>
<h2 id="战略设计模式">战略设计模式</h2>
<p>DDD 提供战略模式来管理大型系统中的复杂性。这些模式帮助将大型领域组织成可管理的部分。</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>📚 相关模式</p><div class="admonition-content"><p><strong>战略模式：</strong></p>
<ul>
<li><a href="#%E9%99%90%E7%95%8C%E4%B8%8A%E4%B8%8B%E6%96%87">限界上下文</a> - 模型的明确边界</li>
<li><a href="#%E4%B8%8A%E4%B8%8B%E6%96%87%E6%98%A0%E5%B0%84">上下文映射</a> - 上下文之间的关系</li>
<li><a href="#%E8%81%9A%E5%90%88">聚合</a> - 一致性边界</li>
<li><a href="#%E9%80%9A%E7%94%A8%E8%AF%AD%E8%A8%80">通用语言</a> - 共享词汇</li>
</ul>
<p><strong>架构模式：</strong></p>
<ul>
<li><a href="#%E5%85%AD%E8%BE%B9%E5%BD%A2%E6%9E%B6%E6%9E%84">六边形架构</a> - 端口与适配器</li>
<li><a href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%8E%E9%99%90%E7%95%8C%E4%B8%8A%E4%B8%8B%E6%96%87">微服务</a> - 服务边界</li>
<li><a href="#%E4%BA%8B%E4%BB%B6%E6%BA%AF%E6%BA%90%E4%B8%8E-cqrs">事件溯源</a> - 基于事件的持久化</li>
<li><a href="#%E4%BA%8B%E4%BB%B6%E6%BA%AF%E6%BA%90%E4%B8%8E-cqrs">CQRS</a> - 分离读取/写入模型</li>
</ul>
<p><strong>战术模式：</strong></p>
<ul>
<li><a href="#%E5%AE%9E%E4%BD%93-vs-%E5%80%BC%E5%AF%B9%E8%B1%A1">实体</a> - 具有标识的对象</li>
<li><a href="#%E5%AE%9E%E4%BD%93-vs-%E5%80%BC%E5%AF%B9%E8%B1%A1">值对象</a> - 不可变值</li>
<li><a href="#%E9%A2%86%E5%9F%9F%E4%BA%8B%E4%BB%B6">领域事件</a> - 业务发生</li>
<li><a href="#%E6%9E%84%E5%BB%BA%E5%9D%97">仓储</a> - 持久化抽象</li>
</ul>
</div></div>
<p>DDD 提供战略模式来管理大型系统中的复杂性。</p>
<h3 id="限界上下文">限界上下文</h3>
<p>最重要的战略模式是限界上下文：</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>🎯 限界上下文概念</p><div class="admonition-content"><p><strong>定义</strong></p>
<ul>
<li>模型的明确边界</li>
<li>在边界内，术语具有精确含义</li>
<li>不同上下文可以有不同模型</li>
<li>通过分离减少复杂性</li>
</ul>
<p><strong>为什么重要</strong></p>
<ul>
<li>"客户"在不同上下文中意味着不同的事情</li>
<li>销售上下文：客户有订单、信用额度</li>
<li>支持上下文：客户有工单、历史记录</li>
<li>运输上下文：客户有送货地址</li>
</ul>
<p><strong>好处</strong></p>
<ul>
<li>每个上下文保持专注</li>
<li>团队可以独立工作</li>
<li>模型保持连贯</li>
<li>防止"一个模型统治一切"</li>
</ul>
</div></div>
<p>大型系统无法拥有单一统一模型。"客户"一词对销售、支持和运输团队意味着不同的事情。试图创建一个满足所有上下文的 Customer 类会产生臃肿、不连贯的模型。</p>
<p>限界上下文通过明确分离模型来解决这个问题。每个上下文都有自己针对其需求优化的模型。销售上下文有一个具有订单历史的 Customer。支持上下文有一个具有支持工单的 Customer。这些是不同的模型，这没问题。</p>
<div class="mermaid">graph TB
    subgraph Sales["销售上下文"]
        SC[客户<br>- 订单<br>- 信用额度<br>- 付款条件]
    end
    
    subgraph Support["支持上下文"]
        SuC[客户<br>- 工单<br>- 支持历史<br>- 优先级]
    end
    
    subgraph Shipping["运输上下文"]
        ShC[客户<br>- 送货地址<br>- 运输偏好<br>- 配送历史]
    end
    
    Sales -.-&gt;|上下文映射| Support
    Sales -.-&gt;|上下文映射| Shipping
    Support -.-&gt;|上下文映射| Shipping
    
    style Sales fill:#e1f5ff,stroke:#333,stroke-width:2px
    style Support fill:#fff4e1,stroke:#333,stroke-width:2px
    style Shipping fill:#e8f5e9,stroke:#333,stroke-width:2px</div>
<h3 id="上下文映射">上下文映射</h3>
<p>限界上下文必须集成，需要上下文映射：</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>🗺️ 上下文映射模式</p><div class="admonition-content"><p><strong>合作伙伴</strong></p>
<ul>
<li>两个上下文紧密协作</li>
<li>团队协调变更</li>
<li>共享成功标准</li>
</ul>
<p><strong>客户-供应商</strong></p>
<ul>
<li>上游上下文提供数据</li>
<li>下游上下文消费</li>
<li>正式接口协议</li>
</ul>
<p><strong>顺从者</strong></p>
<ul>
<li>下游顺从上游模型</li>
<li>当上游不会改变时使用</li>
<li>接受他们的模型</li>
</ul>
<p><strong>防腐层</strong></p>
<ul>
<li>在上下文之间翻译</li>
<li>保护领域模型免受外部影响</li>
<li>隔离遗留系统</li>
</ul>
<p><strong>共享核心</strong></p>
<ul>
<li>上下文之间的小型共享模型</li>
<li>需要协调</li>
<li>谨慎使用</li>
</ul>
</div></div>
<p>上下文映射定义限界上下文如何关联。防腐层保护你的领域模型免受外部系统影响。客户-供应商关系建立明确的责任。这些模式使集成明确且可管理。</p>
<h3 id="聚合">聚合</h3>
<p>聚合定义一致性边界：</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>📦 聚合模式</p><div class="admonition-content"><p><strong>定义</strong></p>
<ul>
<li>作为单元处理的对象集群</li>
<li>一个实体是聚合根</li>
<li>外部引用仅指向根</li>
<li>在边界内强制执行一致性</li>
</ul>
<p><strong>规则</strong></p>
<ul>
<li>根实体具有全局标识</li>
<li>内部实体具有本地标识</li>
<li>外部对象不能持有对内部的引用</li>
<li>变更通过根进行</li>
</ul>
<p><strong>示例</strong></p>
<ul>
<li>Order 是聚合根</li>
<li>OrderLine 是内部实体</li>
<li>外部代码引用 Order，而非 OrderLine</li>
<li>Order 确保所有行的一致性</li>
</ul>
</div></div>
<p>聚合防止"大泥球"，即所有东西都引用所有东西。通过定义明确的边界和访问规则，聚合使系统更易于维护并支持分布式事务。</p>
<h2 id="战术设计模式">战术设计模式</h2>
<p>DDD 提供战术模式来实现领域模型。</p>
<h3 id="构建块">构建块</h3>
<p>战术模式形成领域模型的词汇：</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>🧱 DDD 构建块</p><div class="admonition-content"><p><strong>实体</strong></p>
<ul>
<li>具有标识的对象</li>
<li>标识随时间持续</li>
<li>可变状态</li>
<li>示例：Customer、Order</li>
</ul>
<p><strong>值对象</strong></p>
<ul>
<li>由属性定义的对象</li>
<li>没有标识</li>
<li>不可变</li>
<li>示例：Money、Address、DateRange</li>
</ul>
<p><strong>服务</strong></p>
<ul>
<li>不属于实体的操作</li>
<li>无状态</li>
<li>领域操作</li>
<li>示例：PricingService、ShippingCalculator</li>
</ul>
<p><strong>仓储</strong></p>
<ul>
<li>持久化的抽象</li>
<li>类似集合的接口</li>
<li>隐藏数据库细节</li>
<li>示例：OrderRepository</li>
</ul>
<p><strong>工厂</strong></p>
<ul>
<li>复杂对象创建</li>
<li>封装构造逻辑</li>
<li>确保有效对象</li>
<li>示例：OrderFactory</li>
</ul>
</div></div>
<p>这些模式提供了组织领域逻辑的结构化方式。实体具有标识和生命周期。值对象表示没有标识的概念。服务处理跨越多个对象的操作。仓储抽象持久化。工厂处理复杂的创建。</p>
<h3 id="实体-vs-值对象">实体 vs 值对象</h3>
<p>理解区别至关重要：</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>🔍 实体 vs 值对象</p><div class="admonition-content"><p><strong>关键区别</strong></p>
<ul>
<li>实体具有标识和生命周期</li>
<li>值对象由其属性定义</li>
<li>实体可变，值对象不可变</li>
<li>不同的相等语义</li>
</ul>
</div></div>
<p><strong>实体示例：Customer</strong></p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">CustomerId</span> id<span class="token punctuation">;</span>  <span class="token comment">// 标识</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Email</span> email<span class="token punctuation">;</span>
    
    <span class="token comment">// 基于标识的相等性</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">Customer</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token class-name">Customer</span> other <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Customer</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>
        <span class="token keyword">return</span> id<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>值对象示例：Money</strong></p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Money</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">BigDecimal</span> amount<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Currency</span> currency<span class="token punctuation">;</span>
    
    <span class="token comment">// 不可变</span>
    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Money</span> other<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>currency<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>currency<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span>
                <span class="token string">"无法加总不同货币"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Money</span><span class="token punctuation">(</span>
            amount<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>amount<span class="token punctuation">)</span><span class="token punctuation">,</span> 
            currency<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 基于值的相等性</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">Money</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token class-name">Money</span> other <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Money</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>
        <span class="token keyword">return</span> amount<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>amount<span class="token punctuation">)</span> 
            <span class="token operator">&amp;&amp;</span> currency<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>currency<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>实体通过标识进行比较——两个具有相同名称的客户如果有不同的 ID 就是不同的。值对象通过值进行比较——两个具有相同金额和货币的 Money 对象是相同的。</p>
<h3 id="领域事件">领域事件</h3>
<p>领域事件捕获重要的业务发生：</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>📢 领域事件</p><div class="admonition-content"><p><strong>目的</strong></p>
<ul>
<li>表示发生的事情</li>
<li>过去式命名</li>
<li>不可变</li>
<li>实现松耦合</li>
</ul>
<p><strong>好处</strong></p>
<ul>
<li>明确的业务事件</li>
<li>解耦的组件</li>
<li>审计轨迹</li>
<li>支持事件溯源</li>
</ul>
</div></div>
<p><strong>领域事件示例：</strong></p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderPlaced</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">OrderId</span> orderId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">CustomerId</span> customerId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Instant</span> occurredAt<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">OrderPlaced</span><span class="token punctuation">(</span><span class="token class-name">OrderId</span> orderId<span class="token punctuation">,</span> 
                      <span class="token class-name">CustomerId</span> customerId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>orderId <span class="token operator">=</span> orderId<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>customerId <span class="token operator">=</span> customerId<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>occurredAt <span class="token operator">=</span> <span class="token class-name">Instant</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>领域事件使隐含概念变得明确。系统不是默默更新状态，而是发布 OrderPlaced 事件。系统的其他部分可以反应——发送确认电子邮件、更新库存、触发运输。事件实现松耦合并提供自然的审计轨迹。</p>
<h2 id="真实世界应用">真实世界应用</h2>
<p>DDD 在特定情境中表现出色，但并非总是正确的选择。</p>
<h3 id="何时-DDD-增加价值">何时 DDD 增加价值</h3>
<p>DDD 最适合复杂领域：</p>
<div class="admonition success"><p class="admonition-title"><span class="mdi mdi-check-circle-outline admonition-icon"></span>✅ 良好的 DDD 候选者</p><div class="admonition-content"><p><strong>复杂业务逻辑</strong></p>
<ul>
<li>许多业务规则</li>
<li>规则以复杂方式交互</li>
<li>需要领域专家</li>
<li>示例：保险承保、交易系统</li>
</ul>
<p><strong>协作建模</strong></p>
<ul>
<li>业务专家可用</li>
<li>可能进行迭代精炼</li>
<li>共享理解有价值</li>
<li>示例：定制化企业应用程序</li>
</ul>
<p><strong>长期系统</strong></p>
<ul>
<li>系统将演进多年</li>
<li>可维护性至关重要</li>
<li>知识保存重要</li>
<li>示例：核心业务系统</li>
</ul>
<p><strong>战略差异化</strong></p>
<ul>
<li>领域是竞争优势</li>
<li>定制化逻辑，而非通用 CRUD</li>
<li>业务规则中的创新</li>
<li>示例：推荐引擎、定价算法</li>
</ul>
</div></div>
<p>当领域复杂性证明其合理性时，DDD 的开销是值得的。具有复杂业务规则、多个利益相关者和长生命周期的系统受益于 DDD 的建模严谨性。</p>
<h3 id="何时更简单的方法就足够">何时更简单的方法就足够</h3>
<p>并非每个系统都需要 DDD：</p>
<div class="admonition warning"><p class="admonition-title"><span class="mdi mdi-alert-outline admonition-icon"></span>⚠️ DDD 可能过度</p><div class="admonition-content"><p><strong>简单 CRUD 应用程序</strong></p>
<ul>
<li>基本的创建、读取、更新、删除</li>
<li>最少的业务逻辑</li>
<li>数据管理焦点</li>
<li>更好的方法：简单分层架构</li>
</ul>
<p><strong>技术问题</strong></p>
<ul>
<li>算法密集型系统</li>
<li>基础设施工具</li>
<li>没有复杂领域</li>
<li>更好的方法：技术设计模式</li>
</ul>
<p><strong>原型和 MVP</strong></p>
<ul>
<li>速度优于结构</li>
<li>不确定的需求</li>
<li>可能被丢弃</li>
<li>更好的方法：快速开发框架</li>
</ul>
<p><strong>没有领域专家的小团队</strong></p>
<ul>
<li>没有人可以协作</li>
<li>有限的领域知识</li>
<li>无法建立通用语言</li>
<li>更好的方法：更简单的模式</li>
</ul>
</div></div>
<p>具有基本 CRUD 操作的内容管理系统不需要 DDD。测试市场适应性的原型不应投资于精细的领域建模。DDD 的好处伴随着成本——复杂性、学习曲线和开发时间。</p>
<h3 id="电子商务平台示例">电子商务平台示例</h3>
<p>考虑电子商务平台的订单管理：</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>🛒 电子商务领域模型</p><div class="admonition-content"><p><strong>限界上下文</strong></p>
<ul>
<li>目录：产品、类别、搜索</li>
<li>购物：购物车、结账、付款</li>
<li>订单管理：订单、履行、跟踪</li>
<li>客户：账户、偏好、历史</li>
</ul>
<p><strong>关键聚合</strong></p>
<ul>
<li>Order（根：Order，包含：OrderLine）</li>
<li>ShoppingCart（根：Cart，包含：CartItem）</li>
<li>Product（根：Product，包含：Variant）</li>
</ul>
<p><strong>领域事件</strong></p>
<ul>
<li>OrderPlaced</li>
<li>PaymentProcessed</li>
<li>OrderShipped</li>
<li>OrderCancelled</li>
</ul>
<p><strong>值对象</strong></p>
<ul>
<li>Money（金额 + 货币）</li>
<li>Address（街道、城市、邮政编码）</li>
<li>ProductSku（标识符）</li>
</ul>
</div></div>
<p>这种结构使业务概念明确。Order 聚合确保一致性——你不能有没有订单的订单行。领域事件实现集成——当 OrderPlaced 触发时，库存更新并发送电子邮件。通用语言贯穿始终——业务利益相关者和开发者使用相同的术语。</p>
<h3 id="金融服务示例">金融服务示例</h3>
<p>交易系统展示了 DDD 的力量：</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>💰 交易系统领域</p><div class="admonition-content"><p><strong>复杂业务规则</strong></p>
<ul>
<li>每个交易员的头寸限制</li>
<li>风险计算</li>
<li>法规遵从</li>
<li>市场时间和假日</li>
</ul>
<p><strong>好处</strong></p>
<ul>
<li>业务规则集中</li>
<li>在代码中强制执行合规性</li>
<li>领域专家可以审查逻辑</li>
<li>变更追溯到业务需求</li>
</ul>
</div></div>
<p><strong>丰富领域模型示例：</strong></p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Trade</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>market<span class="token punctuation">.</span><span class="token function">isOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">MarketClosedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">exceedsPositionLimit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">PositionLimitException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">passesRiskCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RiskLimitException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 执行交易</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>金融系统具有复杂、不断演进的规则。DDD 对领域模型的关注使这种复杂性保持可管理。当法规改变时，领域模型改变。代码反映当前的业务理解。</p>
<h2 id="实现策略">实现策略</h2>
<p>采用 DDD 需要实用的策略。</p>
<h3 id="开始使用-DDD">开始使用 DDD</h3>
<p>从战略模式开始：</p>
<div class="admonition tip"><p class="admonition-title"><span class="mdi mdi-lightbulb-on-outline admonition-icon"></span>💡 DDD 采用路径</p><div class="admonition-content"><p><strong>阶段 1：战略设计</strong></p>
<ol>
<li>识别限界上下文</li>
<li>创建上下文映射</li>
<li>建立通用语言</li>
<li>定义核心领域</li>
</ol>
<p><strong>阶段 2：战术模式</strong></p>
<ol>
<li>建模关键聚合</li>
<li>识别实体和值对象</li>
<li>定义领域事件</li>
<li>实现仓储</li>
</ol>
<p><strong>阶段 3：精炼</strong></p>
<ol>
<li>重构以获得更深入的洞察</li>
<li>演进通用语言</li>
<li>调整边界</li>
<li>改进模型</li>
</ol>
</div></div>
<p>从战略设计开始以理解大局。在深入战术模式之前识别限界上下文。这可以防止过早优化并确保努力集中在核心领域。</p>
<h3 id="Event-Storming">Event Storming</h3>
<p>Event Storming 促进协作建模：</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>🎨 Event Storming 流程</p><div class="admonition-content"><p><strong>它是什么</strong></p>
<ul>
<li>基于工作坊的建模技术</li>
<li>在墙上使用便利贴</li>
<li>协作和可视化</li>
<li>快速领域探索</li>
</ul>
<p><strong>步骤</strong></p>
<ol>
<li>识别领域事件（橙色便利贴）</li>
<li>添加触发事件的命令（蓝色便利贴）</li>
<li>识别聚合（黄色便利贴）</li>
<li>找到限界上下文（边界）</li>
<li>发现问题和机会（红色便利贴）</li>
</ol>
<p><strong>好处</strong></p>
<ul>
<li>吸引整个团队</li>
<li>揭示隐藏的复杂性</li>
<li>建立共享理解</li>
<li>快速且有效</li>
</ul>
</div></div>
<p>Event Storming 将业务专家和开发者聚集在一起探索领域。可视化、协作的性质快速浮现假设和分歧。几个小时的 Event Storming 可以揭示通过传统需求收集需要数周才能发现的洞察。</p>
<h3 id="避免常见陷阱">避免常见陷阱</h3>
<p>DDD 有众所周知的反模式：</p>
<div class="admonition warning"><p class="admonition-title"><span class="mdi mdi-alert-outline admonition-icon"></span>⚠️ DDD 反模式</p><div class="admonition-content"><p><strong>贫血领域模型</strong></p>
<ul>
<li>问题：没有行为的对象</li>
<li>解决方案：将逻辑移入领域对象</li>
</ul>
<p><strong>上帝聚合</strong></p>
<ul>
<li>问题：聚合太大</li>
<li>解决方案：拆分成更小的聚合</li>
</ul>
<p><strong>缺少限界上下文</strong></p>
<ul>
<li>问题：一个模型适用于所有事物</li>
<li>解决方案：识别并分离上下文</li>
</ul>
<p><strong>忽略通用语言</strong></p>
<ul>
<li>问题：代码使用技术术语</li>
<li>解决方案：重构以匹配业务语言</li>
</ul>
<p><strong>过度工程简单领域</strong></p>
<ul>
<li>问题：对 CRUD 应用程序使用 DDD</li>
<li>解决方案：使用更简单的方法</li>
</ul>
</div></div>
<p>最常见的错误是在不理解其目的的情况下应用 DDD 模式。聚合变得臃肿。通用语言被忽略。领域模型变得贫血。成功需要纪律和持续重构以获得更深入的洞察。</p>
<h2 id="DDD-与现代架构">DDD 与现代架构</h2>
<p>DDD 影响当代架构模式。</p>
<h3 id="微服务与限界上下文">微服务与限界上下文</h3>
<p>限界上下文自然映射到微服务：</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>🔗 DDD + 微服务</p><div class="admonition-content"><p><strong>对齐</strong></p>
<ul>
<li>每个微服务是一个限界上下文</li>
<li>明确的边界和责任</li>
<li>独立部署</li>
<li>团队所有权</li>
</ul>
<p><strong>好处</strong></p>
<ul>
<li>DDD 提供服务边界</li>
<li>防止分布式单体</li>
<li>实现自主团队</li>
<li>自然的服务分解</li>
</ul>
<p><strong>挑战</strong></p>
<ul>
<li>分布式事务</li>
<li>数据一致性</li>
<li>集成复杂性</li>
<li>运营开销</li>
</ul>
</div></div>
<p>没有限界上下文的微服务经常失败——服务有不明确的边界和紧密耦合。DDD 的战略模式提供有原则的服务分解。每个限界上下文成为具有明确领域焦点的微服务。</p>
<h3 id="事件溯源与-CQRS">事件溯源与 CQRS</h3>
<p>DDD 与事件溯源和 CQRS 配合良好：</p>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>📊 事件溯源 + CQRS</p><div class="admonition-content"><p><strong>事件溯源</strong></p>
<ul>
<li>存储领域事件，而非当前状态</li>
<li>通过重放事件重建状态</li>
<li>完整的审计轨迹</li>
<li>时间旅行调试</li>
</ul>
<p><strong>CQRS（命令查询责任分离）</strong></p>
<ul>
<li>分离读取和写入模型</li>
<li>独立优化每个</li>
<li>读取/写入使用不同数据库</li>
<li>最终一致性</li>
</ul>
<p><strong>与 DDD 集成</strong></p>
<ul>
<li>领域事件是一等公民</li>
<li>聚合产生事件</li>
<li>读取模型服务查询</li>
<li>写入模型强制执行不变性</li>
</ul>
</div></div>
<p>事件溯源使领域事件成为真相来源。CQRS 分离命令处理（写入）和查询（读取）。与 DDD 一起，它们创建业务事件明确、可审计并驱动整个架构的系统。</p>
<h3 id="六边形架构">六边形架构</h3>
<p>DDD 自然适合六边形（端口与适配器）架构：</p>
<div class="mermaid">graph TB
    subgraph Core["领域核心"]
        DM[领域模型<br>实体、值对象<br>聚合、服务]
    end
    
    subgraph Ports["端口"]
        IP[输入端口<br>用例]
        OP[输出端口<br>仓储、服务]
    end
    
    subgraph Adapters["适配器"]
        REST[REST API]
        UI[Web UI]
        DB[数据库]
        MSG[消息队列]
    end
    
    REST --&gt; IP
    UI --&gt; IP
    IP --&gt; DM
    DM --&gt; OP
    OP --&gt; DB
    OP --&gt; MSG
    
    style Core fill:#e1f5ff,stroke:#333,stroke-width:3px
    style Ports fill:#fff4e1,stroke:#333,stroke-width:2px
    style Adapters fill:#e8f5e9,stroke:#333,stroke-width:2px</div>
<div class="admonition anote"><p class="admonition-title"><span class="mdi mdi-note-outline admonition-icon"></span>🏛️ 六边形架构 + DDD</p><div class="admonition-content"><p><strong>结构</strong></p>
<ul>
<li>领域模型在中心</li>
<li>端口定义接口</li>
<li>适配器实现技术细节</li>
<li>依赖指向内部</li>
</ul>
<p><strong>好处</strong></p>
<ul>
<li>领域与基础设施隔离</li>
<li>易于测试领域逻辑</li>
<li>交换实现</li>
<li>技术无关的核心</li>
</ul>
</div></div>
<p>六边形架构使领域模型独立于技术关注点。数据库、框架和外部服务成为实现细节。领域保持纯粹，专注于业务逻辑。</p>
<h2 id="衡量成功">衡量成功</h2>
<p>DDD 的价值出现在特定结果中：</p>
<div class="admonition success"><p class="admonition-title"><span class="mdi mdi-check-circle-outline admonition-icon"></span>✅ DDD 成功指标</p><div class="admonition-content"><p><strong>沟通</strong></p>
<ul>
<li>业务和开发者使用相同术语</li>
<li>更少的误解</li>
<li>更快的需求澄清</li>
<li>代码审查包括业务利益相关者</li>
</ul>
<p><strong>可维护性</strong></p>
<ul>
<li>业务逻辑易于找到</li>
<li>变更局限于聚合</li>
<li>重构不会破坏一切</li>
<li>新开发者快速理解</li>
</ul>
<p><strong>灵活性</strong></p>
<ul>
<li>业务规则变更简单明了</li>
<li>新功能自然契合</li>
<li>技术变更不影响领域</li>
<li>系统随业务演进</li>
</ul>
<p><strong>质量</strong></p>
<ul>
<li>业务逻辑中的错误更少</li>
<li>不变性得到强制执行</li>
<li>边缘案例得到处理</li>
<li>领域测试可读</li>
</ul>
</div></div>
<p>成功不是通过模式采用来衡量，而是通过业务结果。业务利益相关者能理解代码结构吗？变更需要更少时间吗？系统更可靠吗？这些指标揭示 DDD 是否提供价值。</p>
<h2 id="结论">结论</h2>
<p>领域驱动设计代表从数据库中心到领域中心软件开发的根本转变。通过将领域模型置于中心、建立通用语言，以及应用战略和战术模式，DDD 创建与业务需求一致且随时间保持可维护的系统。</p>
<p>从传统方法到 DDD 的旅程揭示了重要的教训：</p>
<p><strong>复杂性需要结构</strong>：简单的 CRUD 应用程序不需要 DDD。具有复杂业务规则的复杂领域受益于 DDD 的建模严谨性。关键是将方法与问题复杂性相匹配。</p>
<p><strong>语言很重要</strong>：通用语言不仅仅是锦上添花——它是基础。当业务和开发者共享词汇时，误解减少，代码变得自我记录。维护这种共享语言的纪律持续带来回报。</p>
<p><strong>边界实现规模</strong>：限界上下文防止"一个模型统治一切"的陷阱。通过明确分离关注点，系统保持可理解，团队可以独立工作。随着系统成长，这变得至关重要。</p>
<p><strong>模式服务目的</strong>：DDD 的模式——聚合、实体、值对象、领域事件——不是货物崇拜实践。每个都解决特定问题。理解它们解决的问题可以防止误用。</p>
<p><strong>协作驱动质量</strong>：当业务专家和开发者持续协作时，DDD 效果最好。Event Storming 和其他协作建模技术比传统需求文档更快地浮现假设并建立共享理解。</p>
<p>采用 DDD 的决定应该是深思熟虑的。对于具有复杂业务逻辑、长生命周期和可用领域专家的系统，DDD 提供多年来回报的结构。对于更简单的系统、原型或技术问题，更轻量的方法就足够了。</p>
<p>现代架构模式——微服务、事件溯源、CQRS、六边形架构——自然与 DDD 原则一致。限界上下文提供服务边界。领域事件实现事件溯源。领域模型保持独立于技术关注点。</p>
<p>DDD 不是银弹。它需要投资、纪律和持续重构以获得更深入的洞察。但对于正确的问题，它将软件开发从在业务和技术语言之间翻译转变为构建直接说业务语言的系统。</p>
<p>成功的最终衡量标准是软件是否有效解决真实业务问题，并能随着这些问题的变化而演进。DDD 提供工具和实践来实现这一目标，但只有在深思熟虑地应用于其复杂性合理的领域时才有效。</p>
<!-- commentbox plugin begins -->
    <div class="commentbox"></div>
    <script src="https://unpkg.com/commentbox.io/dist/commentBox.min.js"></script>
    <script>commentBox('5765834504929280-proj')</script>
    <!-- commentbox plugin ends -->
    
        </div>
        
        <footer class="article-footer">
            
    <a data-url="https://neo01.com/zh-CN/2003/12/Domain-Driven-Design-Bridging-Business-and-Code/" data-id="4ea20275" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url').replace("http://","https://"),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <!--script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "Neo Alienson"
        },
        "headline": "领域驱动设计：连接业务与代码",
        "image": "https://neo01.com",
        "keywords": "DDD Design Patterns Software Architecture",
        "genre": "Architecture",
        "datePublished": "2003-12-02",
        "dateCreated": "2003-12-02",
        "dateModified": "2025-11-26",
        "url": "https://neo01.com//zh-CN/2003/12/Domain-Driven-Design-Bridging-Business-and-Code/",
        "description": "领域驱动设计承诺软件能说业务语言，但从数据库中心到领域中心架构的旅程，揭示了建模复杂性如何超越 CRUD 操作而演进。",
        "wordCount": 2207
    }
</script-->

</article>

                        </div>
                    </section>
                    
<aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
                <li>
                    <a class="social-tooltip" title="stack-exchange" href="https://stackexchange.com/users/2122053/neo?tab=accounts" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-stack-exchange"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="stack-overflow" href="https://stackoverflow.com/users/1885105/neo" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-stack-overflow"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/neoalienson" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-github"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="linkedin" href="https://linkedin.com/in/neo01" target="_blank" rel="noopener">
                        <i class="icon fa-brands fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a class="social-tooltip" title="rss" href="/atom.xml" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>
    <div class="widgets-container">

        
            
                
                <div class="widget-wrap widget-list">
    <h3 class="widget-title">链接</h3>
    <div class="widget">
        <ul><li><a href="/zh-CN/ai">AI 游乐场</a></li><li><a href="/zh-CN/tools">工具</a></li><li><a href="/zh-CN/games">游戏</a></li><li><a href="/zh-CN/pages/useful-information">实用信息</a></li><li><a href="/zh-CN/pages/Hexo-Blogging-Cheatsheet">Hexo 博客速查表</a></li></ul>
    </div>
</div>

                
            
                
                
                
            
                
                    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                    <li>
                        <div class="item-thumbnail">
                            <a href="/zh-CN/2025/11/Mock-Servers-Accelerating-Development-Through-Simulation/" class="thumbnail">
        <span style="background-image:url(/assets/futuristic/mesh.png)" alt="Mock 服务器：通过模拟加速开发" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" style="cursor: default; pointer-events: none;">开发</a></p>
                            <p class="item-title"><a href="/zh-CN/2025/11/Mock-Servers-Accelerating-Development-Through-Simulation/" class="title">Mock 服务器：通过模拟加速开发</a></p>
                            <p class="item-date"><time datetime="2025-10-31T16:00:00.000Z" itemprop="datePublished">2025-11-01</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/zh-CN/2025/10/Enabling-i18n-in-Hexo/" class="thumbnail">
        <span style="background-image:url(/assets/hexo/thumbnail.png)" alt="在 Hexo 中启用 i18n：多语言博客完整指南" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" style="cursor: default; pointer-events: none;">开发</a></p>
                            <p class="item-title"><a href="/zh-CN/2025/10/Enabling-i18n-in-Hexo/" class="title">在 Hexo 中启用 i18n：多语言博客完整指南</a></p>
                            <p class="item-date"><time datetime="2025-10-29T16:00:00.000Z" itemprop="datePublished">2025-10-30</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/zh-CN/2025/10/CISP-Advanced-Security-Topics/" class="thumbnail">
        <span style="background-image:url(/assets/cisp/thumbnail_80.png)" alt="CISP学习指南：高级安全主题" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" style="cursor: default; pointer-events: none;">网络安全</a></p>
                            <p class="item-title"><a href="/zh-CN/2025/10/CISP-Advanced-Security-Topics/" class="title">CISP学习指南：高级安全主题</a></p>
                            <p class="item-date"><time datetime="2025-10-22T16:00:00.000Z" itemprop="datePublished">2025-10-23</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/zh-CN/2025/10/CISP-Email-Security/" class="thumbnail">
        <span style="background-image:url(/assets/cisp/thumbnail_80.png)" alt="CISP学习指南：电子邮件安全与网络协议" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" style="cursor: default; pointer-events: none;">网络安全</a></p>
                            <p class="item-title"><a href="/zh-CN/2025/10/CISP-Email-Security/" class="title">CISP学习指南：电子邮件安全与网络协议</a></p>
                            <p class="item-date"><time datetime="2025-10-22T16:00:00.000Z" itemprop="datePublished">2025-10-23</time></p>
                        </div>
                    </li>
                    <li>
                        <div class="item-thumbnail">
                            <a href="/zh-CN/2025/10/CISP-Access-Control-Audit-WAPI/" class="thumbnail">
        <span style="background-image:url(/assets/cisp/thumbnail_80.png)" alt="CISP学习指南：访问控制机制、蜜网、审计系统与WAPI" class="thumbnail-image"></span>
</a>
                        </div>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" style="cursor: default; pointer-events: none;">网络安全</a></p>
                            <p class="item-title"><a href="/zh-CN/2025/10/CISP-Access-Control-Audit-WAPI/" class="title">CISP学习指南：访问控制机制、蜜网、审计系统与WAPI</a></p>
                            <p class="item-date"><time datetime="2025-10-21T16:00:00.000Z" itemprop="datePublished">2025-10-22</time></p>
                        </div>
                    </li>
            </ul>
        </div>
    </div>

                
            
                
                
    
    
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list">
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2025/">2025</a>
                    <span class="archive-list-count">75</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2024/">2024</a>
                    <span class="archive-list-count">25</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2023/">2023</a>
                    <span class="archive-list-count">16</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2022/">2022</a>
                    <span class="archive-list-count">17</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2021/">2021</a>
                    <span class="archive-list-count">14</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2020/">2020</a>
                    <span class="archive-list-count">13</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2019/">2019</a>
                    <span class="archive-list-count">12</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2018/">2018</a>
                    <span class="archive-list-count">3</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2017/">2017</a>
                    <span class="archive-list-count">6</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2016/">2016</a>
                    <span class="archive-list-count">5</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2015/">2015</a>
                    <span class="archive-list-count">6</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2014/">2014</a>
                    <span class="archive-list-count">10</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2013/">2013</a>
                    <span class="archive-list-count">3</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2010/">2010</a>
                    <span class="archive-list-count">3</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2007/">2007</a>
                    <span class="archive-list-count">1</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2006/">2006</a>
                    <span class="archive-list-count">1</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2003/">2003</a>
                    <span class="archive-list-count">1</span>
                </li>
            
                <li class="archive-list-item">
                    <a class="archive-list-link" href="/zh-CN/archives/2001/">2001</a>
                    <span class="archive-list-count">1</span>
                </li>
            
            </ul>
        </div>
    </div>


                
            
        

    </div>
</aside>


                </div>
            </div>
        </div>
        
<footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>

            <div class="qrcode-share-wrapper">
                <div class="qrcode-text">https://neo01.com/l#9869c717</div>
                <img src="/qr/qr-d6525a772b0a60cef7e6fffd0060d2fd.svg" width="200" height="200" alt="QR Code for https://neo01.com/l#9869c717">
            </div>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" title="Homepage" class="logo"></a>
                </h1>
                
                <p>© 2025 Neo Alienson. 版权所有.
                  <a href="/zh-CN/terms-and-conditions">使用条款</a></p>
                
            </div>
            <div class="footer-plugins">
              


            </div>
        </div>
    </div>
</footer>

        
        
    
        


        


        


        


        


        


        


        


        


    



<!-- Custom Scripts -->




        
    </div>
<!-- hexo injector body_end start --><script type="text/javascript" src="/js/bundle_last.js"></script><!-- hexo injector body_end end -->

<script>CookieConsent.run({"palette":{"popup":{"background":"#000"},"button":{"background":"#f1d600"}},"guiOptions":{"consentModal":{"layout":"box","position":"bottom right","equalWeightButtons":true,"flipButtons":false},"preferencesModal":{"layout":"box","position":"right","equalWeightButtons":false,"flipButtons":false}},"categories":{"necessary":{"readOnly":true},"functionality":{},"analytics":{}},"language":{"default":"en","autoDetect":"browser","translations":{"en":{"consentModal":{"title":"Hello traveler, it's cookie time!","description":"🍪 This site uses cookies to serve you the best experience—no crumbs left behind! Want to know what cookies really are? Check out this easy-to-understand cookie explanation. And for the legal nitty-gritty, here’s our website cookie policy to keep you in the loop! 🚀\n","acceptAllBtn":"Accept all","acceptNecessaryBtn":"Reject all","showPreferencesBtn":"Manage preferences","footer":"<a href=\"#link\">Privacy Policy</a>\n<a href=\"/terms-and-conditions/\">Terms and conditions</a>\n"},"preferencesModal":{"title":"Consent Preferences Center","acceptAllBtn":"Accept all","acceptNecessaryBtn":"Reject all","savePreferencesBtn":"Save preferences","closeIconLabel":"Close modal","serviceCounterLabel":"Service|Services","sections":[{"title":"Cookie Usage","description":"We use cookies to make your visit smoother, faster, and tailored just for you. Cookies help us remember your preferences, improve site performance, and deliver personalized content while keeping things secure and user-friendly.\n"},{"title":"Strictly Necessary Cookies <span class=\"pm__badge\">Always Enabled</span>","description":"These cookies are essential for the website to function properly. They enable core features like security, page navigation, and access to secure areas. Without these, the site cannot operate correctly.\n","linkedCategory":"necessary"},{"title":"Functionality Cookies","description":"Functionality cookies remember your choices to provide a more personalized experience. For example, they save your language preference or login details so you don’t have to keep entering them each time.\n","linkedCategory":"functionality"},{"title":"Analytics Cookies","description":"Analytics cookies help us understand how visitors interact with our site by collecting information anonymously. This insight allows us to improve functionality, fix issues, and make the website better for you.\n","linkedCategory":"analytics"},{"title":"More information","description":"Please refer to our <a href='/pages/cookie-policy'>cookie policy</a> for full details on how we use cookies and your options to manage them.\n"}]}}}}})</script></body></html>